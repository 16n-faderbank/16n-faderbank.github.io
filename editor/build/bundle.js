var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,r){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function a(e,t,n,r){if(e){const o=l(e,t,n,r);return e[0](o)}}function l(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function c(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if("object"==typeof t.dirty){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}function u(e){return null==e?"":e}function f(e,t,n=t){return e.set(n),t}function d(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function m(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function E(){return $(" ")}function v(){return $("")}function _(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?void 0:+e}function S(e,t){t=""+t,e.data!==t&&(e.data=t)}function M(e,t){(null!=t||e.value)&&(e.value=t)}function I(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function w(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function C(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function x(e,t,n){e.classList[n?"add":"remove"](t)}let N;function A(e){N=e}function T(){if(!N)throw new Error("Function called outside component initialization");return N}function D(e){T().$$.on_destroy.push(e)}function R(){const e=T();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}function G(e){return T().$$.context.get(e)}const P=[],H=[],O=[],k=[],L=Promise.resolve();let B=!1;function F(e){O.push(e)}function q(e){k.push(e)}let Y=!1;const j=new Set;function V(){if(!Y){Y=!0;do{for(let e=0;e<P.length;e+=1){const t=P[e];A(t),W(t.$$)}for(P.length=0;H.length;)H.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];j.has(t)||(j.add(t),t())}O.length=0}while(P.length);for(;k.length;)k.pop()();B=!1,Y=!1,j.clear()}}function W(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}const U=new Set;let J;function z(){J={r:0,c:[],p:J}}function Q(){J.r||r(J.c),J=J.p}function K(e,t){e&&e.i&&(U.delete(e),e.i(t))}function X(e,t,n,r){if(e&&e.o){if(U.has(e))return;U.add(e),J.c.push(()=>{U.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function Z(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ee(e){e&&e.c()}function te(e,n,s){const{fragment:i,on_mount:a,on_destroy:l,after_update:c}=e.$$;i&&i.m(n,s),F(()=>{const n=a.map(t).filter(o);l?l.push(...n):r(n),e.$$.on_mount=[]}),c.forEach(F)}function ne(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function re(e,t){-1===e.$$.dirty[0]&&(P.push(e),B||(B=!0,L.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(t,o,s,i,a,l,c=[-1]){const u=N;A(t);const f=o.props||{},d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c};let p=!1;d.ctx=s?s(t,f,(e,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&a(d.ctx[e],d.ctx[e]=o)&&(d.bound[e]&&d.bound[e](o),p&&re(t,e)),n}):[],d.update(),p=!0,r(d.before_update),d.fragment=!!i&&i(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l(function(e){return Array.from(e.childNodes)}(o.target)):d.fragment&&d.fragment.c(),o.intro&&K(t.$$.fragment),te(t,o.target,o.anchor),V()),A(u)}class se{$destroy(){ne(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ie(...e){window.debugMode&&console.log(...e)}class ae{constructor({ledOn:e=!0,ledFlash:t=!0,controllerFlip:n=!1,deviceId:r=0,i2cMaster:o=!1,fadermin:s=0,fadermax:i=8192,firmwareVersion:a="unknown",usbControls:l=[],trsControls:c=[]}){this.ledOn=e,this.ledFlash=t,this.controllerFlip=n,this.deviceId=r,this.firmwareVersion=a,this.i2cMaster=o,this.fadermin=s,this.fadermax=i,this.usbControls=l,this.trsControls=c}isEquivalent(e){let t=this.ledOn==e.ledOn&&this.ledFlash==e.ledFlash&&this.controllerFlip==e.controllerFlip;("i2cMaster"in this||"i2cMaster"in e)&&(t=t&&this.i2cMaster==e.i2cMaster),("fadermax"in this||"fadermax"in e)&&(t=t&&this.fadermax==e.fadermax&&this.fadermin==e.fadermin);let n=!0;return this.usbControls.forEach((t,r)=>{let o=e.usbControls[r];t.channel==o.channel&&t.cc==o.cc||(n=!1)}),this.trsControls.forEach((t,r)=>{let o=e.trsControls[r];t.channel==o.channel&&t.cc==o.cc||(n=!1)}),t&&n&&!0}toSysexArray(){let e=Array.from({length:84},e=>0);e[0]=this.deviceId,e[1]=this.firmwareArray()[0],e[2]=this.firmwareArray()[1],e[3]=this.firmwareArray()[2],e[4]=this.ledOn?1:0,e[5]=this.ledFlash?1:0,e[6]=this.controllerFlip?1:0,e[7]=this.i2cMaster;let t=this.fadermin>>7,n=this.fadermin-(t<<7);e[8]=n,e[9]=t;let r=this.fadermax>>7,o=this.fadermax-(r<<7);e[10]=o,e[11]=r;return this.usbControls.forEach((t,n)=>{e[n+20]=t.channel,e[n+52]=t.cc}),this.trsControls.forEach((t,n)=>{e[n+36]=t.channel,e[n+68]=t.cc}),e}toJsonString(){let e=ae.clone(this),t=this.device().controlCount;return e.usbControls=e.usbControls.splice(0,t),e.usbControls.forEach(e=>delete e.val),e.trsControls=e.trsControls.splice(0,t),JSON.stringify(e,!1,2)}isNewConfigInvalid(e){return e.deviceId!=this.deviceId&&`Cannot update - this data file is for a ${ae.devices[e.deviceId].name}, but you are trying to install it on a ${this.device().name} `}updateFromJson(e){return Object.keys(e).forEach(t=>{this[t]=e[t]}),this}device(){return ae.devices[this.deviceId]}firmwareArray(){return this.firmwareVersion.trim().split(".").map(e=>parseInt(e))}static clone(e){let t=new ae({ledOn:e.ledOn,ledFlash:e.ledFlash,controllerFlip:e.controllerFlip,usbControls:[],trsControls:[],deviceId:e.deviceId,firmwareVersion:e.firmwareVersion,i2cMaster:e.i2cMaster,fadermin:e.fadermin,fadermax:e.fadermax});return e.usbControls.forEach((e,n)=>{t.usbControls[n]={...e}}),e.trsControls.forEach((e,n)=>{t.trsControls[n]={...e}}),t}static returnConfigHashFromSysex(e){ie("Generating config from",e);let t=e[5],n=e[6]+"."+e[7]+"."+e[8],r=e[9],o=e[10],s=e[11],i=1==e[12],a=e[13],l=(e[14]<<7)+a,c=e[15],u=(e[16]<<7)+c,f=[],d=[];return e.slice(25,41).forEach((e,t)=>{127!=e&&(f[t]={channel:e})}),e.slice(41,57).forEach((e,t)=>{127!=e&&(d[t]={channel:e})}),e.slice(57,73).forEach((e,t)=>{127!=e&&(f[t].cc=e)}),e.slice(73,89).forEach((e,t)=>{127!=e&&(d[t].cc=e)}),f.forEach(e=>e.val=0),new ae({ledOn:r,ledFlash:o,controllerFlip:s,usbControls:f,trsControls:d,deviceId:t,firmwareVersion:n,i2cMaster:i,fadermin:l,fadermax:u})}}ae.devices=[{name:"unknown",controlCount:0,capabilities:{}},{name:"Oxion development board",controlCount:4,capabilities:{led:!0}},{name:"16n",controlCount:16,capabilities:{i2c:!0,led:!0}}];class le{static import(e,t,n){let r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("id","uploadedConfig"),r.setAttribute("onchange","window.handleFiles(this.files)"),window.handleFiles=r=>{if(r.length>0){let o=r[0];const s=new FileReader;s.addEventListener("load",r=>{const o=JSON.parse(s.result),i=e.isNewConfigInvalid(o);i?alert(i):(n.update(t=>e.updateFromJson(o)),e.isEquivalent(t)?alert("Imported configuration is identical to currently loaded configuration; no changes to upload."):alert("New configuration imported. Choose 'update controller' to import, or 'Cancel' to abort"))}),s.readAsText(o),window.handleFiles=null}},r.click(),r.remove()}static export(e){let t="data:text/json;charset=utf-8,"+encodeURIComponent(e.toJsonString()),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",`${e.device().name}_controller_config.json`),document.body.appendChild(n),n.click(),n.remove()}}var ce="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var ue=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){!function(t){function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(n.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(e){return this._nrpnEventsEnabled=e,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var r=new n;function o(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}},type:{enumerable:!0,get:function(){return t._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function s(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}},type:{enumerable:!0,get:function(){return t._midiOutput.type}}})}n.prototype.enable=function(e,t){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:t}).then(function(t){var n,r=[],o=[];this.interface=t,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){r.push(e)};for(var s=t.inputs.values(),i=s.next();i&&!i.done;i=s.next())o.push(i.value.open());for(var a=t.outputs.values(),l=a.next();l&&!l.done;l=a.next())o.push(l.value.open());function c(){clearTimeout(n),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof e&&e.call(this),r.forEach(function(e){this._onInterfaceStateChange(e)}.bind(this))}n=setTimeout(c.bind(this),200),Promise&&Promise.all(o).catch((function(e){})).then(c.bind(this))}.bind(this),function(t){"function"==typeof e&&e.call(this,t)}.bind(this)):"function"==typeof e&&e(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},n.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},n.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[e].length;n++)if(this._userHandlers[e][n]===t)return!0;return!1},n.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(e))if(t)for(var n=0;n<this._userHandlers[e].length;n++)this._userHandlers[e][n]===t&&this._userHandlers[e].splice(n,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.toMIDIChannels=function(e){var t;if("all"===e||void 0===e)t=["all"];else{if("none"===e)return[];t=Array.isArray(e)?e:[e]}return-1<t.indexOf("all")&&(t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),t.map((function(e){return parseInt(e)})).filter((function(e){return 1<=e&&e<=16}))},n.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},n.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},n.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},n.prototype.getOctave=function(e){if(null!=e&&0<=e&&e<=127)return Math.floor(Math.floor(e)/12-1)+Math.floor(r.octaveOffset)},n.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},n.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&0<=e&&e<=127?t=Math.round(e):0<=parseInt(e)&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid input value ("+e+").");return t},n.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");var n=r._semitones[t[1].toUpperCase()],o=12*(parseInt(t[3])+1-Math.floor(r.octaveOffset))+n;if(-1<t[2].toLowerCase().indexOf("b")?o-=t[2].length:-1<t[2].toLowerCase().indexOf("#")&&(o+=t[2].length),o<0||127<o)throw new RangeError("Invalid note name or note outside valid range.");return o},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,n=this.interface.inputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._inputs[e]._midiInput===r.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface&&this.interface.inputs.forEach(function(e){for(var t=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===e&&(t=!1);t&&this._inputs.push(new o(e))}.bind(this))},n.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,n=this.interface.outputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._outputs[e]._midiOutput===r.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface&&this.interface.outputs.forEach(function(e){for(var t=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===e&&(t=!1);t&&this._outputs.push(new s(e))}.bind(this))},n.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var t={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)):t.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach((function(e){e(t)}))},n.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},o.prototype.on=o.prototype.addListener=function(e,t,n){var o=this;if(void 0===t&&(t="all"),Array.isArray(t)||(t=[t]),t.forEach((function(e){if("all"!==e&&!(1<=e&&e<=16))throw new RangeError("The 'channel' parameter is invalid.")})),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==r.MIDI_SYSTEM_MESSAGES[e])this._userHandlers.system[e]||(this._userHandlers.system[e]=[]),this._userHandlers.system[e].push(n);else{if(void 0===r.MIDI_CHANNEL_MESSAGES[e])throw new TypeError("The specified event type is not supported.");if(-1<t.indexOf("all")){t=[];for(var s=1;s<=16;s++)t.push(s)}this._userHandlers.channel[e]||(this._userHandlers.channel[e]=[]),t.forEach((function(t){o._userHandlers.channel[e][t]||(o._userHandlers.channel[e][t]=[]),o._userHandlers.channel[e][t].push(n)}))}return this},o.prototype.hasListener=function(e,t,n){var o=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e]){for(var s=0;s<this._userHandlers.system[e].length;s++)if(this._userHandlers.system[e][s]===n)return!0}else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var i=1;i<=16;i++)t.push(i)}return!!this._userHandlers.channel[e]&&t.every((function(t){var r=o._userHandlers.channel[e][t];return r&&-1<r.indexOf(n)}))}return!1},o.prototype.removeListener=function(e,t,n){var o=this;if(void 0!==n&&"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e])if(void 0===n)this._userHandlers.system[e]=[];else for(var s=0;s<this._userHandlers.system[e].length;s++)this._userHandlers.system[e][s]===n&&this._userHandlers.system[e].splice(s,1);else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var i=1;i<=16;i++)t.push(i)}if(!this._userHandlers.channel[e])return this;t.forEach((function(t){var r=o._userHandlers.channel[e][t];if(r)if(void 0===n)o._userHandlers.channel[e][t]=[];else for(var s=0;s<r.length;s++)r[s]===n&&r.splice(s,1)}))}else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},o.prototype._initializeUserHandlers=function(){for(var e in r.MIDI_CHANNEL_MESSAGES)r.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in r.MIDI_SYSTEM_MESSAGES)r.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},o.prototype._onMidiMessage=function(e){if(0<this._userHandlers.system.midimessage.length){var t={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach((function(e){e(t)}))}e.data[0]<240?(this._parseChannelEvent(e),this._parseNrpnEvent(e)):e.data[0]<=255&&this._parseSystemEvent(e)},o.prototype._parseNrpnEvent=function(e){var t,n,o=e.data[0]>>4,s=15&e.data[0],i=1+s;if(1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0),r.nrpnEventsEnabled&&o===r.MIDI_CHANNEL_MESSAGES.controlchange&&(t>=r.MIDI_NRPN_MESSAGES.increment&&t<=r.MIDI_NRPN_MESSAGES.parammsb||t===r.MIDI_NRPN_MESSAGES.entrymsb||t===r.MIDI_NRPN_MESSAGES.entrylsb)){var a={target:this,type:"controlchange",data:e.data,timestamp:e.timeStamp,channel:i,controller:{number:t,name:this.getCcNameByNumber(t)},value:n};if(a.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&a.value!=r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[s]=[],r._nrpnBuffer[s][0]=a;else if(1===r._nrpnBuffer[s].length&&a.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb)r._nrpnBuffer[s].push(a);else if(2!==r._nrpnBuffer[s].length||a.controller.number!==r.MIDI_NRPN_MESSAGES.increment&&a.controller.number!==r.MIDI_NRPN_MESSAGES.decrement&&a.controller.number!==r.MIDI_NRPN_MESSAGES.entrymsb)if(3===r._nrpnBuffer[s].length&&r._nrpnBuffer[s][2].number===r.MIDI_NRPN_MESSAGES.entrymsb&&a.controller.number===r.MIDI_NRPN_MESSAGES.entrylsb)r._nrpnBuffer[s].push(a);else if(3<=r._nrpnBuffer[s].length&&r._nrpnBuffer[s].length<=4&&a.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&a.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[s].push(a);else if(4<=r._nrpnBuffer[s].length&&r._nrpnBuffer[s].length<=5&&a.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb&&a.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter){r._nrpnBuffer[s].push(a);var l=[];r._nrpnBuffer[s].forEach((function(e){l.push(e.data)}));var c=r._nrpnBuffer[s][0].value<<7|r._nrpnBuffer[s][1].value,u=r._nrpnBuffer[s][2].value;6===r._nrpnBuffer[s].length&&(u=r._nrpnBuffer[s][2].value<<7|r._nrpnBuffer[s][3].value);var f="";switch(r._nrpnBuffer[s][2].controller.number){case r.MIDI_NRPN_MESSAGES.entrymsb:f=r._nrpnTypes[0];break;case r.MIDI_NRPN_MESSAGES.increment:f=r._nrpnTypes[1];break;case r.MIDI_NRPN_MESSAGES.decrement:f=r._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var d={timestamp:a.timestamp,channel:a.channel,type:"nrpn",data:l,controller:{number:c,type:f,name:"Non-Registered Parameter "+c},value:u};r._nrpnBuffer[s]=[],this._userHandlers.channel[d.type]&&this._userHandlers.channel[d.type][d.channel]&&this._userHandlers.channel[d.type][d.channel].forEach((function(e){e(d)}))}else r._nrpnBuffer[s]=[];else r._nrpnBuffer[s].push(a)}},o.prototype._parseChannelEvent=function(e){var t,n,o=e.data[0]>>4,s=1+(15&e.data[0]);1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0);var i={target:this,data:e.data,timestamp:e.timeStamp,channel:s};o===r.MIDI_CHANNEL_MESSAGES.noteoff||o===r.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(i.type="noteoff",i.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},i.velocity=n/127,i.rawVelocity=n):o===r.MIDI_CHANNEL_MESSAGES.noteon?(i.type="noteon",i.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},i.velocity=n/127,i.rawVelocity=n):o===r.MIDI_CHANNEL_MESSAGES.keyaftertouch?(i.type="keyaftertouch",i.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},i.value=n/127):o===r.MIDI_CHANNEL_MESSAGES.controlchange&&0<=t&&t<=119?(i.type="controlchange",i.controller={number:t,name:this.getCcNameByNumber(t)},i.value=n):o===r.MIDI_CHANNEL_MESSAGES.channelmode&&120<=t&&t<=127?(i.type="channelmode",i.controller={number:t,name:this.getChannelModeByNumber(t)},i.value=n):o===r.MIDI_CHANNEL_MESSAGES.programchange?(i.type="programchange",i.value=t):o===r.MIDI_CHANNEL_MESSAGES.channelaftertouch?(i.type="channelaftertouch",i.value=t/127):o===r.MIDI_CHANNEL_MESSAGES.pitchbend?(i.type="pitchbend",i.value=((n<<7)+t-8192)/8192):i.type="unknownchannelmessage",this._userHandlers.channel[i.type]&&this._userHandlers.channel[i.type][s]&&this._userHandlers.channel[i.type][s].forEach((function(e){e(i)}))},o.prototype.getCcNameByNumber=function(e){if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var t in r.MIDI_CONTROL_CHANGE_MESSAGES)if(r.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},o.prototype.getChannelModeByNumber=function(e){if(!(120<=(e=Math.floor(e))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in r.MIDI_CHANNEL_MODE_MESSAGES)if(r.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CHANNEL_MODE_MESSAGES[t])return t},o.prototype._parseSystemEvent=function(e){var t=e.data[0],n={target:this,data:e.data,timestamp:e.timeStamp};t===r.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":t===r.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":t===r.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":t===r.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=e.data[1]):t===r.MIDI_SYSTEM_MESSAGES.tuningrequest?n.type="tuningrequest":t===r.MIDI_SYSTEM_MESSAGES.clock?n.type="clock":t===r.MIDI_SYSTEM_MESSAGES.start?n.type="start":t===r.MIDI_SYSTEM_MESSAGES.continue?n.type="continue":t===r.MIDI_SYSTEM_MESSAGES.stop?n.type="stop":t===r.MIDI_SYSTEM_MESSAGES.activesensing?n.type="activesensing":t===r.MIDI_SYSTEM_MESSAGES.reset?n.type="reset":n.type="unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach((function(e){e(n)}))},s.prototype.send=function(e,t,n){if(!(128<=e&&e<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var r=[];return t.forEach((function(e){var t=Math.floor(e);if(!(0<=t&&t<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");r.push(t)})),this._midiOutput.send([e].concat(r),parseFloat(n)||0),this},s.prototype.sendSysex=function(e,t,n){if(!r.sysexEnabled)throw new Error("Sysex message support must first be activated.");return n=n||{},e=[].concat(e),t.forEach((function(e){if(e<0||127<e)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")})),t=e.concat(t,r.MIDI_SYSTEM_MESSAGES.sysexend),this.send(r.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(n.time)),this},s.prototype.sendTimecodeQuarterFrame=function(e,t){return t=t||{},this.send(r.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter(t.time)),this},s.prototype.sendSongPosition=function(e,t){t=t||{};var n=(e=Math.floor(e)||0)>>7&127,o=127&e;return this.send(r.MIDI_SYSTEM_MESSAGES.songposition,[n,o],this._parseTimeParameter(t.time)),this},s.prototype.sendSongSelect=function(e,t){if(t=t||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(r.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},s.prototype.sendTuningRequest=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendClock=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendStart=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendContinue=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendStop=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendActiveSensing=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(e.time)),this},s.prototype.sendReset=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(e.time)),this},s.prototype.stopNote=function(e,t,n){if("all"===e)return this.sendChannelMode("allnotesoff",0,t,n);var o=64;return(n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(o=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(o=127*n.velocity),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(o)],this._parseTimeParameter(n.time))}.bind(this))}.bind(this)),this},s.prototype.playNote=function(e,t,n){var o,s=64;if((n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(s=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(s=127*n.velocity),o=this._parseTimeParameter(n.time),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteon<<4)+(t-1),[e,Math.round(s)],o)}.bind(this))}.bind(this)),!isNaN(n.duration)){n.duration<=0&&(n.duration=0);var i=64;n.rawVelocity?!isNaN(n.release)&&0<=n.release&&n.release<=127&&(i=n.release):!isNaN(n.release)&&0<=n.release&&n.release<=1&&(i=127*n.release),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(i)],(o||r.time)+n.duration)}.bind(this))}.bind(this))}return this},s.prototype.sendKeyAftertouch=function(e,t,n,o){var s=this;if(o=o||{},t<1||16<t)throw new RangeError("The channel must be between 1 and 16.");(isNaN(n)||n<0||1<n)&&(n=.5);var i=Math.round(127*n);return this._convertNoteToArray(e).forEach((function(e){r.toMIDIChannels(t).forEach((function(t){s.send((r.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(t-1),[e,i],s._parseTimeParameter(o.time))}))})),this},s.prototype.sendControlChange=function(e,t,n,o){if(o=o||{},"string"==typeof e){if(void 0===(e=r.MIDI_CONTROL_CHANGE_MESSAGES[e]))throw new TypeError("Invalid controller name.")}else if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("Controller value must be between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(n-1),[e,t],this._parseTimeParameter(o.time))}.bind(this)),this},s.prototype._selectRegisteredParameter=function(e,t,n){var o=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(101,e[0],t,{time:n}),o.sendControlChange(100,e[1],t,{time:n})})),this},s.prototype._selectNonRegisteredParameter=function(e,t,n){var o=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(99,e[0],t,{time:n}),o.sendControlChange(98,e[1],t,{time:n})})),this},s.prototype._setCurrentRegisteredParameter=function(e,t,n){var o=this;if((e=[].concat(e))[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(6,e[0],t,{time:n})})),e[1]=Math.floor(e[1]),0<=e[1]&&e[1]<=127&&r.toMIDIChannels(t).forEach((function(){o.sendControlChange(38,e[1],t,{time:n})})),this},s.prototype._deselectRegisteredParameter=function(e,t){var n=this;return r.toMIDIChannels(e).forEach((function(){n.sendControlChange(101,127,e,{time:t}),n.sendControlChange(100,127,e,{time:t})})),this},s.prototype.setRegisteredParameter=function(e,t,n,o){var s=this;if(o=o||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(n).forEach((function(){s._selectRegisteredParameter(e,n,o.time),s._setCurrentRegisteredParameter(t,n,o.time),s._deselectRegisteredParameter(n,o.time)})),this},s.prototype.setNonRegisteredParameter=function(e,t,n,o){var s=this;if(o=o||{},!(0<=e[0]&&e[0]<=127&&0<=e[1]&&e[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return t=[].concat(t),r.toMIDIChannels(n).forEach((function(){s._selectNonRegisteredParameter(e,n,o.time),s._setCurrentRegisteredParameter(t,n,o.time),s._deselectRegisteredParameter(n,o.time)})),this},s.prototype.incrementRegisteredParameter=function(e,t,n){var o=this;if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach((function(){o._selectRegisteredParameter(e,t,n.time),o.sendControlChange(96,0,t,{time:n.time}),o._deselectRegisteredParameter(t,n.time)})),this},s.prototype.decrementRegisteredParameter=function(e,t,n){if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new TypeError("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach(function(){this._selectRegisteredParameter(e,t,n.time),this.sendControlChange(97,0,t,{time:n.time}),this._deselectRegisteredParameter(t,n.time)}.bind(this)),this},s.prototype.setPitchBendRange=function(e,t,n,o){var s=this;if(o=o||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach((function(){s.setRegisteredParameter("pitchbendrange",[e,t],n,{time:o.time})})),this},s.prototype.setModulationRange=function(e,t,n,o){var s=this;if(o=o||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach((function(){s.setRegisteredParameter("modulationrange",[e,t],n,{time:o.time})})),this},s.prototype.setMasterTuning=function(e,t,n){var o=this;if(n=n||{},(e=parseFloat(e)||0)<=-65||64<=e)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var s=Math.floor(e)+64,i=e-Math.floor(e),a=(i=Math.round((i+1)/2*16383))>>7&127,l=127&i;return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("channelcoarsetuning",s,t,{time:n.time}),o.setRegisteredParameter("channelfinetuning",[a,l],t,{time:n.time})})),this},s.prototype.setTuningProgram=function(e,t,n){var o=this;if(n=n||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The program value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("tuningprogram",e,t,{time:n.time})})),this},s.prototype.setTuningBank=function(e,t,n){var o=this;if(n=n||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The bank value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("tuningbank",e,t,{time:n.time})})),this},s.prototype.sendChannelMode=function(e,t,n,o){if(o=o||{},"string"==typeof e){if(!(e=r.MIDI_CHANNEL_MODE_MESSAGES[e]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(e=Math.floor(e))&&e<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((t=Math.floor(t)||0)<0||127<t)throw new RangeError("Value must be an integer between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(n-1),[e,t],this._parseTimeParameter(o.time))}.bind(this)),this},s.prototype.sendProgramChange=function(e,t,n){var o=this;if(n=n||{},e=Math.floor(e),isNaN(e)||e<0||127<e)throw new RangeError("Program numbers must be between 0 and 127.");return r.toMIDIChannels(t).forEach((function(t){o.send((r.MIDI_CHANNEL_MESSAGES.programchange<<4)+(t-1),[e],o._parseTimeParameter(n.time))})),this},s.prototype.sendChannelAftertouch=function(e,t,n){var o=this;n=n||{},e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=.5);var s=Math.round(127*e);return r.toMIDIChannels(t).forEach((function(e){o.send((r.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(e-1),[s],o._parseTimeParameter(n.time))})),this},s.prototype.sendPitchBend=function(e,t,n){var o=this;if(n=n||{},isNaN(e)||e<-1||1<e)throw new RangeError("Pitch bend value must be between -1 and 1.");var s=Math.round((e+1)/2*16383),i=s>>7&127,a=127&s;return r.toMIDIChannels(t).forEach((function(e){o.send((r.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(e-1),[a,i],o._parseTimeParameter(n.time))})),this},s.prototype._parseTimeParameter=function(e){var t,n=parseFloat(e);return"string"==typeof e&&"+"===e.substring(0,1)?n&&0<n&&(t=r.time+n):n>r.time&&(t=n),t},s.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach((function(e){t.push(r.guessNoteNumber(e))})),t},e.exports?e.exports=r:t.WebMidi||(t.WebMidi=r)}(ce)}));class fe{static isOxionSysex(e){return e[1]==this.sysexMfgId[0]&&e[2]==this.sysexMfgId[1]&&e[3]==this.sysexMfgId[2]}static sortMidiInterfaces(e,t){let n=`${e.manufacturer} ${e.name}`,r=`${t.manufacturer} ${t.name}`;return n<r?-1:n>r?1:0}static allInputs(){return ue.inputs.sort(fe.sortMidiInterfaces)}static allOutputs(){return ue.outputs.sort(fe.sortMidiInterfaces)}static sendConfig(e,t){t.sendSysex(fe.sysexMfgId,[fe.updateConfigMsg].concat(e))}static requestConfig(e){e.sendSysex(fe.sysexMfgId,[fe.requestInfoMsg])}}fe.sysexMfgId=[125,0,0],fe.requestInfoMsg=31,fe.updateConfigMsg=14;const de=[];function pe(t,n=e){let r;const o=[];function i(e){if(s(t,e)&&(t=e,r)){const e=!de.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),de.push(n,t)}if(e){for(let e=0;e<de.length;e+=2)de[e][0](de[e+1]);de.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(s,a=e){const l=[s,a];return o.push(l),1===o.length&&(r=n(i)||e),s(t),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}const he=pe(null),me=pe(null),ge=pe([]),$e=pe([]),Ee=pe(null),ve=pe(null),_e=pe(null);function be(t){let n,r;return{c(){n=g("span"),b(n,"class",r="fas fa-"+t[0]+" "+t[1]+" svelte-pvbvkq")},m(e,t){p(e,n,t)},p(e,[t]){3&t&&r!==(r="fas fa-"+e[0]+" "+e[1]+" svelte-pvbvkq")&&b(n,"class",r)},i:e,o:e,d(e){e&&h(n)}}}function ye(e,t,n){let{i:r}=t,{classList:o=""}=t;return e.$set=e=>{"i"in e&&n(0,r=e.i),"classList"in e&&n(1,o=e.classList)},[r,o]}class Se extends se{constructor(e){super(),oe(this,e,ye,be,s,{i:0,classList:1})}}function Me(e){let t;const n=new Se({props:{i:e[1]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};2&t&&(r.i=e[1]),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function Ie(e){let t,n,r,o,s,i,a=e[1]&&Me(e);return{c(){t=g("div"),n=g("button"),a&&a.c(),r=E(),o=$(e[0]),n.disabled=e[2],b(n,"class","svelte-1gcivh1"),b(t,"class","svelte-1gcivh1")},m(l,c){p(l,t,c),d(t,n),a&&a.m(n,null),d(n,r),d(n,o),s=!0,i=_(n,"click",e[3])},p(e,[t]){e[1]?a?(a.p(e,t),K(a,1)):(a=Me(e),a.c(),K(a,1),a.m(n,r)):a&&(z(),X(a,1,1,()=>{a=null}),Q()),(!s||1&t)&&S(o,e[0]),(!s||4&t)&&(n.disabled=e[2])},i(e){s||(K(a),s=!0)},o(e){X(a),s=!1},d(e){e&&h(t),a&&a.d(),i()}}}function we(e,t,n){let{label:r}=t,{clickMessageName:o=null}=t,{icon:s=null}=t,{disabled:i=!1}=t;const a=R();return e.$set=e=>{"label"in e&&n(0,r=e.label),"clickMessageName"in e&&n(4,o=e.clickMessageName),"icon"in e&&n(1,s=e.icon),"disabled"in e&&n(2,i=e.disabled)},[r,s,i,function(){a("message",{name:o})},o]}class Ce extends se{constructor(e){super(),oe(this,e,we,Ie,s,{label:0,clickMessageName:4,icon:1,disabled:2})}}function xe(e){let t,n,r,o,s,i;const u=e[2].default,f=a(u,e,e[1],null);return{c(){t=g("p"),n=g("label"),r=g("input"),o=E(),f&&f.c(),b(r,"type","checkbox")},m(a,l){p(a,t,l),d(t,n),d(n,r),r.checked=e[0],d(n,o),f&&f.m(n,null),s=!0,i=_(r,"change",e[3])},p(e,[t]){1&t&&(r.checked=e[0]),f&&f.p&&2&t&&f.p(l(u,e,e[1],null),c(u,e[1],t,null))},i(e){s||(K(f,e),s=!0)},o(e){X(f,e),s=!1},d(e){e&&h(t),f&&f.d(e),i()}}}function Ne(e,t,n){let{checked:r}=t,{$$slots:o={},$$scope:s}=t;return e.$set=e=>{"checked"in e&&n(0,r=e.checked),"$$scope"in e&&n(1,s=e.$$scope)},[r,s,o,function(){r=this.checked,n(0,r)}]}class Ae extends se{constructor(e){super(),oe(this,e,Ne,xe,s,{checked:0})}}function Te(e){let t,n,r,o,s,i=void 0!==e[0].val&&De(e);return{c(){t=g("dt"),t.textContent="Value",n=g("dd"),r=g("div"),i&&i.c(),o=E(),s=g("div"),b(t,"class","svelte-5fijw0"),b(s,"class","bar svelte-5fijw0"),I(s,"height",e[0].val+"px"),b(r,"class","inner svelte-5fijw0"),b(n,"class","display svelte-5fijw0")},m(e,a){p(e,t,a),p(e,n,a),d(n,r),i&&i.m(r,null),d(r,o),d(r,s)},p(e,t){void 0!==e[0].val?i?i.p(e,t):(i=De(e),i.c(),i.m(r,o)):i&&(i.d(1),i=null),1&t&&I(s,"height",e[0].val+"px")},d(e){e&&h(t),e&&h(n),i&&i.d()}}}function De(e){let t,n,r,o=e[0].val+"";return{c(){t=g("span"),n=$(o),b(t,"class",r=u(e[0].val<27?"lowvalue":"")+" svelte-5fijw0")},m(e,r){p(e,t,r),d(t,n)},p(e,s){1&s&&o!==(o=e[0].val+"")&&S(n,o),1&s&&r!==(r=u(e[0].val<27?"lowvalue":"")+" svelte-5fijw0")&&b(t,"class",r)},d(e){e&&h(t)}}}function Re(t){let n,r,o,s,i,a,l,c,u,f=t[1]+1+"",m=t[0].channel+"",E=t[0].cc+"",v=!t[2]&&Te(t);return{c(){n=g("dl"),r=g("dt"),o=$(f),s=g("dt"),s.textContent="Channel",i=g("dd"),a=$(m),l=g("dt"),l.textContent="CC",c=g("dd"),u=$(E),v&&v.c(),b(r,"class","index svelte-5fijw0"),b(s,"class","svelte-5fijw0"),b(i,"class","svelte-5fijw0"),b(l,"class","svelte-5fijw0"),b(c,"class","svelte-5fijw0"),b(n,"class","config-column svelte-5fijw0")},m(e,t){p(e,n,t),d(n,r),d(r,o),d(n,s),d(n,i),d(i,a),d(n,l),d(n,c),d(c,u),v&&v.m(n,null)},p(e,[t]){2&t&&f!==(f=e[1]+1+"")&&S(o,f),1&t&&m!==(m=e[0].channel+"")&&S(a,m),1&t&&E!==(E=e[0].cc+"")&&S(u,E),e[2]?v&&(v.d(1),v=null):v?v.p(e,t):(v=Te(e),v.c(),v.m(n,null))},i:e,o:e,d(e){e&&h(n),v&&v.d()}}}function Ge(e,t,n){let{control:r}=t,{index:o}=t,{disableValue:s=!1}=t;return e.$set=e=>{"control"in e&&n(0,r=e.control),"index"in e&&n(1,o=e.index),"disableValue"in e&&n(2,s=e.disableValue)},[r,o,s]}class Pe extends se{constructor(e){super(),oe(this,e,Ge,Re,s,{control:0,index:1,disableValue:2})}}function He(e){let t,n,r,o;function s(t){e[3].call(null,t)}let i={$$slots:{default:[Oe]},$$scope:{ctx:e}};void 0!==e[0].ledOn&&(i.checked=e[0].ledOn);const a=new Ae({props:i});function l(t){e[4].call(null,t)}H.push(()=>Z(a,"checked",s));let c={$$slots:{default:[ke]},$$scope:{ctx:e}};void 0!==e[0].ledFlash&&(c.checked=e[0].ledFlash);const u=new Ae({props:c});return H.push(()=>Z(u,"checked",l)),{c(){ee(a.$$.fragment),n=E(),ee(u.$$.fragment)},m(e,t){te(a,e,t),p(e,n,t),te(u,e,t),o=!0},p(e,n){const o={};512&n&&(o.$$scope={dirty:n,ctx:e}),!t&&1&n&&(t=!0,o.checked=e[0].ledOn,q(()=>t=!1)),a.$set(o);const s={};512&n&&(s.$$scope={dirty:n,ctx:e}),!r&&1&n&&(r=!0,s.checked=e[0].ledFlash,q(()=>r=!1)),u.$set(s)},i(e){o||(K(a.$$.fragment,e),K(u.$$.fragment,e),o=!0)},o(e){X(a.$$.fragment,e),X(u.$$.fragment,e),o=!1},d(e){ne(a,e),e&&h(n),ne(u,e)}}}function Oe(e){let t;return{c(){t=$("LED permanently on when powered")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function ke(e){let t;return{c(){t=$("LED flash on MIDI activity")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Le(e){let t;return{c(){t=$("Rotate controller 180ยบ")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Be(e){let t,n,o,s,i,a,l,c,u,f,m,$,v,y,S,M,I,C;return{c(){t=g("hr"),n=E(),o=g("h3"),o.textContent="I2C Leader/Follower",s=E(),i=g("select"),a=g("option"),a.textContent="Follower",c=g("option"),c.textContent="Leader",f=E(),m=g("p"),m.innerHTML="<strong>Follower</strong> mode is for use with Teletype.",$=E(),v=g("p"),v.innerHTML="<strong>Leader</strong> mode is for use with Ansible, TXo, ER-301. 16n will not respond to Teletype when in leader mode.",y=E(),S=g("p"),S.textContent="This will not take effect until you restart (disconnect/reconnect) your 16n.",M=E(),I=g("p"),I.textContent="(\"Leader\" is sometimes also referred to as 'master' mode)",a.__value=l=!1,a.value=a.__value,c.__value=u=!0,c.value=c.__value,void 0===e[0].i2cMaster&&F(()=>e[8].call(i)),b(m,"class","note svelte-idpdcv"),b(v,"class","note svelte-idpdcv"),b(S,"class","note svelte-idpdcv"),b(I,"class","note small svelte-idpdcv")},m(r,l){p(r,t,l),p(r,n,l),p(r,o,l),p(r,s,l),p(r,i,l),d(i,a),d(i,c),w(i,e[0].i2cMaster),p(r,f,l),p(r,m,l),p(r,$,l),p(r,v,l),p(r,y,l),p(r,S,l),p(r,M,l),p(r,I,l),C=[_(i,"change",e[8]),_(i,"change",e[2])]},p(e,t){1&t&&w(i,e[0].i2cMaster)},d(e){e&&h(t),e&&h(n),e&&h(o),e&&h(s),e&&h(i),e&&h(f),e&&h(m),e&&h($),e&&h(v),e&&h(y),e&&h(S),e&&h(M),e&&h(I),r(C)}}}function Fe(e){let t,n,o,s,i,a,l,c,u,f,m,$,y,S,I,w,C,x,N,A,T,D,R,G,P=e[1].device().capabilities.led,O=!1,k=!1,L=e[1].device().capabilities.i2c,B=P&&He(e);function F(t){e[5].call(null,t)}let Y={$$slots:{default:[Le]},$$scope:{ctx:e}};void 0!==e[0].controllerFlip&&(Y.checked=e[0].controllerFlip);const j=new Ae({props:Y});function V(){O=!0,e[6].call(m)}function W(){k=!0,e[7].call(C)}H.push(()=>Z(j,"checked",F));let U=L&&Be(e);return{c(){B&&B.c(),t=E(),ee(j.$$.fragment),o=E(),s=g("hr"),i=E(),a=g("h3"),a.textContent="Fader Minimum/Maximum calibration",l=E(),c=g("div"),u=g("label"),u.textContent="Fader Minimum raw value",f=E(),m=g("input"),y=E(),S=g("div"),I=g("label"),I.textContent="Fader Maximum raw value",w=E(),C=g("input"),N=E(),A=g("p"),A.innerHTML="\n  You shouldn&#39;t touch this unless you are having issues with your faders either reaching <code>127</code> before the end of their travel, or not at all.<br><br>\n  &quot;Raw&quot; analog values are read from the faders between 0 and 8192. Bring the fader maximum down until all faders smoothly travel from 0 to 127 on the debug view (bearing in mind there is a small dead zone at either end of a fader).\n",T=E(),U&&U.c(),D=v(),b(u,"class","svelte-idpdcv"),b(m,"type","number"),b(m,"min","0"),b(m,"max",$=8191),b(I,"class","svelte-idpdcv"),b(C,"type","number"),b(C,"min","0"),b(C,"max",x=8191),b(A,"class","note svelte-idpdcv")},m(n,r){B&&B.m(n,r),p(n,t,r),te(j,n,r),p(n,o,r),p(n,s,r),p(n,i,r),p(n,a,r),p(n,l,r),p(n,c,r),d(c,u),d(c,f),d(c,m),M(m,e[0].fadermin),p(n,y,r),p(n,S,r),d(S,I),d(S,w),d(S,C),M(C,e[0].fadermax),p(n,N,r),p(n,A,r),p(n,T,r),U&&U.m(n,r),p(n,D,r),R=!0,G=[_(m,"input",V),_(m,"change",e[2]),_(C,"input",W),_(C,"change",e[2])]},p(e,[r]){2&r&&(P=e[1].device().capabilities.led),P?B?(B.p(e,r),K(B,1)):(B=He(e),B.c(),K(B,1),B.m(t.parentNode,t)):B&&(z(),X(B,1,1,()=>{B=null}),Q());const o={};512&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.checked=e[0].controllerFlip,q(()=>n=!1)),j.$set(o),!O&&1&r&&M(m,e[0].fadermin),O=!1,!k&&1&r&&M(C,e[0].fadermax),k=!1,2&r&&(L=e[1].device().capabilities.i2c),L?U?U.p(e,r):(U=Be(e),U.c(),U.m(D.parentNode,D)):U&&(U.d(1),U=null)},i(e){R||(K(B),K(j.$$.fragment,e),R=!0)},o(e){X(B),X(j.$$.fragment,e),R=!1},d(e){B&&B.d(e),e&&h(t),ne(j,e),e&&h(o),e&&h(s),e&&h(i),e&&h(a),e&&h(l),e&&h(c),e&&h(y),e&&h(S),e&&h(N),e&&h(A),e&&h(T),U&&U.d(e),e&&h(D),r(G)}}}function qe(e,t,n){let r,o;return i(e,me,e=>n(0,r=e)),i(e,he,e=>n(1,o=e)),[r,o,function(){me.update(e=>r)},function(e){r.ledOn=e,me.set(r)},function(e){r.ledFlash=e,me.set(r)},function(e){r.controllerFlip=e,me.set(r)},function(){r.fadermin=y(this.value),me.set(r)},function(){r.fadermax=y(this.value),me.set(r)},function(){r.i2cMaster=C(this),me.set(r)}]}class Ye extends se{constructor(e){super(),oe(this,e,qe,Fe,s,{})}}function je(e,t,n){const r=e.slice();return r[8]=t[n],r}function Ve(e){let t,n,r,o=e[8]+"";return{c(){t=g("option"),n=$(o),t.__value=r=e[8],t.value=t.__value},m(e,r){p(e,t,r),d(t,n)},p(e,s){4&s&&o!==(o=e[8]+"")&&S(n,o),4&s&&r!==(r=e[8])&&(t.__value=r),t.value=t.__value},d(e){e&&h(t)}}}function We(t){let n,o,s,i,a,l,c,u,f,v,y,I=t[1]+1+"",C=!1,x=t[2],N=[];for(let e=0;e<x.length;e+=1)N[e]=Ve(je(t,x,e));function A(){C=!0,t[7].call(v)}return{c(){n=g("dl"),o=g("dt"),s=$(I),i=g("dt"),i.textContent="Channel",a=g("dd"),l=g("select");for(let e=0;e<N.length;e+=1)N[e].c();c=E(),u=g("dt"),u.textContent="CC",f=g("dd"),v=g("input"),b(o,"class","index svelte-6nh3sy"),b(i,"class","svelte-6nh3sy"),void 0===t[0].channel&&F(()=>t[6].call(l)),b(a,"class","svelte-6nh3sy"),b(u,"class","svelte-6nh3sy"),b(v,"type","number"),b(v,"min","1"),b(v,"max","127"),b(f,"class","svelte-6nh3sy"),b(n,"class","config-column svelte-6nh3sy")},m(e,r){p(e,n,r),d(n,o),d(o,s),d(n,i),d(n,a),d(a,l);for(let e=0;e<N.length;e+=1)N[e].m(l,null);w(l,t[0].channel),d(a,c),d(n,u),d(n,f),d(f,v),M(v,t[0].cc),y=[_(l,"change",t[6]),_(l,"change",t[3]),_(v,"input",A),_(v,"change",t[3])]},p(e,[t]){if(2&t&&I!==(I=e[1]+1+"")&&S(s,I),4&t){let n;for(x=e[2],n=0;n<x.length;n+=1){const r=je(e,x,n);N[n]?N[n].p(r,t):(N[n]=Ve(r),N[n].c(),N[n].m(l,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=x.length}1&t&&w(l,e[0].channel),!C&&1&t&&M(v,e[0].cc),C=!1},i:e,o:e,d(e){e&&h(n),m(N,e),r(y)}}}function Ue(e,t,n){let r;i(e,me,e=>n(4,r=e));let{index:o}=t,{editControl:s}=t,a=Array.from(Array(16).keys());a.forEach((e,t)=>n(2,a[t]=e+1,a));let l=Array.from(Array(128).keys());return e.$set=e=>{"index"in e&&n(1,o=e.index),"editControl"in e&&n(0,s=e.editControl)},[s,o,a,function(){me.update(e=>r)},r,l,function(){s.channel=C(this),n(0,s),n(2,a)},function(){s.cc=y(this.value),n(0,s),n(2,a)}]}class Je extends se{constructor(e){super(),oe(this,e,Ue,We,s,{index:1,editControl:0})}}function ze(e){let t,n;const r=e[12].default,o=a(r,e,e[11],null);return{c(){t=g("div"),o&&o.c()},m(e,r){p(e,t,r),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&2048&t&&o.p(l(r,e,e[11],null),c(r,e[11],t,null))},i(e){n||(K(o,e),n=!0)},o(e){X(o,e),n=!1},d(e){e&&h(t),o&&o.d(e)}}}function Qe(e,t,n){let r,o,s,a,l;function c(){ie("Setting up heartbeat"),u(),ue.addListener("connected",e=>{ge.set(fe.allInputs(ue)),$e.set(fe.allOutputs(ue)),Ee.update(e=>r),ve.update(e=>o),u()}),ue.addListener("disconnected",e=>{ge.set(fe.allInputs(ue)),$e.set(fe.allOutputs(ue)),Ee.update(e=>null),ve.update(e=>null),f(he,s=null),u()}),setInterval(()=>{u()},5e3)}function u(){if(!r&&a.length>0){let e=a.find(e=>e.name.match(/.*16n.*/));e&&Ee.update(t=>e)}if(!o&&l.length>0){let e=l.find(e=>e.name.match(/.*16n.*/));e&&ve.update(t=>e)}!s&&r&&o&&(p(r),h(r),ie("Hearbeat requesting config."),m())}function d(e){s&&(s.usbControls.forEach(t=>{t.channel==e.channel&&t.cc==e.controller.number&&(t.val=e.value)}),he.update(e=>s))}function p(e){e.addListener("controlchange","all",e=>{d(e)})}function h(e){e.addListener("sysex","all",e=>{let t=e.data;if(fe.isOxionSysex(t)){if(15==t[4]){let e=[];t.slice(5,t.length-1).forEach(t=>{e.push(t.toString(16).padStart(2,"0"))}),he.update(e=>ae.returnConfigHashFromSysex(t)),ie("Received config",s),document.getElementById("current_config")&&(document.getElementById("current_config").value=e.join(" "))}}else ie("Sysex not for us:",t)}),ie("Attached sysex listener to ",e.name)}function m(){r&&o&&(ie("Requesting config over "+o.name),ie("Hoping to receive on "+r.name),fe.requestConfig(o))}i(e,Ee,e=>n(0,r=e)),i(e,ve,e=>n(1,o=e)),i(e,he,e=>n(2,s=e)),i(e,ge,e=>n(3,a=e)),i(e,$e,e=>n(4,l=e)),ue.enable((function(e){e?ie("WebMidi could not be enabled.",e):(ie("WebMidi enabled!"),_e.update(e=>!0),c())}),!0),Ee.subscribe(e=>{e&&(a.forEach(e=>{e.removeListener()}),p(e),h(e),he.update(e=>null),m())}),ve.subscribe(e=>{e&&(he.update(e=>null),m())});let{$$slots:g={},$$scope:$}=t;return e.$set=e=>{"$$scope"in e&&n(11,$=e.$$scope)},[r,o,s,a,l,c,u,d,p,h,m,$,g]}class Ke extends se{constructor(e){super(),oe(this,e,Qe,ze,s,{})}}function Xe(t){let n;return{c(){n=$(t[0])},m(e,t){p(e,n,t)},p(e,t){1&t&&S(n,e[0])},i:e,o:e,d(e){e&&h(n)}}}function Ze(e){let t;const n=e[3].default,r=a(n,e,e[2],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){r&&r.p&&4&t&&r.p(l(n,e,e[2],null),c(n,e[2],t,null))},i(e){t||(K(r,e),t=!0)},o(e){X(r,e),t=!1},d(e){r&&r.d(e)}}}function et(e){let t,n,r,o;const s=[Ze,Xe],i=[];function a(e,t){return e[1]?0:e[0]?1:-1}return~(t=a(e))&&(n=i[t]=s[t](e)),{c(){n&&n.c(),r=v()},m(e,n){~t&&i[t].m(e,n),p(e,r,n),o=!0},p(e,[o]){let l=t;t=a(e),t===l?~t&&i[t].p(e,o):(n&&(z(),X(i[l],1,1,()=>{i[l]=null}),Q()),~t?(n=i[t],n||(n=i[t]=s[t](e),n.c()),K(n,1),n.m(r.parentNode,r)):n=null)},i(e){o||(K(n),o=!0)},o(e){X(n),o=!1},d(e){~t&&i[t].d(e),e&&h(r)}}}function tt(e,t,n){let r;i(e,_e,e=>n(1,r=e));let{fallback:o=null}=t,{$$slots:s={},$$scope:a}=t;return e.$set=e=>{"fallback"in e&&n(0,o=e.fallback),"$$scope"in e&&n(2,a=e.$$scope)},[o,r,a,s]}class nt extends se{constructor(e){super(),oe(this,e,tt,et,s,{fallback:0})}}function rt(e){let t,n,r,o,s,i;const u=e[2].default,f=a(u,e,e[1],null);return{c(){t=g("div"),n=g("h2"),r=$(e[0]),o=E(),s=g("div"),f&&f.c(),b(n,"class","svelte-1o2kpty"),b(s,"class","details svelte-1o2kpty"),b(t,"class","subhead svelte-1o2kpty")},m(e,a){p(e,t,a),d(t,n),d(n,r),d(t,o),d(t,s),f&&f.m(s,null),i=!0},p(e,[t]){(!i||1&t)&&S(r,e[0]),f&&f.p&&2&t&&f.p(l(u,e,e[1],null),c(u,e[1],t,null))},i(e){i||(K(f,e),i=!0)},o(e){X(f,e),i=!1},d(e){e&&h(t),f&&f.d(e)}}}function ot(e,t,n){let{title:r}=t,{$$slots:o={},$$scope:s}=t;return e.$set=e=>{"title"in e&&n(0,r=e.title),"$$scope"in e&&n(1,s=e.$$scope)},[r,s,o]}class st extends se{constructor(e){super(),oe(this,e,ot,rt,s,{title:0})}}function it(e){let t,n;const r=e[5].default,o=a(r,e,e[4],null);return{c(){t=g("div"),o&&o.c(),b(t,"class","tabs")},m(e,r){p(e,t,r),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&16&t&&o.p(l(r,e,e[4],null),c(r,e[4],t,null))},i(e){n||(K(o,e),n=!0)},o(e){X(o,e),n=!1},d(e){e&&h(t),o&&o.d(e)}}}const at={};function lt(e,t,n){const r=[],o=[],s=pe(null),i=pe(null);var a,l;a=at,l={registerTab:e=>{r.push(e),s.update(t=>t||e),D(()=>{const t=r.indexOf(e);r.splice(t,1),s.update(n=>n===e?r[t]||r[r.length-1]:n)})},registerPanel:e=>{o.push(e),i.update(t=>t||e),D(()=>{const t=o.indexOf(e);o.splice(t,1),i.update(n=>n===e?o[t]||o[o.length-1]:n)})},selectTab:e=>{const t=r.indexOf(e);s.set(e),i.set(o[t])},selectedTab:s,selectedPanel:i},T().$$.context.set(a,l);let{$$slots:c={},$$scope:u}=t;return e.$set=e=>{"$$scope"in e&&n(4,u=e.$$scope)},[r,o,s,i,u,c]}class ct extends se{constructor(e){super(),oe(this,e,lt,it,s,{})}}function ut(e){let t,n;const r=e[1].default,o=a(r,e,e[0],null);return{c(){t=g("div"),o&&o.c(),b(t,"class","tab-list svelte-w6hq5a")},m(e,r){p(e,t,r),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&1&t&&o.p(l(r,e,e[0],null),c(r,e[0],t,null))},i(e){n||(K(o,e),n=!0)},o(e){X(o,e),n=!1},d(e){e&&h(t),o&&o.d(e)}}}function ft(e,t,n){let{$$slots:r={},$$scope:o}=t;return e.$set=e=>{"$$scope"in e&&n(0,o=e.$$scope)},[o,r]}class dt extends se{constructor(e){super(),oe(this,e,ft,ut,s,{})}}function pt(e){let t;const n=e[5].default,r=a(n,e,e[4],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){r&&r.p&&16&t&&r.p(l(n,e,e[4],null),c(n,e[4],t,null))},i(e){t||(K(r,e),t=!0)},o(e){X(r,e),t=!1},d(e){r&&r.d(e)}}}function ht(e){let t,n,r=e[0]===e[1]&&pt(e);return{c(){r&&r.c(),t=v()},m(e,o){r&&r.m(e,o),p(e,t,o),n=!0},p(e,[n]){e[0]===e[1]?r?(r.p(e,n),K(r,1)):(r=pt(e),r.c(),K(r,1),r.m(t.parentNode,t)):r&&(z(),X(r,1,1,()=>{r=null}),Q())},i(e){n||(K(r),n=!0)},o(e){X(r),n=!1},d(e){r&&r.d(e),e&&h(t)}}}function mt(e,t,n){let r;const o={},{registerPanel:s,selectedPanel:a}=G(at);i(e,a,e=>n(0,r=e)),s(o);let{$$slots:l={},$$scope:c}=t;return e.$set=e=>{"$$scope"in e&&n(4,c=e.$$scope)},[r,o,a,s,c,l]}class gt extends se{constructor(e){super(),oe(this,e,mt,ht,s,{})}}function $t(e){let t,n,r;const o=e[6].default,s=a(o,e,e[5],null);return{c(){t=g("button"),s&&s.c(),b(t,"class","svelte-1y3smnx"),x(t,"selected",e[0]===e[1])},m(o,i){p(o,t,i),s&&s.m(t,null),n=!0,r=_(t,"click",e[7])},p(e,[n]){s&&s.p&&32&n&&s.p(l(o,e,e[5],null),c(o,e[5],n,null)),3&n&&x(t,"selected",e[0]===e[1])},i(e){n||(K(s,e),n=!0)},o(e){X(s,e),n=!1},d(e){e&&h(t),s&&s.d(e),r()}}}function Et(e,t,n){let r;const o={},{registerTab:s,selectTab:a,selectedTab:l}=G(at);i(e,l,e=>n(0,r=e)),s(o);let{$$slots:c={},$$scope:u}=t;return e.$set=e=>{"$$scope"in e&&n(5,u=e.$$scope)},[r,o,a,l,s,u,c,()=>a(o)]}class vt extends se{constructor(e){super(),oe(this,e,Et,$t,s,{})}}function _t(e,t,n){const r=e.slice();return r[12]=t[n],r[10]=n,r}function bt(e,t,n){const r=e.slice();return r[12]=t[n],r[10]=n,r}function yt(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function St(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Mt(t){let n;return{c(){n=g("p"),n.textContent="No device conncected.",b(n,"class","device svelte-tmq3hb")},m(e,t){p(e,n,t)},p:e,d(e){e&&h(n)}}}function It(e){let t,n,r,o,s,i,a,l=e[2].device().name+"",c=e[2].firmwareVersion+"";return{c(){t=g("p"),n=$("Connected: "),r=g("strong"),o=$(l),s=$(" running firmware "),i=g("strong"),a=$(c),b(t,"class","device svelte-tmq3hb")},m(e,l){p(e,t,l),d(t,n),d(t,r),d(r,o),d(t,s),d(t,i),d(i,a)},p(e,t){4&t&&l!==(l=e[2].device().name+"")&&S(o,l),4&t&&c!==(c=e[2].firmwareVersion+"")&&S(a,c)},d(e){e&&h(t)}}}function wt(e){let t;function n(e,t){return e[2]?It:Mt}let r=n(e),o=r(e);return{c(){t=g("div"),o.c(),b(t,"class","details svelte-tmq3hb")},m(e,n){p(e,t,n),o.m(t,null)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t,null)))},d(e){e&&h(t),o.d()}}}function Ct(t){let n;return{c(){n=g("p"),n.textContent="Connect a controller via USB."},m(e,t){p(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function xt(e){let t,n,r,o,s;const i=[At,Nt],a=[];function l(e,t){return e[0]?0:1}return t=l(e),n=a[t]=i[t](e),{c(){n.c(),r=E(),o=g("p")},m(e,n){a[t].m(e,n),p(e,r,n),p(e,o,n),s=!0},p(e,o){let s=t;t=l(e),t===s?a[t].p(e,o):(z(),X(a[s],1,1,()=>{a[s]=null}),Q(),n=a[t],n||(n=a[t]=i[t](e),n.c()),K(n,1),n.m(r.parentNode,r))},i(e){s||(K(n),s=!0)},o(e){X(n),s=!1},d(e){a[t].d(e),e&&h(r),e&&h(o)}}}function Nt(e){let t,n;const r=new st({props:{title:"Current Configuration",$$slots:{default:[Tt]},$$scope:{ctx:e}}}),o=new ct({props:{$$slots:{default:[Ft]},$$scope:{ctx:e}}});return{c(){ee(r.$$.fragment),t=E(),ee(o.$$.fragment)},m(e,s){te(r,e,s),p(e,t,s),te(o,e,s),n=!0},p(e,t){const n={};32768&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const s={};32772&t&&(s.$$scope={dirty:t,ctx:e}),o.$set(s)},i(e){n||(K(r.$$.fragment,e),K(o.$$.fragment,e),n=!0)},o(e){X(r.$$.fragment,e),X(o.$$.fragment,e),n=!1},d(e){ne(r,e),e&&h(t),ne(o,e)}}}function At(e){let t,n;const r=new st({props:{title:"Edit Configuration",$$slots:{default:[qt]},$$scope:{ctx:e}}}),o=new ct({props:{$$slots:{default:[en]},$$scope:{ctx:e}}});return{c(){ee(r.$$.fragment),t=E(),ee(o.$$.fragment)},m(e,s){te(r,e,s),p(e,t,s),te(o,e,s),n=!0},p(e,t){const n={};32770&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const s={};32780&t&&(s.$$scope={dirty:t,ctx:e}),o.$set(s)},i(e){n||(K(r.$$.fragment,e),K(o.$$.fragment,e),n=!0)},o(e){X(r.$$.fragment,e),X(o.$$.fragment,e),n=!1},d(e){ne(r,e),e&&h(t),ne(o,e)}}}function Tt(t){let n,r;const o=new Ce({props:{label:"Export current config",icon:"file-export",clickMessageName:"exportConfig"}});o.$on("message",t[4]);const s=new Ce({props:{label:"Edit Config",icon:"pencil-alt",clickMessageName:"toggleEditMode"}});return s.$on("message",t[4]),{c(){ee(o.$$.fragment),n=E(),ee(s.$$.fragment)},m(e,t){te(o,e,t),p(e,n,t),te(s,e,t),r=!0},p:e,i(e){r||(K(o.$$.fragment,e),K(s.$$.fragment,e),r=!0)},o(e){X(o.$$.fragment,e),X(s.$$.fragment,e),r=!1},d(e){ne(o,e),e&&h(n),ne(s,e)}}}function Dt(e){let t;return{c(){t=$("USB")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Rt(e){let t;return{c(){t=$("TRS Jack")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Gt(e){let t,n;const r=new vt({props:{$$slots:{default:[Dt]},$$scope:{ctx:e}}}),o=new vt({props:{$$slots:{default:[Rt]},$$scope:{ctx:e}}});return{c(){ee(r.$$.fragment),t=E(),ee(o.$$.fragment)},m(e,s){te(r,e,s),p(e,t,s),te(o,e,s),n=!0},p(e,t){const n={};32768&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const s={};32768&t&&(s.$$scope={dirty:t,ctx:e}),o.$set(s)},i(e){n||(K(r.$$.fragment,e),K(o.$$.fragment,e),n=!0)},o(e){X(r.$$.fragment,e),X(o.$$.fragment,e),n=!1},d(e){ne(r,e),e&&h(t),ne(o,e)}}}function Pt(e){let t;const n=new Pe({props:{control:e[12],index:e[10]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};4&t&&(r.control=e[12]),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function Ht(e){let t,n,r=e[10]<e[2].device().controlCount,o=r&&Pt(e);return{c(){o&&o.c(),t=v()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){4&n&&(r=e[10]<e[2].device().controlCount),r?o?(o.p(e,n),K(o,1)):(o=Pt(e),o.c(),K(o,1),o.m(t.parentNode,t)):o&&(z(),X(o,1,1,()=>{o=null}),Q())},i(e){n||(K(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function Ot(e){let t,n,r=e[2].usbControls,o=[];for(let t=0;t<r.length;t+=1)o[t]=Ht(bt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();b(t,"id","controls"),b(t,"class","svelte-tmq3hb")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(4&n){let i;for(r=e[2].usbControls,i=0;i<r.length;i+=1){const s=bt(e,r,i);o[i]?(o[i].p(s,n),K(o[i],1)):(o[i]=Ht(s),o[i].c(),K(o[i],1),o[i].m(t,null))}for(z(),i=r.length;i<o.length;i+=1)s(i);Q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)K(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function kt(e){let t;const n=new Pe({props:{control:e[12],index:e[10],disableValue:!0}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};4&t&&(r.control=e[12]),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function Lt(e){let t,n,r=e[10]<e[2].device().controlCount,o=r&&kt(e);return{c(){o&&o.c(),t=v()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){4&n&&(r=e[10]<e[2].device().controlCount),r?o?(o.p(e,n),K(o,1)):(o=kt(e),o.c(),K(o,1),o.m(t.parentNode,t)):o&&(z(),X(o,1,1,()=>{o=null}),Q())},i(e){n||(K(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function Bt(e){let t,n,r,o,s=e[2].trsControls,i=[];for(let t=0;t<s.length;t+=1)i[t]=Lt(_t(e,s,t));const a=e=>X(i[e],1,1,()=>{i[e]=null});return{c(){t=g("div");for(let e=0;e<i.length;e+=1)i[e].c();n=E(),r=g("p"),r.textContent="There is no realtime preview of the TRS outputs.",b(t,"id","controls"),b(t,"class","svelte-tmq3hb")},m(e,s){p(e,t,s);for(let e=0;e<i.length;e+=1)i[e].m(t,null);p(e,n,s),p(e,r,s),o=!0},p(e,n){if(4&n){let r;for(s=e[2].trsControls,r=0;r<s.length;r+=1){const o=_t(e,s,r);i[r]?(i[r].p(o,n),K(i[r],1)):(i[r]=Lt(o),i[r].c(),K(i[r],1),i[r].m(t,null))}for(z(),r=s.length;r<i.length;r+=1)a(r);Q()}},i(e){if(!o){for(let e=0;e<s.length;e+=1)K(i[e]);o=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)X(i[e]);o=!1},d(e){e&&h(t),m(i,e),e&&h(n),e&&h(r)}}}function Ft(e){let t,n,r;const o=new dt({props:{$$slots:{default:[Gt]},$$scope:{ctx:e}}}),s=new gt({props:{$$slots:{default:[Ot]},$$scope:{ctx:e}}}),i=new gt({props:{$$slots:{default:[Bt]},$$scope:{ctx:e}}});return{c(){ee(o.$$.fragment),t=E(),ee(s.$$.fragment),n=E(),ee(i.$$.fragment)},m(e,a){te(o,e,a),p(e,t,a),te(s,e,a),p(e,n,a),te(i,e,a),r=!0},p(e,t){const n={};32768&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const r={};32772&t&&(r.$$scope={dirty:t,ctx:e}),s.$set(r);const a={};32772&t&&(a.$$scope={dirty:t,ctx:e}),i.$set(a)},i(e){r||(K(o.$$.fragment,e),K(s.$$.fragment,e),K(i.$$.fragment,e),r=!0)},o(e){X(o.$$.fragment,e),X(s.$$.fragment,e),X(i.$$.fragment,e),r=!1},d(e){ne(o,e),e&&h(t),ne(s,e),e&&h(n),ne(i,e)}}}function qt(e){let t,n,r;const o=new Ce({props:{label:"Cancel",icon:"times",clickMessageName:"toggleEditMode"}});o.$on("message",e[4]);const s=new Ce({props:{label:"Import config",icon:"file-import",clickMessageName:"importConfig"}});s.$on("message",e[4]);const i=new Ce({props:{label:"Update controller",icon:"download",clickMessageName:"transmitConfig",disabled:!e[1]}});return i.$on("message",e[4]),{c(){ee(o.$$.fragment),t=E(),ee(s.$$.fragment),n=E(),ee(i.$$.fragment)},m(e,a){te(o,e,a),p(e,t,a),te(s,e,a),p(e,n,a),te(i,e,a),r=!0},p(e,t){const n={};2&t&&(n.disabled=!e[1]),i.$set(n)},i(e){r||(K(o.$$.fragment,e),K(s.$$.fragment,e),K(i.$$.fragment,e),r=!0)},o(e){X(o.$$.fragment,e),X(s.$$.fragment,e),X(i.$$.fragment,e),r=!1},d(e){ne(o,e),e&&h(t),ne(s,e),e&&h(n),ne(i,e)}}}function Yt(e){let t;return{c(){t=$("USB")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function jt(e){let t;return{c(){t=$("TRS Jack")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Vt(e){let t;return{c(){t=$("Device Options")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Wt(e){let t,n,r;const o=new vt({props:{$$slots:{default:[Yt]},$$scope:{ctx:e}}}),s=new vt({props:{$$slots:{default:[jt]},$$scope:{ctx:e}}}),i=new vt({props:{$$slots:{default:[Vt]},$$scope:{ctx:e}}});return{c(){ee(o.$$.fragment),t=E(),ee(s.$$.fragment),n=E(),ee(i.$$.fragment)},m(e,a){te(o,e,a),p(e,t,a),te(s,e,a),p(e,n,a),te(i,e,a),r=!0},p(e,t){const n={};32768&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const r={};32768&t&&(r.$$scope={dirty:t,ctx:e}),s.$set(r);const a={};32768&t&&(a.$$scope={dirty:t,ctx:e}),i.$set(a)},i(e){r||(K(o.$$.fragment,e),K(s.$$.fragment,e),K(i.$$.fragment,e),r=!0)},o(e){X(o.$$.fragment,e),X(s.$$.fragment,e),X(i.$$.fragment,e),r=!1},d(e){ne(o,e),e&&h(t),ne(s,e),e&&h(n),ne(i,e)}}}function Ut(e){let t;const n=new Je({props:{editControl:e[8],index:e[10]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.editControl=e[8]),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function Jt(e){let t,n,r=e[10]<e[2].device().controlCount,o=r&&Ut(e);return{c(){o&&o.c(),t=v()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){4&n&&(r=e[10]<e[2].device().controlCount),r?o?(o.p(e,n),K(o,1)):(o=Ut(e),o.c(),K(o,1),o.m(t.parentNode,t)):o&&(z(),X(o,1,1,()=>{o=null}),Q())},i(e){n||(K(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function zt(e){let t,n,r=e[3].usbControls,o=[];for(let t=0;t<r.length;t+=1)o[t]=Jt(St(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();b(t,"id","controls"),b(t,"class","svelte-tmq3hb")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(12&n){let i;for(r=e[3].usbControls,i=0;i<r.length;i+=1){const s=St(e,r,i);o[i]?(o[i].p(s,n),K(o[i],1)):(o[i]=Jt(s),o[i].c(),K(o[i],1),o[i].m(t,null))}for(z(),i=r.length;i<o.length;i+=1)s(i);Q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)K(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function Qt(e){let t;const n=new Je({props:{editControl:e[8],index:e[10]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.editControl=e[8]),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function Kt(e){let t,n,r=e[10]<e[2].device().controlCount,o=r&&Qt(e);return{c(){o&&o.c(),t=v()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){4&n&&(r=e[10]<e[2].device().controlCount),r?o?(o.p(e,n),K(o,1)):(o=Qt(e),o.c(),K(o,1),o.m(t.parentNode,t)):o&&(z(),X(o,1,1,()=>{o=null}),Q())},i(e){n||(K(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function Xt(e){let t,n,r=e[3].trsControls,o=[];for(let t=0;t<r.length;t+=1)o[t]=Kt(yt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();b(t,"id","controls"),b(t,"class","svelte-tmq3hb")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(12&n){let i;for(r=e[3].trsControls,i=0;i<r.length;i+=1){const s=yt(e,r,i);o[i]?(o[i].p(s,n),K(o[i],1)):(o[i]=Kt(s),o[i].c(),K(o[i],1),o[i].m(t,null))}for(z(),i=r.length;i<o.length;i+=1)s(i);Q()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)K(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function Zt(e){let t;const n=new Ye({});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function en(e){let t,n,r,o;const s=new dt({props:{$$slots:{default:[Wt]},$$scope:{ctx:e}}}),i=new gt({props:{$$slots:{default:[zt]},$$scope:{ctx:e}}}),a=new gt({props:{$$slots:{default:[Xt]},$$scope:{ctx:e}}}),l=new gt({props:{$$slots:{default:[Zt]},$$scope:{ctx:e}}});return{c(){ee(s.$$.fragment),t=E(),ee(i.$$.fragment),n=E(),ee(a.$$.fragment),r=E(),ee(l.$$.fragment)},m(e,c){te(s,e,c),p(e,t,c),te(i,e,c),p(e,n,c),te(a,e,c),p(e,r,c),te(l,e,c),o=!0},p(e,t){const n={};32768&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);const r={};32780&t&&(r.$$scope={dirty:t,ctx:e}),i.$set(r);const o={};32780&t&&(o.$$scope={dirty:t,ctx:e}),a.$set(o);const c={};32768&t&&(c.$$scope={dirty:t,ctx:e}),l.$set(c)},i(e){o||(K(s.$$.fragment,e),K(i.$$.fragment,e),K(a.$$.fragment,e),K(l.$$.fragment,e),o=!0)},o(e){X(s.$$.fragment,e),X(i.$$.fragment,e),X(a.$$.fragment,e),X(l.$$.fragment,e),o=!1},d(e){ne(s,e),e&&h(t),ne(i,e),e&&h(n),ne(a,e),e&&h(r),ne(l,e)}}}function tn(e){let t,n,r,o;const s=[xt,Ct],i=[];function a(e,t){return e[2]?0:1}return t=a(e),n=i[t]=s[t](e),{c(){n.c(),r=v()},m(e,n){i[t].m(e,n),p(e,r,n),o=!0},p(e,o){let l=t;t=a(e),t===l?i[t].p(e,o):(z(),X(i[l],1,1,()=>{i[l]=null}),Q(),n=i[t],n||(n=i[t]=s[t](e),n.c()),K(n,1),n.m(r.parentNode,r))},i(e){o||(K(n),o=!0)},o(e){X(n),o=!1},d(e){i[t].d(e),e&&h(r)}}}function nn(e){let t,n,r,o,s,i;const a=new nt({props:{$$slots:{default:[wt]},$$scope:{ctx:e}}}),l=new nt({props:{fallback:"WebMIDI could not be enabled. Please use a web browser that supports WebMIDI, such as Google Chrome.",$$slots:{default:[tn]},$$scope:{ctx:e}}});return{c(){t=g("main"),n=g("div"),r=g("h1"),r.textContent="16n configuration tool",o=E(),ee(a.$$.fragment),s=E(),ee(l.$$.fragment),b(r,"class","svelte-tmq3hb"),b(n,"id","head"),b(n,"class","svelte-tmq3hb"),b(t,"class","svelte-tmq3hb")},m(e,c){p(e,t,c),d(t,n),d(n,r),d(n,o),te(a,n,null),d(t,s),te(l,t,null),i=!0},p(e,t){const n={};32772&t&&(n.$$scope={dirty:t,ctx:e}),a.$set(n);const r={};32783&t&&(r.$$scope={dirty:t,ctx:e}),l.$set(r)},i(e){i||(K(a.$$.fragment,e),K(l.$$.fragment,e),i=!0)},o(e){X(a.$$.fragment,e),X(l.$$.fragment,e),i=!1},d(e){e&&h(t),ne(a),ne(l)}}}function rn(e){let t;const n=new Ke({props:{$$slots:{default:[nn]},$$scope:{ctx:e}}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,[t]){const r={};32783&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function on(e,t,n){let r,o,s;i(e,he,e=>n(2,r=e)),i(e,ve,e=>n(5,o=e)),i(e,me,e=>n(3,s=e));let a=!1,l=!1;return me.subscribe(e=>{e&&r&&n(1,l=!e.isEquivalent(r))}),[a,l,r,s,function(e){switch(e.detail.name){case"toggleEditMode":!function(){if(n(0,a=!a),a){let e=ae.clone(r);me.update(t=>e)}}();break;case"transmitConfig":!function(){let e=s.toSysexArray();ie("Sending sysex:",e),fe.sendConfig(e,o),f(he,r=s),n(0,a=!a)}();break;case"requestConfig":fe.requestConfig(o);break;case"importConfig":le.import(s,r,me);break;case"exportConfig":le.export(r)}}]}return new class extends se{constructor(e){super(),oe(this,e,on,rn,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
