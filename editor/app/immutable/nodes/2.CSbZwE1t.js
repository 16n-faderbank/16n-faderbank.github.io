import{f as F,a as R,c as fe,t as ee}from"../chunks/oeoWt5f_.js";import{w as Nr,a as wr,o as is}from"../chunks/nRz6v4Js.js";import{aK as We,aL as Tn,aM as as,G as tt,h as ue,a4 as os,a as rt,C as ls,b as cs,n as H,R as us,D as ds,H as fs,F as yr,I as nt,f as He,a5 as hs,aE as ms,ap as Sr,c as we,e as Zt,s as ps,aC as or,af as er,K as Es,aN as vs,aO as gs,aP as bs,aQ as Se,r as On,p as Ln,aR as st,a6 as _s,aB as Ns,d as ws,aS as lr,a7 as ys,aT as $n,aU as Ss,aV as Rs,L as Is,aW as Cs,aX as As,ai as Ms,aY as Ts,aZ as Os,j as cr,ag as Dn,aI as Ls,N as Ae,S as xn,x as de,v as he,z as k,B as D,A as U,y as me,i as ur,w as X,aH as tr,aJ as ge,aq as J,o as $s,a_ as Ds,J as Pn,a$ as Un}from"../chunks/BMBdryiS.js";import{d as dr,s as Ee,e as Rr}from"../chunks/YvS_kjnO.js";import{p as Ie,i as W,s as Bn,a as kn}from"../chunks/CwhNYe84.js";import{s as Ce}from"../chunks/Dd_ejtv8.js";import{i as Gn}from"../chunks/BAeA32VS.js";const xs=[];function rr(n,e=!1,t=!1){return ze(n,new Map,"",xs,null,t)}function ze(n,e,t,r,s=null,i=!1){if(typeof n=="object"&&n!==null){var o=e.get(n);if(o!==void 0)return o;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(We(n)){var u=Array(n.length);e.set(n,u),s!==null&&e.set(s,u);for(var c=0;c<n.length;c+=1){var l=n[c];c in n&&(u[c]=ze(l,e,t,r,null,i))}return u}if(Tn(n)===as){u={},e.set(n,u),s!==null&&e.set(s,u);for(var a in n)u[a]=ze(n[a],e,t,r,null,i);return u}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function"&&!i)return ze(n.toJSON(),e,t,r,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}function Ue(n,e){return e}function Ps(n,e,t){for(var r=[],s=e.length,i,o=e.length,u=0;u<s;u++){let d=e[u];Ln(d,()=>{if(i){if(i.pending.delete(d),i.done.add(d),i.pending.size===0){var f=n.outrogroups;nr(or(i.done)),f.delete(i),f.size===0&&(n.outrogroups=null)}}else o-=1},!1)}if(o===0){var c=r.length===0&&t!==null;if(c){var l=t,a=l.parentNode;Ns(a),a.append(l),n.items.clear()}nr(e,!c)}else i={pending:new Set(e),done:new Set},(n.outrogroups??(n.outrogroups=new Set)).add(i)}function nr(n,e=!0){for(var t=0;t<n.length;t++)ws(n[t],e)}var Ir;function Be(n,e,t,r,s,i=null){var o=n,u=new Map;{var c=n;o=ue?tt(os(c)):c.appendChild(rt())}ue&&ls();var l=null,a=us(()=>{var w=t();return We(w)?w:w==null?[]:or(w)}),d,f=!0;function _(){h.fallback=l,Us(h,d,o,e,r),l!==null&&(d.length===0?(l.f&Se)===0?On(l):(l.f^=Se,xe(l,null,o)):Ln(l,()=>{l=null}))}var g=cs(()=>{d=H(a);var w=d.length;let v=!1;if(ue){var A=ds(o)===fs;A!==(w===0)&&(o=yr(),tt(o),nt(!1),v=!0)}for(var E=new Set,b=we,N=ps(),L=0;L<w;L+=1){ue&&He.nodeType===hs&&He.data===ms&&(o=He,v=!0,nt(!1));var T=d[L],M=r(T,L),G=f?null:u.get(M);G?(G.v&&Sr(G.v,T),G.i&&Sr(G.i,L),N&&b.skipped_effects.delete(G.e)):(G=Bs(u,f?o:Ir??(Ir=rt()),T,M,L,s,e,t),f||(G.e.f|=Se),u.set(M,G)),E.add(M)}if(w===0&&i&&!l&&(f?l=Zt(()=>i(o)):(l=Zt(()=>i(Ir??(Ir=rt()))),l.f|=Se)),ue&&w>0&&tt(yr()),!f)if(N){for(const[te,Z]of u)E.has(te)||b.skipped_effects.add(Z.e);b.oncommit(_),b.ondiscard(()=>{})}else _();v&&nt(!0),H(a)}),h={effect:g,items:u,outrogroups:null,fallback:l};f=!1,ue&&(o=He)}function Us(n,e,t,r,s){var M;var i=e.length,o=n.items,u=n.effect.first,c,l=null,a=[],d=[],f,_,g,h;for(h=0;h<i;h+=1){if(f=e[h],_=s(f,h),g=o.get(_).e,n.outrogroups!==null)for(const G of n.outrogroups)G.pending.delete(g),G.done.delete(g);if((g.f&Se)!==0)if(g.f^=Se,g===u)xe(g,null,t);else{var w=l?l.next:u;g===n.effect.last&&(n.effect.last=g.prev),g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),ye(n,l,g),ye(n,g,w),xe(g,w,t),l=g,a=[],d=[],u=l.next;continue}if((g.f&st)!==0&&On(g),g!==u){if(c!==void 0&&c.has(g)){if(a.length<d.length){var v=d[0],A;l=v.prev;var E=a[0],b=a[a.length-1];for(A=0;A<a.length;A+=1)xe(a[A],v,t);for(A=0;A<d.length;A+=1)c.delete(d[A]);ye(n,E.prev,b.next),ye(n,l,E),ye(n,b,v),u=v,l=b,h-=1,a=[],d=[]}else c.delete(g),xe(g,u,t),ye(n,g.prev,g.next),ye(n,g,l===null?n.effect.first:l.next),ye(n,l,g),l=g;continue}for(a=[],d=[];u!==null&&u!==g;)(c??(c=new Set)).add(u),d.push(u),u=u.next;if(u===null)continue}(g.f&Se)===0&&a.push(g),l=g,u=g.next}if(n.outrogroups!==null){for(const G of n.outrogroups)G.pending.size===0&&(nr(or(G.done)),(M=n.outrogroups)==null||M.delete(G));n.outrogroups.size===0&&(n.outrogroups=null)}if(u!==null||c!==void 0){var N=[];if(c!==void 0)for(g of c)(g.f&st)===0&&N.push(g);for(;u!==null;)(u.f&st)===0&&u!==n.fallback&&N.push(u),u=u.next;var L=N.length;if(L>0){var T=i===0?t:null;Ps(n,N,T)}}}function Bs(n,e,t,r,s,i,o,u){var c=(o&gs)!==0?(o&bs)===0?Es(t,!1,!1):er(t):null,l=(o&vs)!==0?er(s):null;return{v:c,i:l,e:Zt(()=>(i(e,c??t,l??s,u),()=>{n.delete(r)}))}}function xe(n,e,t){if(n.nodes)for(var r=n.nodes.start,s=n.nodes.end,i=e&&(e.f&Se)===0?e.nodes.start:t;r!==null;){var o=_s(r);if(i.before(r),r===s)return;r=o}}function ye(n,e,t){e===null?n.effect.first=t:e.next=t,t===null?n.effect.last=e:t.prev=e}function Fn(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Fn(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ks(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Fn(n))&&(r&&(r+=" "),r+=e);return r}function Gs(n){return typeof n=="object"?ks(n):n??""}const Cr=[...` 	
\r\fÂ \v\uFEFF`];function Fs(n,e,t){var r=n==null?"":""+n;if(e&&(r=r?r+" "+e:e),t){for(var s in t)if(t[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,o=0;(o=r.indexOf(s,o))>=0;){var u=o+i;(o===0||Cr.includes(r[o-1]))&&(u===r.length||Cr.includes(r[u]))?r=(o===0?"":r.substring(0,o))+r.substring(u+1):o=u}}return r===""?null:r}function Hs(n,e){return n==null?null:String(n)}function fr(n,e,t,r,s,i){var o=n.__className;if(ue||o!==t||o===void 0){var u=Fs(t,r,i);(!ue||u!==n.getAttribute("class"))&&(u==null?n.removeAttribute("class"):n.className=u),n.__className=t}else if(i&&s!==i)for(var c in i){var l=!!i[c];(s==null||l!==!!s[c])&&n.classList.toggle(c,l)}return i}function Vs(n,e,t,r){var s=n.__style;if(ue||s!==e){var i=Hs(e);(!ue||i!==n.getAttribute("style"))&&(i==null?n.removeAttribute("style"):n.style.cssText=i),n.__style=e}return r}function Hn(n,e,t=!1){if(n.multiple){if(e==null)return;if(!We(e))return Ss();for(var r of n.options)r.selected=e.includes(Pe(r));return}for(r of n.options){var s=Pe(r);if(Rs(s,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function qs(n){var e=new MutationObserver(()=>{Hn(n,n.__value)});e.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Is(()=>{e.disconnect()})}function Vn(n,e,t=e){var r=new WeakSet,s=!0;lr(n,"change",i=>{var o=i?"[selected]":":checked",u;if(n.multiple)u=[].map.call(n.querySelectorAll(o),Pe);else{var c=n.querySelector(o)??n.querySelector("option:not([disabled])");u=c&&Pe(c)}t(u),we!==null&&r.add(we)}),ys(()=>{var i=e();if(n===document.activeElement){var o=$n??we;if(r.has(o))return}if(Hn(n,i,s),s&&i===void 0){var u=n.querySelector(":checked");u!==null&&(i=Pe(u),t(i))}n.__value=i,s=!1}),qs(n)}function Pe(n){return"__value"in n?n.__value:n.value}const js=Symbol("is custom element"),zs=Symbol("is html");function ke(n){if(ue){var e=!1,t=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var r=n.value;Le(n,"value",null),n.value=r}if(n.hasAttribute("checked")){var s=n.checked;Le(n,"checked",null),n.checked=s}}};n.__on_r=t,Ms(t),Ts()}}function Le(n,e,t,r){var s=Ys(n);ue&&(s[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||s[e]!==(s[e]=t)&&(e==="loading"&&(n[Os]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Xs(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Ys(n){return n.__attributes??(n.__attributes={[js]:n.nodeName.includes("-"),[zs]:n.namespaceURI===Cs})}var Ar=new Map;function Xs(n){var e=n.getAttribute("is")||n.nodeName,t=Ar.get(e);if(t)return t;Ar.set(e,t=[]);for(var r,s=n,i=Element.prototype;i!==s;){r=As(s);for(var o in r)r[o].set&&t.push(o);s=Tn(s)}return t}function sr(n,e,t=e){var r=new WeakSet;lr(n,"input",async s=>{var i=s?n.defaultValue:n.value;if(i=it(n)?at(i):i,t(i),we!==null&&r.add(we),await Ls(),i!==(i=e())){var o=n.selectionStart,u=n.selectionEnd,c=n.value.length;if(n.value=i??"",u!==null){var l=n.value.length;o===u&&u===c&&l>c?(n.selectionStart=l,n.selectionEnd=l):(n.selectionStart=o,n.selectionEnd=Math.min(u,l))}}}),(ue&&n.defaultValue!==n.value||cr(e)==null&&n.value)&&(t(it(n)?at(n.value):n.value),we!==null&&r.add(we)),Dn(()=>{var s=e();if(n===document.activeElement){var i=$n??we;if(r.has(i))return}it(n)&&s===at(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}function qn(n,e,t=e){lr(n,"change",r=>{var s=r?n.defaultChecked:n.checked;t(s)}),(ue&&n.defaultChecked!==n.checked||cr(e)==null)&&t(n.checked),Dn(()=>{var r=e();n.checked=!!r})}function it(n){var e=n.type;return e==="number"||e==="range"}function at(n){return n===""?null:+n}function Ws(n){var e=er(0);return function(){return arguments.length===1?(Ae(e,H(e)+1),arguments[0]):(H(e),n())}}function jn(n,e){var i;var t=(i=n.$$events)==null?void 0:i[e.type],r=We(t)?t.slice():t==null?[]:[t];for(var s of r)s.call(this,e)}var Ve={exports:{}},ot,Mr;function Ke(){if(Mr)return ot;Mr=1;const n="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=e-6;return ot={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ot}var lt,Tr;function Je(){if(Tr)return lt;Tr=1;var n={};return lt=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},lt}var Or;function Ge(){return Or||(Or=1,(function(n,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=Ke(),i=Je();e=n.exports={};const o=e.re=[],u=e.safeRe=[],c=e.src=[],l=e.safeSrc=[],a=e.t={};let d=0;const f="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",s],[f,r]],g=w=>{for(const[v,A]of _)w=w.split(`${v}*`).join(`${v}{0,${A}}`).split(`${v}+`).join(`${v}{1,${A}}`);return w},h=(w,v,A)=>{const E=g(v),b=d++;i(w,b,v),a[w]=b,c[b]=v,l[b]=E,o[b]=new RegExp(v,A?"g":void 0),u[b]=new RegExp(E,A?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[a.NUMERICIDENTIFIER]})\\.(${c[a.NUMERICIDENTIFIER]})\\.(${c[a.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[a.NUMERICIDENTIFIERLOOSE]})\\.(${c[a.NUMERICIDENTIFIERLOOSE]})\\.(${c[a.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[a.NONNUMERICIDENTIFIER]}|${c[a.NUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[a.NONNUMERICIDENTIFIER]}|${c[a.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASE",`(?:-(${c[a.PRERELEASEIDENTIFIER]}(?:\\.${c[a.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[a.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[a.BUILDIDENTIFIER]}(?:\\.${c[a.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[a.MAINVERSION]}${c[a.PRERELEASE]}?${c[a.BUILD]}?`),h("FULL",`^${c[a.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[a.MAINVERSIONLOOSE]}${c[a.PRERELEASELOOSE]}?${c[a.BUILD]}?`),h("LOOSE",`^${c[a.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[a.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[a.XRANGEIDENTIFIER]})(?:\\.(${c[a.XRANGEIDENTIFIER]})(?:\\.(${c[a.XRANGEIDENTIFIER]})(?:${c[a.PRERELEASE]})?${c[a.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[a.XRANGEIDENTIFIERLOOSE]})(?:${c[a.PRERELEASELOOSE]})?${c[a.BUILD]}?)?)?`),h("XRANGE",`^${c[a.GTLT]}\\s*${c[a.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[a.GTLT]}\\s*${c[a.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),h("COERCE",`${c[a.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",c[a.COERCEPLAIN]+`(?:${c[a.PRERELEASE]})?(?:${c[a.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",c[a.COERCE],!0),h("COERCERTLFULL",c[a.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",h("TILDE",`^${c[a.LONETILDE]}${c[a.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[a.LONETILDE]}${c[a.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",h("CARET",`^${c[a.LONECARET]}${c[a.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[a.LONECARET]}${c[a.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[a.GTLT]}\\s*(${c[a.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[a.GTLT]}\\s*(${c[a.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[a.GTLT]}\\s*(${c[a.LOOSEPLAIN]}|${c[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[a.XRANGEPLAIN]})\\s+-\\s+(${c[a.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[a.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ve,Ve.exports)),Ve.exports}var ct,Lr;function hr(){if(Lr)return ct;Lr=1;const n=Object.freeze({loose:!0}),e=Object.freeze({});return ct=r=>r?typeof r!="object"?n:r:e,ct}var ut,$r;function zn(){if($r)return ut;$r=1;const n=/^[0-9]+$/,e=(r,s)=>{if(typeof r=="number"&&typeof s=="number")return r===s?0:r<s?-1:1;const i=n.test(r),o=n.test(s);return i&&o&&(r=+r,s=+s),r===s?0:i&&!o?-1:o&&!i?1:r<s?-1:1};return ut={compareIdentifiers:e,rcompareIdentifiers:(r,s)=>e(s,r)},ut}var dt,Dr;function ce(){if(Dr)return dt;Dr=1;const n=Je(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=Ke(),{safeRe:r,t:s}=Ge(),i=hr(),{compareIdentifiers:o}=zn();class u{constructor(l,a){if(a=i(a),l instanceof u){if(l.loose===!!a.loose&&l.includePrerelease===!!a.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>e)throw new TypeError(`version is longer than ${e} characters`);n("SemVer",l,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const d=l.trim().match(a.loose?r[s.LOOSE]:r[s.FULL]);if(!d)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const _=+f;if(_>=0&&_<t)return _}return f}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(n("SemVer.compare",this.version,this.options,l),!(l instanceof u)){if(typeof l=="string"&&l===this.version)return 0;l=new u(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof u||(l=new u(l,this.options)),this.major<l.major?-1:this.major>l.major?1:this.minor<l.minor?-1:this.minor>l.minor?1:this.patch<l.patch?-1:this.patch>l.patch?1:0}comparePre(l){if(l instanceof u||(l=new u(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let a=0;do{const d=this.prerelease[a],f=l.prerelease[a];if(n("prerelease compare",a,d,f),d===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(d===void 0)return-1;if(d===f)continue;return o(d,f)}while(++a)}compareBuild(l){l instanceof u||(l=new u(l,this.options));let a=0;do{const d=this.build[a],f=l.build[a];if(n("build compare",a,d,f),d===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(d===void 0)return-1;if(d===f)continue;return o(d,f)}while(++a)}inc(l,a,d){if(l.startsWith("pre")){if(!a&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(a){const f=`-${a}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!f||f[1]!==a)throw new Error(`invalid identifier: ${a}`)}}switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",a,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",a,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",a,d),this.inc("pre",a,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",a,d),this.inc("pre",a,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[f];else{let _=this.prerelease.length;for(;--_>=0;)typeof this.prerelease[_]=="number"&&(this.prerelease[_]++,_=-2);if(_===-1){if(a===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(a){let _=[a,f];d===!1&&(_=[a]),o(this.prerelease[0],a)===0?isNaN(this.prerelease[1])&&(this.prerelease=_):this.prerelease=_}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return dt=u,dt}var ft,xr;function De(){if(xr)return ft;xr=1;const n=ce();return ft=(t,r,s=!1)=>{if(t instanceof n)return t;try{return new n(t,r)}catch(i){if(!s)return null;throw i}},ft}var ht,Pr;function Ks(){if(Pr)return ht;Pr=1;const n=De();return ht=(t,r)=>{const s=n(t,r);return s?s.version:null},ht}var mt,Ur;function Js(){if(Ur)return mt;Ur=1;const n=De();return mt=(t,r)=>{const s=n(t.trim().replace(/^[=v]+/,""),r);return s?s.version:null},mt}var pt,Br;function Qs(){if(Br)return pt;Br=1;const n=ce();return pt=(t,r,s,i,o)=>{typeof s=="string"&&(o=i,i=s,s=void 0);try{return new n(t instanceof n?t.version:t,s).inc(r,i,o).version}catch{return null}},pt}var Et,kr;function Zs(){if(kr)return Et;kr=1;const n=De();return Et=(t,r)=>{const s=n(t,null,!0),i=n(r,null,!0),o=s.compare(i);if(o===0)return null;const u=o>0,c=u?s:i,l=u?i:s,a=!!c.prerelease.length;if(!!l.prerelease.length&&!a){if(!l.patch&&!l.minor)return"major";if(l.compareMain(c)===0)return l.minor&&!l.patch?"minor":"patch"}const f=a?"pre":"";return s.major!==i.major?f+"major":s.minor!==i.minor?f+"minor":s.patch!==i.patch?f+"patch":"prerelease"},Et}var vt,Gr;function ei(){if(Gr)return vt;Gr=1;const n=ce();return vt=(t,r)=>new n(t,r).major,vt}var gt,Fr;function ti(){if(Fr)return gt;Fr=1;const n=ce();return gt=(t,r)=>new n(t,r).minor,gt}var bt,Hr;function ri(){if(Hr)return bt;Hr=1;const n=ce();return bt=(t,r)=>new n(t,r).patch,bt}var _t,Vr;function ni(){if(Vr)return _t;Vr=1;const n=De();return _t=(t,r)=>{const s=n(t,r);return s&&s.prerelease.length?s.prerelease:null},_t}var Nt,qr;function _e(){if(qr)return Nt;qr=1;const n=ce();return Nt=(t,r,s)=>new n(t,s).compare(new n(r,s)),Nt}var wt,jr;function si(){if(jr)return wt;jr=1;const n=_e();return wt=(t,r,s)=>n(r,t,s),wt}var yt,zr;function ii(){if(zr)return yt;zr=1;const n=_e();return yt=(t,r)=>n(t,r,!0),yt}var St,Yr;function mr(){if(Yr)return St;Yr=1;const n=ce();return St=(t,r,s)=>{const i=new n(t,s),o=new n(r,s);return i.compare(o)||i.compareBuild(o)},St}var Rt,Xr;function ai(){if(Xr)return Rt;Xr=1;const n=mr();return Rt=(t,r)=>t.sort((s,i)=>n(s,i,r)),Rt}var It,Wr;function oi(){if(Wr)return It;Wr=1;const n=mr();return It=(t,r)=>t.sort((s,i)=>n(i,s,r)),It}var Ct,Kr;function Qe(){if(Kr)return Ct;Kr=1;const n=_e();return Ct=(t,r,s)=>n(t,r,s)>0,Ct}var At,Jr;function pr(){if(Jr)return At;Jr=1;const n=_e();return At=(t,r,s)=>n(t,r,s)<0,At}var Mt,Qr;function Yn(){if(Qr)return Mt;Qr=1;const n=_e();return Mt=(t,r,s)=>n(t,r,s)===0,Mt}var Tt,Zr;function Xn(){if(Zr)return Tt;Zr=1;const n=_e();return Tt=(t,r,s)=>n(t,r,s)!==0,Tt}var Ot,en;function Er(){if(en)return Ot;en=1;const n=_e();return Ot=(t,r,s)=>n(t,r,s)>=0,Ot}var Lt,tn;function vr(){if(tn)return Lt;tn=1;const n=_e();return Lt=(t,r,s)=>n(t,r,s)<=0,Lt}var $t,rn;function Wn(){if(rn)return $t;rn=1;const n=Yn(),e=Xn(),t=Qe(),r=Er(),s=pr(),i=vr();return $t=(u,c,l,a)=>{switch(c){case"===":return typeof u=="object"&&(u=u.version),typeof l=="object"&&(l=l.version),u===l;case"!==":return typeof u=="object"&&(u=u.version),typeof l=="object"&&(l=l.version),u!==l;case"":case"=":case"==":return n(u,l,a);case"!=":return e(u,l,a);case">":return t(u,l,a);case">=":return r(u,l,a);case"<":return s(u,l,a);case"<=":return i(u,l,a);default:throw new TypeError(`Invalid operator: ${c}`)}},$t}var Dt,nn;function li(){if(nn)return Dt;nn=1;const n=ce(),e=De(),{safeRe:t,t:r}=Ge();return Dt=(i,o)=>{if(i instanceof n)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;o=o||{};let u=null;if(!o.rtl)u=i.match(o.includePrerelease?t[r.COERCEFULL]:t[r.COERCE]);else{const _=o.includePrerelease?t[r.COERCERTLFULL]:t[r.COERCERTL];let g;for(;(g=_.exec(i))&&(!u||u.index+u[0].length!==i.length);)(!u||g.index+g[0].length!==u.index+u[0].length)&&(u=g),_.lastIndex=g.index+g[1].length+g[2].length;_.lastIndex=-1}if(u===null)return null;const c=u[2],l=u[3]||"0",a=u[4]||"0",d=o.includePrerelease&&u[5]?`-${u[5]}`:"",f=o.includePrerelease&&u[6]?`+${u[6]}`:"";return e(`${c}.${l}.${a}${d}${f}`,o)},Dt}var xt,sn;function ci(){if(sn)return xt;sn=1;class n{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}}return xt=n,xt}var Pt,an;function Ne(){if(an)return Pt;an=1;const n=/\s+/g;class e{constructor(y,x){if(x=s(x),y instanceof e)return y.loose===!!x.loose&&y.includePrerelease===!!x.includePrerelease?y:new e(y.raw,x);if(y instanceof i)return this.raw=y.value,this.set=[[y]],this.formatted=void 0,this;if(this.options=x,this.loose=!!x.loose,this.includePrerelease=!!x.includePrerelease,this.raw=y.trim().replace(n," "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(P=>!h(P[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const P of this.set)if(P.length===1&&w(P[0])){this.set=[P];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let y=0;y<this.set.length;y++){y>0&&(this.formatted+="||");const x=this.set[y];for(let $=0;$<x.length;$++)$>0&&(this.formatted+=" "),this.formatted+=x[$].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(y){const $=((this.options.includePrerelease&&_)|(this.options.loose&&g))+":"+y,P=r.get($);if(P)return P;const O=this.options.loose,B=O?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];y=y.replace(B,re(this.options.includePrerelease)),o("hyphen replace",y),y=y.replace(c[l.COMPARATORTRIM],a),o("comparator trim",y),y=y.replace(c[l.TILDETRIM],d),o("tilde trim",y),y=y.replace(c[l.CARETTRIM],f),o("caret trim",y);let j=y.split(" ").map(z=>A(z,this.options)).join(" ").split(/\s+/).map(z=>Z(z,this.options));O&&(j=j.filter(z=>(o("loose invalid filter",z,this.options),!!z.match(c[l.COMPARATORLOOSE])))),o("range list",j);const V=new Map,Q=j.map(z=>new i(z,this.options));for(const z of Q){if(h(z))return[z];V.set(z.value,z)}V.size>1&&V.has("")&&V.delete("");const q=[...V.values()];return r.set($,q),q}intersects(y,x){if(!(y instanceof e))throw new TypeError("a Range is required");return this.set.some($=>v($,x)&&y.set.some(P=>v(P,x)&&$.every(O=>P.every(B=>O.intersects(B,x)))))}test(y){if(!y)return!1;if(typeof y=="string")try{y=new u(y,this.options)}catch{return!1}for(let x=0;x<this.set.length;x++)if(ne(this.set[x],y,this.options))return!0;return!1}}Pt=e;const t=ci(),r=new t,s=hr(),i=Ze(),o=Je(),u=ce(),{safeRe:c,t:l,comparatorTrimReplace:a,tildeTrimReplace:d,caretTrimReplace:f}=Ge(),{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:g}=Ke(),h=S=>S.value==="<0.0.0-0",w=S=>S.value==="",v=(S,y)=>{let x=!0;const $=S.slice();let P=$.pop();for(;x&&$.length;)x=$.every(O=>P.intersects(O,y)),P=$.pop();return x},A=(S,y)=>(S=S.replace(c[l.BUILD],""),o("comp",S,y),S=L(S,y),o("caret",S),S=b(S,y),o("tildes",S),S=M(S,y),o("xrange",S),S=te(S,y),o("stars",S),S),E=S=>!S||S.toLowerCase()==="x"||S==="*",b=(S,y)=>S.trim().split(/\s+/).map(x=>N(x,y)).join(" "),N=(S,y)=>{const x=y.loose?c[l.TILDELOOSE]:c[l.TILDE];return S.replace(x,($,P,O,B,j)=>{o("tilde",S,$,P,O,B,j);let V;return E(P)?V="":E(O)?V=`>=${P}.0.0 <${+P+1}.0.0-0`:E(B)?V=`>=${P}.${O}.0 <${P}.${+O+1}.0-0`:j?(o("replaceTilde pr",j),V=`>=${P}.${O}.${B}-${j} <${P}.${+O+1}.0-0`):V=`>=${P}.${O}.${B} <${P}.${+O+1}.0-0`,o("tilde return",V),V})},L=(S,y)=>S.trim().split(/\s+/).map(x=>T(x,y)).join(" "),T=(S,y)=>{o("caret",S,y);const x=y.loose?c[l.CARETLOOSE]:c[l.CARET],$=y.includePrerelease?"-0":"";return S.replace(x,(P,O,B,j,V)=>{o("caret",S,P,O,B,j,V);let Q;return E(O)?Q="":E(B)?Q=`>=${O}.0.0${$} <${+O+1}.0.0-0`:E(j)?O==="0"?Q=`>=${O}.${B}.0${$} <${O}.${+B+1}.0-0`:Q=`>=${O}.${B}.0${$} <${+O+1}.0.0-0`:V?(o("replaceCaret pr",V),O==="0"?B==="0"?Q=`>=${O}.${B}.${j}-${V} <${O}.${B}.${+j+1}-0`:Q=`>=${O}.${B}.${j}-${V} <${O}.${+B+1}.0-0`:Q=`>=${O}.${B}.${j}-${V} <${+O+1}.0.0-0`):(o("no pr"),O==="0"?B==="0"?Q=`>=${O}.${B}.${j}${$} <${O}.${B}.${+j+1}-0`:Q=`>=${O}.${B}.${j}${$} <${O}.${+B+1}.0-0`:Q=`>=${O}.${B}.${j} <${+O+1}.0.0-0`),o("caret return",Q),Q})},M=(S,y)=>(o("replaceXRanges",S,y),S.split(/\s+/).map(x=>G(x,y)).join(" ")),G=(S,y)=>{S=S.trim();const x=y.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return S.replace(x,($,P,O,B,j,V)=>{o("xRange",S,$,P,O,B,j,V);const Q=E(O),q=Q||E(B),z=q||E(j),K=z;return P==="="&&K&&(P=""),V=y.includePrerelease?"-0":"",Q?P===">"||P==="<"?$="<0.0.0-0":$="*":P&&K?(q&&(B=0),j=0,P===">"?(P=">=",q?(O=+O+1,B=0,j=0):(B=+B+1,j=0)):P==="<="&&(P="<",q?O=+O+1:B=+B+1),P==="<"&&(V="-0"),$=`${P+O}.${B}.${j}${V}`):q?$=`>=${O}.0.0${V} <${+O+1}.0.0-0`:z&&($=`>=${O}.${B}.0${V} <${O}.${+B+1}.0-0`),o("xRange return",$),$})},te=(S,y)=>(o("replaceStars",S,y),S.trim().replace(c[l.STAR],"")),Z=(S,y)=>(o("replaceGTE0",S,y),S.trim().replace(c[y.includePrerelease?l.GTE0PRE:l.GTE0],"")),re=S=>(y,x,$,P,O,B,j,V,Q,q,z,K)=>(E($)?x="":E(P)?x=`>=${$}.0.0${S?"-0":""}`:E(O)?x=`>=${$}.${P}.0${S?"-0":""}`:B?x=`>=${x}`:x=`>=${x}${S?"-0":""}`,E(Q)?V="":E(q)?V=`<${+Q+1}.0.0-0`:E(z)?V=`<${Q}.${+q+1}.0-0`:K?V=`<=${Q}.${q}.${z}-${K}`:S?V=`<${Q}.${q}.${+z+1}-0`:V=`<=${V}`,`${x} ${V}`.trim()),ne=(S,y,x)=>{for(let $=0;$<S.length;$++)if(!S[$].test(y))return!1;if(y.prerelease.length&&!x.includePrerelease){for(let $=0;$<S.length;$++)if(o(S[$].semver),S[$].semver!==i.ANY&&S[$].semver.prerelease.length>0){const P=S[$].semver;if(P.major===y.major&&P.minor===y.minor&&P.patch===y.patch)return!0}return!1}return!0};return Pt}var Ut,on;function Ze(){if(on)return Ut;on=1;const n=Symbol("SemVer ANY");class e{static get ANY(){return n}constructor(a,d){if(d=t(d),a instanceof e){if(a.loose===!!d.loose)return a;a=a.value}a=a.trim().split(/\s+/).join(" "),o("comparator",a,d),this.options=d,this.loose=!!d.loose,this.parse(a),this.semver===n?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(a){const d=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],f=a.match(d);if(!f)throw new TypeError(`Invalid comparator: ${a}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new u(f[2],this.options.loose):this.semver=n}toString(){return this.value}test(a){if(o("Comparator.test",a,this.options.loose),this.semver===n||a===n)return!0;if(typeof a=="string")try{a=new u(a,this.options)}catch{return!1}return i(a,this.operator,this.semver,this.options)}intersects(a,d){if(!(a instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(a.value,d).test(this.value):a.operator===""?a.value===""?!0:new c(this.value,d).test(a.semver):(d=t(d),d.includePrerelease&&(this.value==="<0.0.0-0"||a.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||i(this.semver,"<",a.semver,d)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||i(this.semver,">",a.semver,d)&&this.operator.startsWith("<")&&a.operator.startsWith(">")))}}Ut=e;const t=hr(),{safeRe:r,t:s}=Ge(),i=Wn(),o=Je(),u=ce(),c=Ne();return Ut}var Bt,ln;function et(){if(ln)return Bt;ln=1;const n=Ne();return Bt=(t,r,s)=>{try{r=new n(r,s)}catch{return!1}return r.test(t)},Bt}var kt,cn;function ui(){if(cn)return kt;cn=1;const n=Ne();return kt=(t,r)=>new n(t,r).set.map(s=>s.map(i=>i.value).join(" ").trim().split(" ")),kt}var Gt,un;function di(){if(un)return Gt;un=1;const n=ce(),e=Ne();return Gt=(r,s,i)=>{let o=null,u=null,c=null;try{c=new e(s,i)}catch{return null}return r.forEach(l=>{c.test(l)&&(!o||u.compare(l)===-1)&&(o=l,u=new n(o,i))}),o},Gt}var Ft,dn;function fi(){if(dn)return Ft;dn=1;const n=ce(),e=Ne();return Ft=(r,s,i)=>{let o=null,u=null,c=null;try{c=new e(s,i)}catch{return null}return r.forEach(l=>{c.test(l)&&(!o||u.compare(l)===1)&&(o=l,u=new n(o,i))}),o},Ft}var Ht,fn;function hi(){if(fn)return Ht;fn=1;const n=ce(),e=Ne(),t=Qe();return Ht=(s,i)=>{s=new e(s,i);let o=new n("0.0.0");if(s.test(o)||(o=new n("0.0.0-0"),s.test(o)))return o;o=null;for(let u=0;u<s.set.length;++u){const c=s.set[u];let l=null;c.forEach(a=>{const d=new n(a.semver.version);switch(a.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!l||t(d,l))&&(l=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),l&&(!o||t(o,l))&&(o=l)}return o&&s.test(o)?o:null},Ht}var Vt,hn;function mi(){if(hn)return Vt;hn=1;const n=Ne();return Vt=(t,r)=>{try{return new n(t,r).range||"*"}catch{return null}},Vt}var qt,mn;function gr(){if(mn)return qt;mn=1;const n=ce(),e=Ze(),{ANY:t}=e,r=Ne(),s=et(),i=Qe(),o=pr(),u=vr(),c=Er();return qt=(a,d,f,_)=>{a=new n(a,_),d=new r(d,_);let g,h,w,v,A;switch(f){case">":g=i,h=u,w=o,v=">",A=">=";break;case"<":g=o,h=c,w=i,v="<",A="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(a,d,_))return!1;for(let E=0;E<d.set.length;++E){const b=d.set[E];let N=null,L=null;if(b.forEach(T=>{T.semver===t&&(T=new e(">=0.0.0")),N=N||T,L=L||T,g(T.semver,N.semver,_)?N=T:w(T.semver,L.semver,_)&&(L=T)}),N.operator===v||N.operator===A||(!L.operator||L.operator===v)&&h(a,L.semver))return!1;if(L.operator===A&&w(a,L.semver))return!1}return!0},qt}var jt,pn;function pi(){if(pn)return jt;pn=1;const n=gr();return jt=(t,r,s)=>n(t,r,">",s),jt}var zt,En;function Ei(){if(En)return zt;En=1;const n=gr();return zt=(t,r,s)=>n(t,r,"<",s),zt}var Yt,vn;function vi(){if(vn)return Yt;vn=1;const n=Ne();return Yt=(t,r,s)=>(t=new n(t,s),r=new n(r,s),t.intersects(r,s)),Yt}var Xt,gn;function gi(){if(gn)return Xt;gn=1;const n=et(),e=_e();return Xt=(t,r,s)=>{const i=[];let o=null,u=null;const c=t.sort((f,_)=>e(f,_,s));for(const f of c)n(f,r,s)?(u=f,o||(o=f)):(u&&i.push([o,u]),u=null,o=null);o&&i.push([o,null]);const l=[];for(const[f,_]of i)f===_?l.push(f):!_&&f===c[0]?l.push("*"):_?f===c[0]?l.push(`<=${_}`):l.push(`${f} - ${_}`):l.push(`>=${f}`);const a=l.join(" || "),d=typeof r.raw=="string"?r.raw:String(r);return a.length<d.length?a:r},Xt}var Wt,bn;function bi(){if(bn)return Wt;bn=1;const n=Ne(),e=Ze(),{ANY:t}=e,r=et(),s=_e(),i=(d,f,_={})=>{if(d===f)return!0;d=new n(d,_),f=new n(f,_);let g=!1;e:for(const h of d.set){for(const w of f.set){const v=c(h,w,_);if(g=g||v!==null,v)continue e}if(g)return!1}return!0},o=[new e(">=0.0.0-0")],u=[new e(">=0.0.0")],c=(d,f,_)=>{if(d===f)return!0;if(d.length===1&&d[0].semver===t){if(f.length===1&&f[0].semver===t)return!0;_.includePrerelease?d=o:d=u}if(f.length===1&&f[0].semver===t){if(_.includePrerelease)return!0;f=u}const g=new Set;let h,w;for(const M of d)M.operator===">"||M.operator===">="?h=l(h,M,_):M.operator==="<"||M.operator==="<="?w=a(w,M,_):g.add(M.semver);if(g.size>1)return null;let v;if(h&&w){if(v=s(h.semver,w.semver,_),v>0)return null;if(v===0&&(h.operator!==">="||w.operator!=="<="))return null}for(const M of g){if(h&&!r(M,String(h),_)||w&&!r(M,String(w),_))return null;for(const G of f)if(!r(M,String(G),_))return!1;return!0}let A,E,b,N,L=w&&!_.includePrerelease&&w.semver.prerelease.length?w.semver:!1,T=h&&!_.includePrerelease&&h.semver.prerelease.length?h.semver:!1;L&&L.prerelease.length===1&&w.operator==="<"&&L.prerelease[0]===0&&(L=!1);for(const M of f){if(N=N||M.operator===">"||M.operator===">=",b=b||M.operator==="<"||M.operator==="<=",h){if(T&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===T.major&&M.semver.minor===T.minor&&M.semver.patch===T.patch&&(T=!1),M.operator===">"||M.operator===">="){if(A=l(h,M,_),A===M&&A!==h)return!1}else if(h.operator===">="&&!r(h.semver,String(M),_))return!1}if(w){if(L&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===L.major&&M.semver.minor===L.minor&&M.semver.patch===L.patch&&(L=!1),M.operator==="<"||M.operator==="<="){if(E=a(w,M,_),E===M&&E!==w)return!1}else if(w.operator==="<="&&!r(w.semver,String(M),_))return!1}if(!M.operator&&(w||h)&&v!==0)return!1}return!(h&&b&&!w&&v!==0||w&&N&&!h&&v!==0||T||L)},l=(d,f,_)=>{if(!d)return f;const g=s(d.semver,f.semver,_);return g>0?d:g<0||f.operator===">"&&d.operator===">="?f:d},a=(d,f,_)=>{if(!d)return f;const g=s(d.semver,f.semver,_);return g<0?d:g>0||f.operator==="<"&&d.operator==="<="?f:d};return Wt=i,Wt}var Kt,_n;function _i(){if(_n)return Kt;_n=1;const n=Ge(),e=Ke(),t=ce(),r=zn(),s=De(),i=Ks(),o=Js(),u=Qs(),c=Zs(),l=ei(),a=ti(),d=ri(),f=ni(),_=_e(),g=si(),h=ii(),w=mr(),v=ai(),A=oi(),E=Qe(),b=pr(),N=Yn(),L=Xn(),T=Er(),M=vr(),G=Wn(),te=li(),Z=Ze(),re=Ne(),ne=et(),S=ui(),y=di(),x=fi(),$=hi(),P=mi(),O=gr(),B=pi(),j=Ei(),V=vi(),Q=gi(),q=bi();return Kt={parse:s,valid:i,clean:o,inc:u,diff:c,major:l,minor:a,patch:d,prerelease:f,compare:_,rcompare:g,compareLoose:h,compareBuild:w,sort:v,rsort:A,gt:E,lt:b,eq:N,neq:L,gte:T,lte:M,cmp:G,coerce:te,Comparator:Z,Range:re,satisfies:ne,toComparators:S,maxSatisfying:y,minSatisfying:x,minVersion:$,validRange:P,outside:O,gtr:B,ltr:j,intersects:V,simplifyRange:Q,subset:q,SemVer:t,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},Kt}var $e=_i();class be{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,t,r={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==be.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const s=new Nn(e,this,t,r);return this.eventMap[e]||(this.eventMap[e]=[]),r.prepend?this.eventMap[e].unshift(s):this.eventMap[e].push(s),s}addOneTimeListener(e,t,r={}){r.remaining=1,this.addListener(e,t,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?this.eventMap[be.ANY_EVENT]&&this.eventMap[be.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof Nn?this.eventMap[e].filter(s=>s===t).length>0:typeof t=="function"?this.eventMap[e].filter(s=>s.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],s=this.eventMap[be.ANY_EVENT]||[];return this.eventMap[e]&&(s=s.concat(this.eventMap[e])),s.forEach(i=>{if(i.suspended)return;let o=[...t];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(r.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),r}removeListener(e,t,r={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let s=this.eventMap[e].filter(i=>t&&i.callback!==t||r.remaining&&r.remaining!==i.remaining||r.context&&r.context!==i.context);s.length?this.eventMap[e]=s:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((r,s)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),r()},{remaining:1});t.duration!==1/0&&(i=setTimeout(()=>{o.remove(),s("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Nn{constructor(e,t,r,s={}){if(typeof e!="string"&&!(e instanceof String)&&e!==be.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");s.arguments!==void 0&&!Array.isArray(s.arguments)&&(s.arguments=[s.arguments]),s=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},s),s.duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=r,this.context=s.context,this.count=0,this.event=e,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class m{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),m.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),m.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),m.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),m.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Me{constructor(e,t={}){this.duration=I.defaults.note.duration,this.attack=I.defaults.note.attack,this.release=I.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=C.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=C.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=C.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=C.getNoteDetails(e);if(I.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(I.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(I.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(I.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(I.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(I.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(I.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return C.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=C.from7bitToFloat(e)}get rawRelease(){return C.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=C.from7bitToFloat(e)}get number(){return C.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return I.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+e*12+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class C{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const r=this.getNoteDetails(e);if(!r)throw new TypeError("Invalid note identifier");const s={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let i=(r.octave+1+t)*12;if(i+=s[r.name],r.accidental&&(r.accidental.startsWith("b")?i-=r.accidental.length:i+=r.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const r=t[1].toUpperCase(),s=parseInt(t[3]);let i=t[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:r+(i||"")+s,name:r,octave:s}}static sanitizeChannels(e){let t;if(I.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return Array.isArray(e)?t=e:t=[e],t.indexOf("all")>-1&&(t=m.MIDI_CHANNEL_NUMBERS),t.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(e){let t=!1;const r=parseFloat(e);return isNaN(r)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?r>=0&&(t=I.time+r):r>=0&&(t=r),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let r=!1;if(Number.isInteger(e)&&e>=0&&e<=127)r=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)r=parseInt(e);else if(typeof e=="string"||e instanceof String)try{r=this.toNoteNumber(e.trim(),t)}catch{return!1}return r}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(e/12-1)+t;return r[e%12]+s.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof Me)return e;let r=this.guessNoteNumber(e,t.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new Me(r,t)}static buildNoteArray(e,t={}){let r=[];return Array.isArray(e)||(e=[e]),e.forEach(s=>{r.push(this.buildNote(s,t))}),r}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,t=0){I.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const r=((e<<7)+t)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(e){I.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(e*16383);return{msb:t>>7,lsb:t&127}}static offsetNumber(e,t=0,r=0){if(I.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,r=parseInt(r)||0}return Math.min(Math.max(e+t*12+r,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(r=>e[r]===t)}static getCcNameByNumber(e){if(!(I.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return m.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let t=m.CONTROL_CHANGE_MESSAGES.find(r=>r.name===e);return t?t.number:m.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in m.CHANNEL_MODE_MESSAGES)if(m.CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===m.CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class Ni extends be{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,r={}){if(I.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(t=C.fromFloatTo7Bit(t));const s=I.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),C.buildNoteArray(e).forEach(i=>{this.send([(m.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(s),t],{time:C.toTimestamp(r.time)})}),this}sendControlChange(e,t,r={}){if(typeof e=="string"&&(e=C.getCcNumberByName(e)),Array.isArray(t)||(t=[t]),I.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(t=t.map(s=>{const i=Math.min(Math.max(parseInt(s),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),t.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((s,i)=>{this.send([(m.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+i*32,t[i]],{time:C.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2?this:(this.sendControlChange(38,e[1],t),this)}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=m.REGISTERED_PARAMETERS[e]),I.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(m.REGISTERED_PARAMETERS).forEach(s=>{m.REGISTERED_PARAMETERS[s][0]===e[0]&&m.REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=m.REGISTERED_PARAMETERS[e]),I.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(m.REGISTERED_PARAMETERS).forEach(s=>{m.REGISTERED_PARAMETERS[s][0]===e[0]&&m.REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){this.sendNoteOn(e,t);const r=Array.isArray(e)?e:[e];for(let s of r)if(parseInt(s.duration)>0){const i={time:(C.toTimestamp(t.time)||I.time)+parseInt(s.duration),release:s.release,rawRelease:s.rawRelease};this.sendNoteOff(s,i)}else if(parseInt(t.duration)>0){const i={time:(C.toTimestamp(t.time)||I.time)+parseInt(t.duration),release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(s,i)}return this}sendNoteOff(e,t={}){if(I.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;t.rawRelease!=null?r=t.rawRelease:isNaN(t.release)||(r=Math.round(t.release*127));const s=I.octaveOffset+this.output.octaveOffset+this.octaveOffset;return C.buildNoteArray(e,{rawRelease:parseInt(r)}).forEach(i=>{this.send([(m.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(s),i.rawRelease],{time:C.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(I.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;t.rawAttack!=null?r=t.rawAttack:isNaN(t.attack)||(r=Math.round(t.attack*127));const s=I.octaveOffset+this.output.octaveOffset+this.octaveOffset;return C.buildNoteArray(e,{rawAttack:r}).forEach(i=>{this.send([(m.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(s),i.rawAttack],{time:C.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,r={}){if(typeof e=="string"&&(e=m.CHANNEL_MODE_MESSAGES[e]),I.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(m.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:C.toTimestamp(r.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(I.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return t.rawValue||(e=C.fromFloatTo7Bit(e)),this.send([(m.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:C.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,I.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(e)+64,s=e-Math.floor(e);s=Math.round((s+1)/2*16383);let i=s>>7&127,o=s&127;return this.sendRpnValue("channelcoarsetuning",r,t),this.sendRpnValue("channelfinetuning",[i,o],t),this}sendModulationRange(e,t,r={}){if(I.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(t!=null&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],r),this}sendNrpnValue(e,t,r={}){if(t=[].concat(t),I.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,r),this._setCurrentParameter(t,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(e,t={}){if(I.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,s=0;if(t.rawValue&&Array.isArray(e))r=e[0],s=e[1];else if(t.rawValue&&!Array.isArray(e))r=e;else{const i=C.fromFloatToMsbLsb((e+1)/2);r=i.msb,s=i.lsb}return this.send([(m.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,r],{time:C.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,r={}){if(I.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],r),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,I.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(m.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:C.toTimestamp(t.time)}),this}sendRpnValue(e,t,r={}){if(Array.isArray(e)||(e=m.REGISTERED_PARAMETERS[e]),I.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,r),this._setCurrentParameter(t,r),this._deselectRegisteredParameter(r),this}sendTuningBank(e,t={}){if(I.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(I.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ir extends be{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new Ni(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:I.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},r=0){if(e instanceof Kn&&(e=C.isNode?e.data:e.rawData),e instanceof Uint8Array&&C.isNode&&(e=Array.from(e)),I.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(r)?{time:0}:{time:r}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(s=>{if(s=parseInt(s),!(s>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,C.toTimestamp(t.time)),this}sendSysex(e,t=[],r={}){if(e=[].concat(e),t instanceof Uint8Array){const s=new Uint8Array(1+e.length+t.length+1);s[0]=m.SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(e),1),s.set(t,1+e.length),s[s.length-1]=m.SYSTEM_MESSAGES.sysexend,this.send(s,{time:r.time})}else{const s=e.concat(t,m.SYSTEM_MESSAGES.sysexend);this.send([m.SYSTEM_MESSAGES.sysex].concat(s),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():I.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(I.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([m.SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){e=Math.floor(e)||0;var r=e>>7&127,s=e&127;return this.send([m.SYSTEM_MESSAGES.songposition,r,s],{time:t.time}),this}sendSongSelect(e=0,t={}){if(I.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([m.SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([m.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([m.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([m.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([m.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([m.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([m.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([m.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return I.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(e,t,r)}),this}sendControlChange(e,t,r={},s={}){if(I.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;r=s,r.channels=i,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendControlChange(e,t,r)}),this}sendPitchBendRange(e=0,t=0,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBendRange(e,t,r)}),this}setPitchBendRange(e=0,t=0,r="all",s={}){return I.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,s)}sendRpnValue(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendRpnValue(e,t,r)}),this}setRegisteredParameter(e,t=[],r="all",s={}){return I.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,s)}sendChannelAftertouch(e,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendProgramChange(e,t)}),this}sendModulationRange(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendModulationRange(e,t,r)}),this}setModulationRange(e=0,t=0,r="all",s={}){return I.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,s)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},r={}){return I.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,r)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",r={}){return I.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,r)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",r={}){return I.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,r)}sendChannelMode(e,t=0,r={},s={}){if(I.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;r=s,r.channels=i,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendChannelMode(e,t,r)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(I.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=t,e.channels=r,e.channels==="all"&&(e.channels=m.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNrpnValue(e,t,r)}),this}setNonRegisteredParameter(e,t=[],r="all",s={}){return I.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,s)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",r={}){return I.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,r)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",r={}){return I.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,r)}sendNoteOff(e,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},r={}){if(I.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].playNote(e,t)}),this}sendNoteOn(e,t={},r={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class wn{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(m.SYSTEM_MESSAGES),...Object.keys(m.CHANNEL_MESSAGES)],this.channels=m.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),I.validation&&(e.forEach(r=>{if(!(r instanceof ir))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(r=>{if(!m.SYSTEM_MESSAGES.hasOwnProperty(r)&&!m.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(r=>{if(!m.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{I.validation&&!(t instanceof ir)||t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class wi extends be{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const r=e.message.dataBytes[0],s=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&s===0)this.notesState[r]=!1,t.type="noteoff",t.note=new Me(C.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+I.octaveOffset),{rawAttack:0,rawRelease:s}),t.value=C.from7bitToFloat(s),t.rawValue=s,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[r]=!0,t.note=new Me(C.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+I.octaveOffset),{rawAttack:s}),t.value=C.from7bitToFloat(s),t.rawValue=s,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new Me(C.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+I.octaveOffset)),t.value=C.from7bitToFloat(s),t.rawValue=s,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=r;else if(t.type==="controlchange"){t.controller={number:r,name:m.CONTROL_CHANGE_MESSAGES[r].name,description:m.CONTROL_CHANGE_MESSAGES[r].description,position:m.CONTROL_CHANGE_MESSAGES[r].position},t.subtype=t.controller.name||"controller"+r,t.value=C.from7bitToFloat(s),t.rawValue=s;const i=Object.assign({},t);i.type=`${t.type}-controller${r}`,delete i.subtype,this.emit(i.type,i);const o=Object.assign({},t);o.type=`${t.type}-`+m.CONTROL_CHANGE_MESSAGES[r].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=r,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=C.from7bitToFloat(r),t.rawValue=r):t.type==="pitchbend"?(t.value=((s<<7)+r-8192)/8192,t.rawValue=(s<<7)+r):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],r=e.message.dataBytes[1];t===99||t===101?(this._nrpnBuffer=[],this._rpnBuffer=[],t===99?this._nrpnBuffer=[e.message]:r!==127&&(this._rpnBuffer=[e.message])):t===98||t===100?t===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(t===6||t===38||t===96||t===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,t,r,s){e=e==="nrpn"?"nrpn":"rpn";const i={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:t,parameterLsb:r,value:C.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};e==="rpn"?i.parameter=Object.keys(m.REGISTERED_PARAMETERS).find(c=>m.REGISTERED_PARAMETERS[c][0]===t&&m.REGISTERED_PARAMETERS[c][1]===r):i.parameter=(t<<7)+r;const o=m.CONTROL_CHANGE_MESSAGES[s.message.dataBytes[0]].name;i.type=`${e}-${o}`,this.emit(i.type,i);const u=Object.assign({},i);u.type==="nrpn-dataincrement"?u.type="nrpn-databuttonincrement":u.type==="nrpn-datadecrement"?u.type="nrpn-databuttondecrement":u.type==="rpn-dataincrement"?u.type="rpn-databuttonincrement":u.type==="rpn-datadecrement"&&(u.type="rpn-databuttondecrement"),this.emit(u.type,u),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return I.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),C.getChannelModeByNumber(e)}getCcNameByNumber(e){if(I.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return C.getCcNameByNumber(e)}getNoteState(e){e instanceof Me&&(e=e.identifier);const t=C.guessNoteNumber(e,I.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Kn{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=C.getPropertyByValue(m.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=C.getPropertyByValue(m.SYSTEM_MESSAGES,this.command)),this.statusByte===m.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class yi extends be{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new wi(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:I.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new Kn(e.data),r={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",r),t.isSystemMessage?this._parseEvent(r):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(r),this._forwarders.forEach(s=>s.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){I.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,r={}){if(I.validation&&typeof r=="function"){let s=t!=null?[].concat(t):void 0;t=r,r={channels:s}}if(m.CHANNEL_EVENTS.includes(e)){r.channels===void 0&&(r.channels=m.MIDI_CHANNEL_NUMBERS);let s=[];return C.sanitizeChannels(r.channels).forEach(i=>{s.push(this.channels[i].addListener(e,t,r))}),s}else return super.addListener(e,t,r)}addOneTimeListener(e,t,r={}){return r.remaining=1,this.addListener(e,t,r)}on(e,t,r,s){return this.addListener(e,t,r,s)}hasListener(e,t,r={}){if(I.validation&&typeof r=="function"){let s=[].concat(t);t=r,r={channels:s}}return m.CHANNEL_EVENTS.includes(e)?(r.channels===void 0&&(r.channels=m.MIDI_CHANNEL_NUMBERS),C.sanitizeChannels(r.channels).every(s=>this.channels[s].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,r={}){if(I.validation&&typeof r=="function"){let s=[].concat(t);t=r,r={channels:s}}if(r.channels===void 0&&(r.channels=m.MIDI_CHANNEL_NUMBERS),e==null)return C.sanitizeChannels(r.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();m.CHANNEL_EVENTS.includes(e)?C.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].removeListener(e,t,r)}):super.removeListener(e,t,r)}addForwarder(e,t={}){let r;return e instanceof wn?r=e:r=new wn(e,t),this._forwarders.push(r),r}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return I.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Si extends be{constructor(){super(),this.defaults={note:{attack:C.from7bitToFloat(64),release:C.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},t=!1){if(C.isNode)try{window.navigator}catch{let u=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,u)}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:t}),t&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(o){return r.error=o,this.emit("error",r),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return r.error=o,this.emit("error",r),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r]._midiInput&&this._disconnectedInputs[r].id===e.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r]._midiInput&&this.inputs[r].id===e.toString())return this.inputs[r]}getInputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(e))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(e))return this.inputs[r]}getOutputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(e))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(e))return this.outputs[r]}getOutputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r]._midiOutput&&this._disconnectedOutputs[r].id===e.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r]._midiOutput&&this.outputs[r].id===e.toString())return this.outputs[r]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),C.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?C.getNoteDetails(C.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),C.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),C.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),C.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),C.buildNoteArray(e,t)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),C.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(t=>e.push(t.destroy())),this.outputs.forEach(t=>e.push(t.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let t={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?t.port=this.getOutputById(e.port.id):e.port.type==="input"&&(t.port=this.getInputById(e.port.id)),this.emit(e.port.state,t);const r=Object.assign({},t);r.type="portschanged",this.emit(r.type,r)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?t.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(t.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,t);const r=Object.assign({},t);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let t=this._inputs.length-1;t>=0;t--){const r=this._inputs[t];Array.from(this.interface.inputs.values()).find(i=>i===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(t,1))}let e=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(r=>r._midiInput===t)){let r=this._disconnectedInputs.find(s=>s._midiInput===t);r||(r=new yi(t)),this._inputs.push(r),e.push(r.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let t=this._outputs.length-1;t>=0;t--){const r=this._outputs[t];Array.from(this.interface.outputs.values()).find(i=>i===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(t,1))}let e=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(r=>r._midiOutput===t)){let r=this._disconnectedOutputs.find(s=>s._midiOutput===t);r||(r=new ir(t)),this._outputs.push(r),e.push(r.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),C.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),C.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),m.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),m.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),m.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),m.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),m.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const I=new Si;I.constructor=null;const Xe=(...n)=>{},Ri=[{name:"unknown",controlCount:0,capabilities:{}},{name:"Oxion development board",controlCount:4,capabilities:{led:!0}},{name:"16n",controlCount:16,capabilities:{i2c:!0,led:!0,faderCalibration:!0,highResolution:"2.2.0"},latestFirmwareVersion:"2.2.0",firmwareUrl:"https://github.com/16n-faderbank/16n/releases/latest"},{name:"16n (LC)",controlCount:16,capabilities:{i2c:!0,led:!0,faderCalibration:!0,highResolution:"2.2.0"},sendShortMessages:!0,latestFirmwareVersion:"2.1.1",firmwareUrl:"https://github.com/16n-faderbank/16n/releases/latest"},{name:"16rx",controlCount:16,capabilities:{i2c:!0,led:!0,highResolution:"3.1.0"},latestFirmwareVersion:"3.1.1",firmwareUrl:"https://github.com/16n-faderbank/16next_firmware/releases/latest"},{name:"16nx",controlCount:16,capabilities:{i2c:!0,led:!0,highResolution:"3.1.0"},latestFirmwareVersion:"3.1.1",firmwareUrl:"https://github.com/16n-faderbank/16next_firmware/releases/latest"}],Jn=(n,e)=>{let t=n.ledOn==e.ledOn&&n.ledFlash==e.ledFlash&&n.controllerFlip==e.controllerFlip&&n.midiThru==e.midiThru;("i2cLeader"in n||"i2cLeader"in e)&&(t=t&&n.i2cLeader==e.i2cLeader),("faderMax"in n||"faderMax"in e)&&(t=t&&n.faderMax==e.faderMax&&n.faderMin==e.faderMin);let r=!0,s=!0;return n.usbControls.forEach((i,o)=>{const u=e.usbControls[o];(i.channel!=u.channel||i.cc!=u.cc||i.highResolution!=u.highResolution)&&(r=!1)}),n.trsControls.forEach((i,o)=>{const u=e.trsControls[o];(i.channel!=u.channel||i.cc!=u.cc||i.highResolution!=u.highResolution)&&(s=!1)}),t&&r&&s},Fe=n=>{const e=Array.from({length:84},()=>0),t=n.firmwareVersion.trim().split(".").map(d=>parseInt(d));e[0]=n.deviceId,e[1]=t[0],e[2]=t[1],e[3]=t[2],e[4]=n.ledOn?1:0,e[5]=n.ledFlash?1:0,e[6]=n.controllerFlip?1:0,e[7]=n.i2cLeader?1:0;const r=n.faderMin>>7,s=n.faderMin-(r<<7);e[8]=s,e[9]=r;const i=n.faderMax>>7,o=n.faderMax-(i<<7);e[10]=o,e[11]=i,e[12]=n.midiThru?1:0;const u=20,c=36,l=52,a=68;if(n.usbControls.forEach((d,f)=>{e[f+u]=d.channel,e[f+l]=d.cc}),n.trsControls.forEach((d,f)=>{e[f+c]=d.channel,e[f+a]=d.cc}),Re(ve(n.deviceId),"highResolution",t.join("."))){const _=Sn(n.usbControls),g=Sn(n.trsControls);_.forEach((h,w)=>{e[84+w]=_[w]}),g.forEach((h,w)=>{e[87+w]=g[w]})}return e},Ii=n=>Fe(n).slice(4,20),Ci=n=>{const e=Fe(n),t=e.slice(20,36),r=e.slice(52,68);return t.concat(r)},Ai=n=>{const e=Fe(n),t=e.slice(36,52),r=e.slice(68,84);return t.concat(r)},Mi=n=>{const e={...n},t=ve(n.deviceId).controlCount;return e.usbControls=e.usbControls.splice(0,t),e.usbControls.forEach(r=>delete r.val),e.trsControls=e.trsControls.splice(0,t),JSON.stringify(e,null,2)},Ti=(n,e)=>e.deviceId!=n.deviceId?`Cannot update - this data file is for a ${ve(e.deviceId).name}, but you are trying to install it on a ${ve(n.deviceId).name} `:!1,Oi=(n,e)=>(Object.keys(e).forEach(t=>{n[t]=e[t]}),n),Li=n=>{const t=n[5],r=n[6]+"."+n[7]+"."+n[8],s=n[9]==1,i=n[10]==1,o=n[11]==1,u=n[12]==1,c=n[13],a=(n[14]<<7)+c,d=n[15],_=(n[16]<<7)+d,g=n[17]==1,h=[],w=[];n.slice(25,41).forEach((b,N)=>{b!=127&&(h[N]={channel:b})}),n.slice(41,57).forEach((b,N)=>{b!=127&&(w[N]={channel:b})}),n.slice(57,73).forEach((b,N)=>{b!=127&&(h[N].cc=b)}),n.slice(73,89).forEach((b,N)=>{b!=127&&(w[N].cc=b)}),h.forEach(b=>b.val=0);const v=ve(t);let A=Array.from(Array(16)).map(()=>!1),E=Array.from(Array(16)).map(()=>!1);if(v&&Re(v,"highResolution",r)){const b=n.slice(89,92);A=yn(b),h.forEach((L,T)=>{L.highResolution=A[T]});const N=n.slice(92,95);E=yn(N),w.forEach((L,T)=>{L.highResolution=E[T]})}return{ledOn:s,ledFlash:i,controllerFlip:o,midiThru:g,usbControls:h,trsControls:w,deviceId:t,firmwareVersion:r,i2cLeader:u,faderMin:a,faderMax:_,usbHighResolution:A,trsHighResolution:E}},yn=n=>{let e=0;for(let r=0;r<3;r++){const s=r==2?3:127;e|=(n[r]&s)<<7*r}const t=[];for(let r=0;r<16;r++)t.push((e&1<<r)!==0);return t},Sn=n=>{let e=0;return n.forEach((t,r)=>{t.highResolution&&(e|=1<<r)}),[e&127,e>>7&127,e>>14&3]},ve=n=>Ri[n],Re=(n,e,t)=>{if(n)return n.capabilities[e]?n.capabilities[e]===!0?!0:$e.gte(t,n.capabilities[e]):!1},le={sysexMfgId:[125,0,0],requestInfoMsg:31,updateConfigMsg:14,updateDeviceOptionsMsg:13,updateUSBOptionsMessage:12,updateTRSOptionsMessage:11,factoryResetMsg:26},$i=n=>n[1]==le.sysexMfgId[0]&&n[2]==le.sysexMfgId[1]&&n[3]==le.sysexMfgId[2],Di=(n,e)=>{ve(n.deviceId).sendShortMessages?Pi(n,e):xi(n,e)},xi=(n,e)=>{e.sendSysex(le.sysexMfgId,[le.updateConfigMsg,...Fe(n)])},Pi=(n,e)=>{e.sendSysex(le.sysexMfgId,[le.updateDeviceOptionsMsg,...Ii(n)]),e.sendSysex(le.sysexMfgId,[le.updateUSBOptionsMessage,...Ci(n)]),e.sendSysex(le.sysexMfgId,[le.updateTRSOptionsMessage,...Ai(n)])},br=n=>{n.sendSysex(le.sysexMfgId,[le.requestInfoMsg])},Qn=n=>{n.sendSysex(le.sysexMfgId,[le.factoryResetMsg])},p=xn({current:null,controllerMightNeedFactoryReset:!1,editing:null,editMode:!1}),Y=xn({inputs:[],outputs:[],selectedInput:null,selectedOutput:null,webMidiEnabled:!1});let Ye=-1;const Jt=()=>I.inputs.sort(Zn),Qt=()=>I.outputs.sort(Zn),Zn=(n,e)=>{const t=`${n.manufacturer} ${n.name}`,r=`${e.manufacturer} ${e.name}`;return t<r?-1:t>r?1:0},Ui=()=>{Y.webMidiEnabled=!0,Bi()},Bi=()=>{Y.inputs=[...Jt()],Y.outputs=[...Qt()],qe(),I.addListener("connected",()=>{Y.inputs=[...Jt()],Y.outputs=[...Qt()],qe()}),I.addListener("disconnected",()=>{Y.inputs=[...Jt()],Y.outputs=[...Qt()],Y.selectedInput=null,Y.selectedOutput=null,p.current=null,qe()}),setInterval(()=>{qe()},5e3)},qe=()=>{if(!Y.selectedInput&&Y.inputs.length>0){const n=Y.inputs.find(e=>e.name.match(/.*16n.*/));n&&(Y.selectedInput=n)}if(!Y.selectedOutput&&Y.outputs.length>0){const n=Y.outputs.find(e=>e.name.match(/.*16n.*/));n&&(Y.selectedOutput=n)}!p.current&&Y.selectedInput&&Y.selectedOutput&&(es(Y.selectedInput),ts(Y.selectedInput),ar())},ki=n=>{p.current&&p.current.usbControls.forEach(e=>{n.message.channel==e.channel&&n.controller.number==e.cc&&(e.msb=n.rawValue),e.highResolution&&n.message.channel==e.channel&&n.controller.number==e.cc+32&&(e.lsb=n.rawValue),e.highResolution&&e.msb?e.val=(e.msb<<7)+e.lsb:e.val=e.msb})},es=n=>{n.addListener("controlchange",ki)},ts=n=>{n.addListener("sysex",e=>{const t=e.message.data;$i(t)&&t[4]==15&&(p.current=Li(t),Xe("Received config",p.current),Ye=-1,p.controllerMightNeedFactoryReset=!1)}),Xe("Attached sysex listener to ",n.name)},ar=()=>{Ye<0&&(Ye=Date.now()),Date.now()-Ye>8e3&&(p.controllerMightNeedFactoryReset||(p.controllerMightNeedFactoryReset=!0));const n=Y.selectedInput,e=Y.selectedOutput;n&&e&&(Xe("Requesting config over "+e.name),Xe("Hoping to receive on "+n.name),br(e))};var Gi=F("<span></span>");function Fi(n,e){let t=Ie(e,"classList",3,"");var r=Gi();de(()=>fr(r,1,`fas fa-${e.i??""} ${t()??""}`,"svelte-1eqehiz")),R(n,r)}var Hi=F('<div class="button-wrapper svelte-18sv61c"><button class="svelte-18sv61c"><!> <!></button></div>');function oe(n,e){he(e,!0);let t=Ie(e,"icon",3,""),r=Ie(e,"disabled",3,!1);var s=Hi(),i=k(s);i.__click=function(...l){var a;(a=e.onclick)==null||a.apply(this,l)};var o=k(i);{var u=l=>{Fi(l,{get i(){return t()}})};W(o,l=>{t()&&t().trim()!==""&&l(u)})}var c=D(o,2);Ce(c,()=>e.children),U(i),U(s),de(()=>i.disabled=r()),R(n,s),me()}dr(["click"]);var Vi=F('<span class="upgrade svelte-y5wouk"> <a>Download</a></span>'),qi=F('<p class="device svelte-y5wouk">Connected: <strong> </strong> running firmware <strong> </strong> <!></p>'),ji=F('<p class="device svelte-y5wouk">No device connected.</p>'),zi=F('<div class="details svelte-y5wouk"><!></div>');function Yi(n,e){he(e,!0);let t=tr(""),r=tr(""),s=!1;ur(()=>{if(p.current&&p.current.firmwareVersion&&p.current.deviceId&&!s){s=!0;const c=ve(p.current.deviceId);c.latestFirmwareVersion&&$e.gt(c.latestFirmwareVersion,p.current.firmwareVersion)?(Ae(t,`A new version of the ${c.name} firmware (${c.latestFirmwareVersion}) is available.`),Ae(r,c.firmwareUrl||"",!0)):(Ae(t,""),Ae(r,""))}});var i=fe(),o=X(i);{var u=c=>{var l=zi(),a=k(l);{var d=_=>{var g=qi(),h=D(k(g)),w=k(h,!0);U(h);var v=D(h,2),A=k(v,!0);U(v);var E=D(v,2);{var b=N=>{var L=Vi(),T=k(L),M=D(T);U(L),de(()=>{Ee(T,`${H(t)??""} `),Le(M,"href",H(r))}),R(N,L)};W(E,N=>{H(t).trim()!=""&&N(b)})}U(g),de(N=>{Ee(w,N),Ee(A,p.current.firmwareVersion)},[()=>ve(p.current.deviceId).name]),R(_,g)},f=_=>{var g=ji();R(_,g)};W(a,_=>{p.current?_(d):_(f,!1)})}U(l),R(c,l)};W(o,c=>{Y.webMidiEnabled&&c(u)})}R(n,i),me()}var Xi=F('<p><label><input type="checkbox"/> <!></label></p>');function je(n,e){he(e,!0);let t=Ie(e,"checked",15);var r=Xi(),s=k(r),i=k(s);ke(i);var o=D(i,2);{var u=c=>{var l=fe(),a=X(l);Ce(a,()=>e.children),R(c,l)};W(o,c=>{e.children&&c(u)})}U(s),U(r),qn(i,t),R(n,r),me()}var Wi=F("<!> <!>",1),Ki=F(`<hr/> <h3>Fader Minimum/Maximum calibration</h3> <div><label for="faderMin" class="svelte-rrwews">Fader Minimum raw value</label> <input name="faderMin" type="number" min="0"/></div> <div><label for="faderMax" class="svelte-rrwews">Fader Maximum raw value</label> <input name="faderMax" type="number" min="0"/></div> <p class="note svelte-rrwews">You shouldn't touch this unless you are having issues with your faders
      either reaching <code>127</code> before the end of their travel, or not at all.<br/><br/> "Raw" analog values are read from the faders between 0 and 8192. Bring the fader
      maximum down until all faders smoothly travel from 0 to 127 on the debug view
      (bearing in mind there is a small dead zone at either end of a fader).</p>`,1),Ji=F(`<hr/> <h3>I2C Leader/Follower</h3> <select><option>Follower</option><option>Leader</option></select> <p class="note svelte-rrwews"><strong>Follower</strong> mode is for use with Teletype.</p> <p class="note svelte-rrwews"><strong>Leader</strong> mode is for use with Ansible, TXo, ER-301. 16n will
      not respond to Teletype when in leader mode.</p> <p class="note svelte-rrwews">This will not take effect until you restart (disconnect/reconnect) your
      16n.</p> <p class="note small svelte-rrwews">("Leader" is sometimes also referred to as 'master' mode)</p>`,1),Qi=F("<!> <!> <!> <!> <!>",1);function Zi(n,e){he(e,!0);let t=ge(()=>p.current&&ve(p.current.deviceId));var r=fe(),s=X(r);{var i=o=>{var u=Qi(),c=X(u);{var l=v=>{var A=Wi(),E=X(A);je(E,{get checked(){return p.editing.ledOn},set checked(N){p.editing.ledOn=N},children:(N,L)=>{J();var T=ee("LED permanently on when powered");R(N,T)},$$slots:{default:!0}});var b=D(E,2);je(b,{get checked(){return p.editing.ledFlash},set checked(N){p.editing.ledFlash=N},children:(N,L)=>{J();var T=ee("LED flash on MIDI activity");R(N,T)},$$slots:{default:!0}}),R(v,A)};W(c,v=>{Re(H(t),"led",p.current.firmwareVersion)&&v(l)})}var a=D(c,2);je(a,{get checked(){return p.editing.controllerFlip},set checked(v){p.editing.controllerFlip=v},children:(v,A)=>{J();var E=ee("Rotate controller 180Âº");R(v,E)},$$slots:{default:!0}});var d=D(a,2);{var f=v=>{je(v,{get checked(){return p.editing.midiThru},set checked(A){p.editing.midiThru=A},children:(A,E)=>{J();var b=ee("Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)");R(A,b)},$$slots:{default:!0}})};W(d,v=>{$e.gte(p.current.firmwareVersion,"2.1.0")&&v(f)})}var _=D(d,2);{var g=v=>{var A=Ki(),E=D(X(A),4),b=D(k(E),2);ke(b),Le(b,"max",8191),U(E);var N=D(E,2),L=D(k(N),2);ke(L),Le(L,"max",8191),U(N),J(2),sr(b,()=>p.editing.faderMin,T=>p.editing.faderMin=T),sr(L,()=>p.editing.faderMax,T=>p.editing.faderMax=T),R(v,A)};W(_,v=>{Re(H(t),"faderCalibration",p.current.firmwareVersion)&&v(g)})}var h=D(_,2);{var w=v=>{var A=Ji(),E=D(X(A),4),b=k(E);b.value=b.__value=!1;var N=D(b);N.value=N.__value=!0,U(E),J(8),Vn(E,()=>p.editing.i2cLeader,L=>p.editing.i2cLeader=L),R(v,A)};W(h,v=>{Re(H(t),"i2c",p.current.firmwareVersion)&&v(w)})}R(o,u)};W(s,o=>{p.current&&p.editing&&H(t)&&o(i)})}R(n,r),me()}var ea=F("<option> </option>"),ta=F('<dt class="hr-title svelte-1phehet">High Resolution?</dt> <dd class="svelte-1phehet"><input type="checkbox" class="svelte-1phehet"/></dd>',1),ra=F('<dl class="config-column svelte-1phehet"><dt class="index svelte-1phehet"> </dt> <dt class="no-top-border svelte-1phehet">Channel</dt> <dd class="svelte-1phehet"><select class="svelte-1phehet"></select></dd> <dt class="svelte-1phehet">CC</dt> <dd class="svelte-1phehet"><input type="number" min="0" class="svelte-1phehet"/></dd> <!></dl>');function Rn(n,e){he(e,!0);let t=Ie(e,"editControl",15),r=ge(()=>t().highResolution?95:127),s=ge(()=>p.editing?ve(p.editing.deviceId):null),i=ge(()=>H(s)&&p.editing&&Re(H(s),"highResolution",p.editing.firmwareVersion));const o=Array.from({length:16},(E,b)=>b+1),u=E=>{const b=E.target;parseInt(b.value)<0&&t(t().cc=0,!0),parseInt(b.value)>H(r)&&t(t().cc=H(r),!0)},c=()=>{t().cc>H(r)&&t(t().cc=H(r),!0)},l=()=>{t(t().highResolution=!t().highResolution,!0)};var a=ra(),d=k(a),f=k(d,!0);U(d);var _=D(d,4),g=k(_);Be(g,21,()=>o,Ue,(E,b)=>{var N=ea(),L=k(N,!0);U(N);var T={};de(()=>{Ee(L,H(b)),T!==(T=H(b))&&(N.value=(N.__value=H(b))??"")}),R(E,N)}),U(g),U(_);var h=D(_,4),w=k(h);ke(w),w.__change=u,U(h);var v=D(h,2);{var A=E=>{var b=ta(),N=X(b);N.__click=l;var L=D(N,2),T=k(L);ke(T),T.__change=c,U(L),Rr("blur",T,c),qn(T,()=>t().highResolution,M=>t(t().highResolution=M,!0)),R(E,b)};W(v,E=>{H(i)&&E(A)})}U(a),de(()=>{Ee(f,e.index+1),Le(w,"max",H(r))}),Vn(g,()=>t().channel,E=>t(t().channel=E,!0)),Rr("blur",w,u),sr(w,()=>t().cc,E=>t(t().cc=E,!0)),R(n,a),me()}dr(["change","click"]);var In=Ws(()=>p),na=F(`<p>"Factory Reset" will reset the configuration of your 16n back to 'default'
  values; primarily, MIDI CCs 32-48, Channel 1, for both TRS and USB MIDI.</p> <p>Note that this will also reset any calibration data or other options you may
  have adjusted on the "Device Options" tab. You will need to repeat this
  configuration after performing a reset.</p> <!>`,1);function sa(n,e){he(e,!1);const t="Confirm that you wish to reset your controller configuration to the default values. You will lose any configuration stored on the controller.",r=()=>{Y.selectedOutput&&confirm(t)&&(In(In().editMode=!1),Qn(Y.selectedOutput),setTimeout(()=>{Y.selectedOutput&&br(Y.selectedOutput)},50))};Gn();var s=na(),i=D(X(s),4);oe(i,{icon:"history",onclick:r,$$events:{message(o){jn.call(this,e,o)}},children:(o,u)=>{J();var c=ee("Reset controller configuration to defaults");R(o,c)},$$slots:{default:!0}}),R(n,s),me()}var ia=F('<div class="subhead svelte-lw61d0"><h2 class="svelte-lw61d0"> </h2> <div class="details svelte-lw61d0"><!></div></div>');function rs(n,e){var t=ia(),r=k(t),s=k(r,!0);U(r);var i=D(r,2),o=k(i);{var u=c=>{var l=fe(),a=X(l);Ce(a,()=>e.children),R(c,l)};W(o,c=>{e.children&&c(u)})}U(i),U(t),de(()=>Ee(s,e.title)),R(n,t)}var aa=F("<p>The MIDI standard for a continuous controller sends 7-bit data - 0-127.</p> <p>âHigh resolutionâ CC data can send 14-bit data (0-16384).</p> <p>However: <strong>support for this is very limited</strong>. <em>If</em> you know you need it or can use it, go ahead, itâll work. Both Ableton and Bitwig support this automatically - map a controller to a high-resolution MIDI output and it will automatically realise itâs 14-bit.</p> <p>If you think it sounds cool, but donât know if your instruments or tools support it: you probably want to send standard 7-bit data. <strong>Donât just click high resolution because it sounds better.</strong> Unless you know itâll work, it might have unintended consequences.</p> <h4>How high-resolution CCs work</h4> <p>The 14 bits of data are split into two chunks, MSB/LSB style: one 7-bit chunk for bits 8-14, and one for bits 1-7. The higher significant chunk is sent on continuous controller number <code>x</code>; the lower significant chunk is sent on <code>x+32</code>. For instance, if you set a controller to send high-res data on CC <code>32</code> in the editor above, youâll send the higher chunk on CC <code>32</code> and, simultaneously, the lower chunk on CC <code>64</code>. (This is why you should only use this feature if you think you need it: otherwise, youâre going to be sending extra CCs you might not want.)</p> <h4>Doesnât my device have an ADC with less than 14 bits?</h4> <p>The RP2040 in 16nx devices only has a 12-bit ADC, and so the firmware actually multiples the read analog value by 4 (or left shifts it by 2, really) to get a 14-bit number. So yes, we donât have 14 ârealâ usable bits of data.</p> <p>But: a 12-bit ADC probably doesnât have <em>12</em> usable bits of data, really; one you filter out noise and jitter, you probably are working with 10 usable bits of data (ie: if you /4 or >> 2, you will filter out a lot of unwanted noise).</p> <p>But regardless: 10 usable bits - 0-1023 - is <em>still</em> better than 0-127. So thereâs an advantage to using this, if itâs available to you.</p>",1);function oa(n){var e=aa();J(18),R(n,e)}var la=F('<details class="svelte-1c3vj07"><summary class="svelte-1c3vj07">What is High Resolution mode?</summary> <!></details>');function Cn(n){var e=la(),t=D(k(e),2);oa(t),U(e),R(n,e)}var ca=F(`<div class="svelte-1eq41d2"><p><strong>Warning:</strong> </p> <p>The MIDI spec only allows for high-resolution CCs for CCs 0-31. <strong>However</strong>, some hardware or software is absolutely fine with
    high-resolution CCs on any channel. Check the documentation for your
    hardware or software; your faderbank configuration may still function
    correctly.</p></div>`);function An(n,e){he(e,!1);let t=Ie(e,"type",8);Gn();var r=ca(),s=k(r),i=D(k(s));U(s),J(2),U(r),de(o=>Ee(i,` You have an one or more out-of-spec ${o??""} CC assignments.`),[()=>($s(t()),cr(()=>t().toLocaleUpperCase()))]),R(n,r),me()}const _r={};var ua=F('<div class="tabs"><!></div>');function ns(n,e){he(e,!0);const t=[],r=[],s=Nr(null),i=Nr(null);Ds(_r,{registerTab:c=>{t.push(c),s.update(l=>l||c),wr(()=>{const l=t.indexOf(c);t.splice(l,1),s.update(a=>a===c?t[l]||t[t.length-1]:a)})},registerPanel:c=>{r.push(c),i.update(l=>l||c),wr(()=>{const l=r.indexOf(c);r.splice(l,1),i.update(a=>a===c?r[l]||r[r.length-1]:a)})},selectTab:c=>{const l=t.indexOf(c);s.set(c),i.set(r[l])},selectedTab:s,selectedPanel:i});var o=ua(),u=k(o);Ce(u,()=>e.children??Pn),U(o),R(n,o),me()}var da=F('<div class="tab-list svelte-ntiwtw"><!></div>');function ss(n,e){var t=da(),r=k(t);{var s=i=>{var o=fe(),u=X(o);Ce(u,()=>e.children),R(i,o)};W(r,i=>{e.children&&i(s)})}U(t),R(n,t)}function Te(n,e){he(e,!0);const t=()=>Bn(u,"$selectedPanel",r),[r,s]=kn(),i={},{registerPanel:o,selectedPanel:u}=Un(_r);o(i);var c=fe(),l=X(c);{var a=d=>{var f=fe(),_=X(f);Ce(_,()=>e.children),R(d,f)};W(l,d=>{e.children&&t()===i&&d(a)})}R(n,c),me(),s()}var fa=F("<button><!></button>");function Oe(n,e){he(e,!0);const t=()=>Bn(c,"$selectedTab",r),[r,s]=kn(),i={},{registerTab:o,selectTab:u,selectedTab:c}=Un(_r);o(i);var l=fa();l.__click=()=>u(i);let a;var d=k(l);Ce(d,()=>e.children??Pn),U(l),de(()=>a=fr(l,1,"svelte-1xqnf6w",null,a,{selected:t()===i})),R(n,l),me(),s()}dr(["click"]);const ha=(n,e)=>{const t=document.createElement("input");t.type="file",t.id="uploadedConfig",t.addEventListener("change",r=>{const s=r.target.files;if(s&&s.length>0){const i=s[0],o=new FileReader;o.addEventListener("load",()=>{const u=JSON.parse(o.result),c=Ti(n,u);if(c){alert(c);return}else p.editing=Oi(n,u),Jn(n,e)?alert("Imported configuration is identical to currently loaded configuration; no changes to upload."):alert("New configuration imported. Choose 'update controller' to import, or 'Cancel' to abort")}),o.readAsText(i)}}),t.click(),t.remove()},ma=n=>{const e="data:text/json;charset=utf-8,"+encodeURIComponent(Mi(n)),t=document.createElement("a");t.href=e,t.download=`${ve(n.deviceId).name}_controller_config.json`,document.body.appendChild(t),t.click(),t.remove()};var pa=F("<!> <!> <!>",1),Ea=F("<!> <!> <!> <!>",1),va=F("<!><br/> <!>",1),ga=F("<!> <!>",1),ba=F('<div id="controls" class="svelte-fw2742"></div> <div id="extra-controls" class="svelte-fw2742"><div class="left svelte-fw2742"><!><br/> <!></div> <div class="right svelte-fw2742"><!></div></div> <!>',1),_a=F("<!><br/> <!>",1),Na=F("<!> <!>",1),wa=F('<div id="controls" class="svelte-fw2742"></div> <div id="extra-controls" class="svelte-fw2742"><div class="left svelte-fw2742"><!><br/> <!></div> <div class="right svelte-fw2742"><!></div></div> <!>',1),ya=F("<!> <!> <!> <!> <!>",1),Sa=F("<!> <!>",1);function Ra(n,e){he(e,!0);let t=tr(!1);ur(()=>{p.editing&&p.current&&Ae(t,!Jn(p.editing,p.current))});const r=()=>{p.editMode=!1},s=()=>{p.editing&&p.current&&ha(p.editing,p.current)},i=()=>{if(!p.editing){console.error("No edit configuration found");return}if(!Y.selectedOutput){console.error("No selected MIDI output found");return}Fe(p.editing),Di(p.editing,Y.selectedOutput),p.current=structuredClone(rr(p.editing)),p.editMode=!1,br(Y.selectedOutput)};let o=ge(()=>p.current?ve(p.current.deviceId):null),u=ge(()=>p.editing&&H(o)&&Re(H(o),"highResolution",p.editing.firmwareVersion)),c=ge(()=>p.editing&&p.editing.usbControls.some(v=>v.highResolution&&v.cc>31)),l=ge(()=>p.editing&&p.editing.trsControls.some(v=>v.highResolution&&v.cc>31));const a=(v,A)=>{var E,b;A=="usb"&&((E=p.editing)==null||E.usbControls.forEach(N=>{N.highResolution=v})),A=="trs"&&((b=p.editing)==null||b.trsControls.forEach(N=>{N.highResolution=v}))},d=v=>{if(!p.editing){console.error("No configuration to update");return}if(v=="usb"){const A=p.editing.usbControls[0].channel;for(let E=1;E<p.editing.usbControls.length;E++)p.editing.usbControls[E].channel=A}if(v=="trs"){const A=p.editing.trsControls[0].channel;for(let E=1;E<p.editing.trsControls.length;E++)p.editing.trsControls[E].channel=A}},f=v=>{if(!p.editing){console.error("No configuration to update");return}if(v=="usb"){const A=p.editing.usbControls[0].cc;for(let E=1;E<p.editing.usbControls.length;E++){let b=A+E,N=p.editing.usbControls[E].highResolution?95:127;p.editing.usbControls[E].cc=b>N?N:b}}if(v=="trs"){const A=p.editing.trsControls[0].cc;for(let E=1;E<p.editing.trsControls.length;E++){let b=A+E,N=p.editing.trsControls[E].highResolution?95:127;p.editing.usbControls[E].cc=b>N?N:b}}};var _=Sa(),g=X(_);rs(g,{title:"Edit Configuration",children:(v,A)=>{var E=pa(),b=X(E);oe(b,{icon:"times",onclick:r,children:(T,M)=>{J();var G=ee("Cancel");R(T,G)},$$slots:{default:!0}});var N=D(b,2);oe(N,{icon:"file-import",onclick:s,children:(T,M)=>{J();var G=ee("Import config");R(T,G)},$$slots:{default:!0}});var L=D(N,2);{let T=ge(()=>!H(t));oe(L,{icon:"download",onclick:i,get disabled(){return H(T)},children:(M,G)=>{J();var te=ee("Update controller");R(M,te)},$$slots:{default:!0}})}R(v,E)}});var h=D(g,2);{var w=v=>{ns(v,{children:(A,E)=>{var b=ya(),N=X(b);ss(N,{children:(Z,re)=>{var ne=Ea(),S=X(ne);Oe(S,{children:(O,B)=>{J();var j=ee("USB");R(O,j)},$$slots:{default:!0}});var y=D(S,2);Oe(y,{children:(O,B)=>{J();var j=ee("TRS Jack");R(O,j)},$$slots:{default:!0}});var x=D(y,2);Oe(x,{children:(O,B)=>{J();var j=ee("Device Options");R(O,j)},$$slots:{default:!0}});var $=D(x,2);{var P=O=>{Oe(O,{children:(B,j)=>{J();var V=ee("Factory Reset");R(B,V)},$$slots:{default:!0}})};W($,O=>{p.current&&$e.gte(p.current.firmwareVersion,"2.1.0")&&O(P)})}R(Z,ne)}});var L=D(N,2);Te(L,{children:(Z,re)=>{var ne=ba(),S=X(ne);Be(S,21,()=>p.editing.usbControls,Ue,(q,z,K)=>{var pe=fe(),se=X(pe);{var ie=ae=>{Rn(ae,{get editControl(){return H(z)},index:K})};W(se,ae=>{H(o)&&K<H(o).controlCount&&ae(ie)})}R(q,pe)}),U(S);var y=D(S,2),x=k(y),$=k(x);oe($,{onclick:()=>d("usb"),children:(q,z)=>{J();var K=ee("Set all channels to that of channel 1");R(q,K)},$$slots:{default:!0}});var P=D($,3);oe(P,{onclick:()=>f("usb"),children:(q,z)=>{J();var K=ee("Set CCs sequentially, starting at channel 1");R(q,K)},$$slots:{default:!0}}),U(x);var O=D(x,2),B=k(O);{var j=q=>{var z=va(),K=X(z);oe(K,{onclick:()=>a(!0,"usb"),children:(se,ie)=>{J();var ae=ee("Set all USB channels to high-resolution (14 bit)");R(se,ae)},$$slots:{default:!0}});var pe=D(K,3);oe(pe,{onclick:()=>a(!1,"usb"),children:(se,ie)=>{J();var ae=ee("Set all USB channels to regular-resolution (7 bit)");R(se,ae)},$$slots:{default:!0}}),R(q,z)};W(B,q=>{H(u)&&q(j)})}U(O),U(y);var V=D(y,2);{var Q=q=>{var z=ga(),K=X(z);{var pe=ie=>{An(ie,{type:"usb"})};W(K,ie=>{H(c)&&ie(pe)})}var se=D(K,2);Cn(se),R(q,z)};W(V,q=>{H(u)&&q(Q)})}R(Z,ne)},$$slots:{default:!0}});var T=D(L,2);Te(T,{children:(Z,re)=>{var ne=wa(),S=X(ne);Be(S,21,()=>p.editing.trsControls,Ue,(q,z,K)=>{var pe=fe(),se=X(pe);{var ie=ae=>{Rn(ae,{get editControl(){return H(z)},index:K})};W(se,ae=>{H(o)&&K<H(o).controlCount&&ae(ie)})}R(q,pe)}),U(S);var y=D(S,2),x=k(y),$=k(x);oe($,{onclick:()=>d("trs"),children:(q,z)=>{J();var K=ee("Set all channels to that of channel 1");R(q,K)},$$slots:{default:!0}});var P=D($,3);oe(P,{onclick:()=>f("trs"),children:(q,z)=>{J();var K=ee("Set CCs sequentially, starting at channel 1");R(q,K)},$$slots:{default:!0}}),U(x);var O=D(x,2),B=k(O);{var j=q=>{var z=_a(),K=X(z);oe(K,{onclick:()=>a(!0,"trs"),children:(se,ie)=>{J();var ae=ee("Set all TRS channels to high-resolution (14 bit)");R(se,ae)},$$slots:{default:!0}});var pe=D(K,3);oe(pe,{onclick:()=>a(!1,"trs"),children:(se,ie)=>{J();var ae=ee("Set all TRS channels to regular-resolution (7 bit)");R(se,ae)},$$slots:{default:!0}}),R(q,z)};W(B,q=>{H(u)&&q(j)})}U(O),U(y);var V=D(y,2);{var Q=q=>{var z=Na(),K=X(z);{var pe=ie=>{An(ie,{type:"trs"})};W(K,ie=>{H(l)&&ie(pe)})}var se=D(K,2);Cn(se),R(q,z)};W(V,q=>{H(u)&&q(Q)})}R(Z,ne)},$$slots:{default:!0}});var M=D(T,2);Te(M,{children:(Z,re)=>{Zi(Z,{})},$$slots:{default:!0}});var G=D(M,2);{var te=Z=>{Te(Z,{children:(re,ne)=>{sa(re,{$$events:{message(S){jn.call(this,e,S)}}})},$$slots:{default:!0}})};W(G,Z=>{p.current&&$e.gte(p.current.firmwareVersion,"2.1.0")&&Z(te)})}R(A,b)},$$slots:{default:!0}})};W(h,v=>{p.editing&&v(w)})}R(n,_),me()}var Ia=F(`<span class="hires svelte-1tllpw1" title="This channel is in high-resolution mode, meaning it also uses a 'shadow' CC, 32 above the main CC"> </span>`),Ca=F("<span> </span>"),Aa=F('<dt class="svelte-1tllpw1">Value</dt> <dd class="display svelte-1tllpw1"><div class="inner svelte-1tllpw1"><!> <div class="bar svelte-1tllpw1"></div></div></dd>',1),Ma=F('<dl class="config-column svelte-1tllpw1"><dt class="index svelte-1tllpw1"> </dt> <dt class="svelte-1tllpw1">Channel</dt> <dd class="svelte-1tllpw1"> </dd> <dt class="svelte-1tllpw1">CC</dt> <dd class="svelte-1tllpw1"> <!></dd> <!></dl>');function Mn(n,e){he(e,!0);let t=Ie(e,"disableValue",3,!1),r=ge(()=>e.control.highResolution?(e.control.val||0)>>7:e.control.val),s=ge(()=>e.control.highResolution?3456:27);var i=Ma(),o=k(i),u=k(o,!0);U(o);var c=D(o,4),l=k(c,!0);U(c);var a=D(c,4),d=k(a),f=D(d);{var _=w=>{var v=Ia(),A=k(v);U(v),de(()=>Ee(A,`& ${e.control.cc+32}`)),R(w,v)};W(f,w=>{e.control.highResolution&&w(_)})}U(a);var g=D(a,2);{var h=w=>{var v=Aa(),A=D(X(v),2),E=k(A),b=k(E);{var N=T=>{var M=Ca(),G=k(M,!0);U(M),de(()=>{fr(M,1,Gs({controlval:!0,highresolution:e.control.highResolution,lowvalue:e.control.val<H(s)}),"svelte-1tllpw1"),Ee(G,e.control.val)}),R(T,M)};W(b,T=>{e.control.val!==void 0&&T(N)})}var L=D(b,2);U(E),U(A),de(()=>Vs(L,`height: ${H(r)??""}px`)),R(w,v)};W(g,w=>{t()||w(h)})}U(i),de(()=>{Ee(u,e.index+1),Ee(l,e.control.channel),Ee(d,`${e.control.cc??""} `)}),R(n,i),me()}var Ta=F("<!> <!>",1),Oa=F("<!> <!>",1),La=F('<div id="controls" class="svelte-1mg5n4d"></div>'),$a=F('<div id="controls" class="svelte-1mg5n4d"></div> <p>There is no realtime preview of the TRS outputs.</p>',1),Da=F("<!> <!> <!>",1),xa=F("<!> <!>",1);function Pa(n,e){he(e,!0);const t=()=>{p.current&&(ma(rr(p.current)),console.log("Export complete"))},r=()=>{p.editMode=!0,p.current&&(p.editing=structuredClone(rr(p.current)))};let s=ge(()=>p.current?ve(p.current.deviceId):null);var i=fe(),o=X(i);{var u=c=>{var l=xa(),a=X(l);rs(a,{title:"Current Configuration",children:(f,_)=>{var g=Ta(),h=X(g);oe(h,{icon:"file-export",onclick:t,children:(v,A)=>{J();var E=ee("Export current config");R(v,E)},$$slots:{default:!0}});var w=D(h,2);oe(w,{icon:"pencil-alt",onclick:r,children:(v,A)=>{J();var E=ee("Edit config");R(v,E)},$$slots:{default:!0}}),R(f,g)}});var d=D(a,2);ns(d,{children:(f,_)=>{var g=Da(),h=X(g);ss(h,{children:(A,E)=>{var b=Oa(),N=X(b);Oe(N,{children:(T,M)=>{J();var G=ee("USB");R(T,G)},$$slots:{default:!0}});var L=D(N,2);Oe(L,{children:(T,M)=>{J();var G=ee("TRS Jack");R(T,G)},$$slots:{default:!0}}),R(A,b)}});var w=D(h,2);Te(w,{children:(A,E)=>{var b=La();Be(b,21,()=>p.current.usbControls,Ue,(N,L,T)=>{var M=fe(),G=X(M);{var te=Z=>{Mn(Z,{get control(){return H(L)},index:T})};W(G,Z=>{H(s)&&T<H(s).controlCount&&Z(te)})}R(N,M)}),U(b),R(A,b)},$$slots:{default:!0}});var v=D(w,2);Te(v,{children:(A,E)=>{var b=$a(),N=X(b);Be(N,21,()=>p.current.trsControls,Ue,(L,T,M)=>{var G=fe(),te=X(G);{var Z=re=>{Mn(re,{get control(){return H(T)},index:M,disableValue:!0})};W(te,re=>{H(s)&&M<H(s).controlCount&&re(Z)})}R(L,G)}),U(N),J(2),R(A,b)},$$slots:{default:!0}}),R(f,g)},$$slots:{default:!0}}),R(c,l)};W(o,c=>{p.current&&c(u)})}R(n,i),me()}var Ua=F(`<div class="notice svelte-1uha8ag"><p>It looks like a 16n is trying to connect, but may have a corrupt
              memory.</p> <p><!></p></div>`),Ba=F("<!> <p></p>",1),ka=F('<p class="notice svelte-1uha8ag">Connect a controller via USB.</p>'),Ga=F(`<p class="notice svelte-1uha8ag">WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.</p>`),Fa=F('<main class="svelte-1uha8ag"><div id="head" class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">16n configuration tool</h1> <!></div> <div id="inner" class="svelte-1uha8ag"><!></div> <div id="foot" class="svelte-1uha8ag"><div class="foot-left svelte-1uha8ag"> </div></div></main>');function Wa(n,e){he(e,!0);const t="2.1.3",r=!!navigator.requestMIDIAccess;is(()=>{r&&I.enable({sysex:!0}).then(Ui).catch(h=>alert(h))}),ur(()=>{Y.selectedInput&&(Y.inputs.forEach(h=>{h.removeListener()}),es(Y.selectedInput),ts(Y.selectedInput),p.current=null,ar()),Y.selectedOutput&&(p.current=null,ar())});const s=()=>{Y.selectedOutput&&Qn(Y.selectedOutput)};var i=Fa(),o=k(i),u=D(k(o),2);Yi(u,{}),U(o);var c=D(o,2),l=k(c);{var a=h=>{var w=fe(),v=X(w);{var A=b=>{var N=fe(),L=X(N);{var T=G=>{var te=Ua(),Z=D(k(te),2),re=k(Z);oe(re,{onclick:s,children:(ne,S)=>{J();var y=ee("Click to reset your 16n's EEPROM to factory defaults");R(ne,y)},$$slots:{default:!0}}),U(Z),U(te),R(G,te)},M=G=>{var te=Ba(),Z=X(te);{var re=S=>{Ra(S,{})},ne=S=>{Pa(S,{})};W(Z,S=>{p.editMode?S(re):S(ne,!1)})}J(2),R(G,te)};W(L,G=>{p.controllerMightNeedFactoryReset&&$e.gte(p.current.firmwareVersion,"2.1.0")?G(T):G(M,!1)})}R(b,N)},E=b=>{var N=ka();R(b,N)};W(v,b=>{p.current?b(A):b(E,!1)})}R(h,w)},d=h=>{var w=Ga();R(h,w)};W(l,h=>{Y.webMidiEnabled?h(a):h(d,!1)})}U(c);var f=D(c,2),_=k(f),g=k(_);U(_),U(f),U(i),de(()=>Ee(g,`16n Editor v${t}`)),R(n,i),me()}export{Wa as component};
