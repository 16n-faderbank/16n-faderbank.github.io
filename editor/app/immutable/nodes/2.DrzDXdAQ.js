import{a as y,t as G,c as he,d as ee}from"../chunks/disclose-version.Dfzzplht.js";import{K as er,J as Nn,A as Zn,h as pe,O as Qe,ad as es,an as ts,L as rs,b as ns,al as yn,M as ss,N as hr,P as Ze,c as $e,ah as is,aw as qe,Q as Rn,a as Sn,R as as,H as mr,ax as os,ay as ls,ak as cs,az as us,d as ds,a9 as fs,V as hs,C as Xt,aA as ms,aB as ps,aC as vs,af as Es,aD as gs,aE as bs,aF as _s,g as wn,as as In,aG as Ns,ar as Cn,F as Ce,j as F,w as fe,q as se,x as U,z as $,y as k,v as ie,u as tr,t as Y,av as Wt,o as Ee,aH as J,aI as ys,n as An,aJ as Mn}from"../chunks/runtime.pYtt92vo.js";import{b as Rs,a as rr,p as Se,i as X,s as Tn,c as On}from"../chunks/props.MA-vMUh3.js";import{a as pr,o as Ss}from"../chunks/index-client.BGVp1O-U.js";import{a as ws,l as nr,d as sr,s as ge,e as vr}from"../chunks/render.CVT43fqN.js";import{s as Ie}from"../chunks/snippet.DtzI01mL.js";import{i as Ln}from"../chunks/legacy.uLF22_Nc.js";import{w as Er}from"../chunks/index.CmbX1Hjd.js";const Is=[];function Kt(n,e=!1){return Ve(n,new Map,"",Is)}function Ve(n,e,t,r,s=null){if(typeof n=="object"&&n!==null){var i=e.get(n);if(i!==void 0)return i;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(er(n)){var o=Array(n.length);e.set(n,o),s!==null&&e.set(s,o);for(var c=0;c<n.length;c+=1){var l=n[c];c in n&&(o[c]=Ve(l,e,t,r))}return o}if(Nn(n)===Zn){o={},e.set(n,o),s!==null&&e.set(s,o);for(var a in n)o[a]=Ve(n[a],e,t,r);return o}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function")return Ve(n.toJSON(),e,t,r,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}function De(n,e){return e}function Cs(n,e,t,r){for(var s=[],i=e.length,o=0;o<i;o++)ls(e[o].e,s,!0);var c=i>0&&s.length===0&&t!==null;if(c){var l=t.parentNode;cs(l),l.append(t),r.clear(),ye(n,e[0].prev,e[i-1].next)}us(s,()=>{for(var a=0;a<i;a++){var d=e[a];c||(r.delete(d.k),ye(n,d.prev,d.next)),ds(d.e,!c)}})}function Pe(n,e,t,r,s,i=null){var o=n,c={flags:e,items:new Map,first:null};{var l=n;o=pe?Qe(es(l)):l.appendChild(ts())}pe&&rs();var a=null,d=!1;ns(()=>{var u=t(),h=er(u)?u:u==null?[]:yn(u),v=h.length;if(d&&v===0)return;d=v===0;let f=!1;if(pe){var I=o.data===ss;I!==(v===0)&&(o=hr(),Qe(o),Ze(!1),f=!0)}if(pe){for(var C=null,b,g=0;g<v;g++){if($e.nodeType===8&&$e.data===is){o=$e,f=!0,Ze(!1);break}var m=h[g],N=r(m,g);b=$n($e,c,C,null,m,N,g,s,e),c.items.set(N,b),C=b}v>0&&Qe(hr())}if(!pe){var w=fs;As(h,c,o,s,e,(w.f&qe)!==0,r)}i!==null&&(v===0?a?Rn(a):a=Sn(()=>i(o)):a!==null&&as(a,()=>{a=null})),f&&Ze(!0),t()}),pe&&(o=$e)}function As(n,e,t,r,s,i,o,c){var l=n.length,a=e.items,d=e.first,u=d,h,v=null,f=[],I=[],C,b,g,m;for(m=0;m<l;m+=1){if(C=n[m],b=o(C,m),g=a.get(b),g===void 0){var N=u?u.e.nodes_start:t;v=$n(N,e,v,v===null?e.first:v.next,C,b,m,r,s),a.set(b,v),f=[],I=[],u=v.next;continue}if(Ms(g,C,m),g.e.f&qe&&Rn(g.e),g!==u){if(h!==void 0&&h.has(g)){if(f.length<I.length){var w=I[0],T;v=w.prev;var D=f[0],M=f[f.length-1];for(T=0;T<f.length;T+=1)gr(f[T],w,t);for(T=0;T<I.length;T+=1)h.delete(I[T]);ye(e,D.prev,M.next),ye(e,v,D),ye(e,M,w),u=w,v=M,m-=1,f=[],I=[]}else h.delete(g),gr(g,u,t),ye(e,g.prev,g.next),ye(e,g,v===null?e.first:v.next),ye(e,v,g),v=g;continue}for(f=[],I=[];u!==null&&u.k!==b;)(i||!(u.e.f&qe))&&(h??(h=new Set)).add(u),I.push(u),u=u.next;if(u===null)continue;g=u}f.push(g),v=g,u=g.next}if(u!==null||h!==void 0){for(var W=h===void 0?[]:yn(h);u!==null;)(i||!(u.e.f&qe))&&W.push(u),u=u.next;var te=W.length;if(te>0){var Z=l===0?t:null;Cs(e,W,Z,a)}}mr.first=e.first&&e.first.e,mr.last=v&&v.e}function Ms(n,e,t,r){os(n.v,e),n.i=t}function $n(n,e,t,r,s,i,o,c,l,a){var d=(l&ps)!==0,u=(l&vs)===0,h=d?u?hs(s):Xt(s):s,v=l&ms?Xt(o):o,f={i:v,v:h,k:i,a:null,e:null,prev:t,next:r};try{return f.e=Sn(()=>c(n,h,v),pe),f.e.prev=t&&t.e,f.e.next=r&&r.e,t===null?e.first=f:(t.next=f,t.e.next=f.e),r!==null&&(r.prev=f,r.e.prev=f.e),f}finally{}}function gr(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,s=e?e.e.nodes_start:t,i=n.e.nodes_start;i!==r;){var o=Es(i);s.before(i),i=o}}function ye(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function xn(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=xn(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Ts(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=xn(n))&&(r&&(r+=" "),r+=e);return r}function Os(n){return typeof n=="object"?Ts(n):n??""}function ke(n){if(pe){var e=!1,t=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var r=n.value;we(n,"value",null),n.value=r}if(n.hasAttribute("checked")){var s=n.checked;we(n,"checked",null),n.checked=s}}};n.__on_r=t,bs(t),ws()}}function we(n,e,t,r){var s=n.__attributes??(n.__attributes={});pe&&(s[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||s[e]!==(s[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[_s]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Ls(n).includes(e)?n[e]=t:n.setAttribute(e,t))}var br=new Map;function Ls(n){var e=br.get(n.nodeName);if(e)return e;br.set(n.nodeName,e=[]);for(var t,r=n,s=Element.prototype;s!==r;){t=gs(r);for(var i in t)t[i].set&&e.push(i);r=Nn(r)}return e}function Dn(n,e,t){var r=n.__className,s=$s(e,t);pe&&n.className===s?n.__className=s:(r!==s||pe&&n.className!==s)&&(e==null&&!t?n.removeAttribute("class"):n.className=s,n.__className=s)}function $s(n,e){return(n??"")+(e?" "+e:"")}function xs(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}function Jt(n,e,t=e){var r=Ns();nr(n,"input",s=>{var i=s?n.defaultValue:n.value;if(i=et(n)?tt(i):i,t(i),r&&i!==(i=e())){var o=n.selectionStart,c=n.selectionEnd;n.value=i??"",c!==null&&(n.selectionStart=o,n.selectionEnd=Math.min(c,n.value.length))}}),(pe&&n.defaultValue!==n.value||wn(e)==null&&n.value)&&t(et(n)?tt(n.value):n.value),In(()=>{var s=e();et(n)&&s===tt(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}function Pn(n,e,t=e){nr(n,"change",r=>{var s=r?n.defaultChecked:n.checked;t(s)}),(pe&&n.defaultChecked!==n.checked||wn(e)==null)&&t(n.checked),In(()=>{var r=e();n.checked=!!r})}function et(n){var e=n.type;return e==="number"||e==="range"}function tt(n){return n===""?null:+n}function kn(n,e,t){if(n.multiple)return Ps(n,e);for(var r of n.options){var s=xe(r);if(Rs(s,e)){r.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function Ds(n,e){Cn(()=>{var t=new MutationObserver(()=>{var r=n.__value;kn(n,r)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Bn(n,e,t=e){var r=!0;nr(n,"change",s=>{var i=s?"[selected]":":checked",o;if(n.multiple)o=[].map.call(n.querySelectorAll(i),xe);else{var c=n.querySelector(i)??n.querySelector("option:not([disabled])");o=c&&xe(c)}t(o)}),Cn(()=>{var s=e();if(kn(n,s,r),r&&s===void 0){var i=n.querySelector(":checked");i!==null&&(s=xe(i),t(s))}n.__value=s,r=!1}),Ds(n)}function Ps(n,e){for(var t of n.options)t.selected=~e.indexOf(xe(t))}function xe(n){return"__value"in n?n.__value:n.value}function ks(n){var e=Xt(0);return function(){return arguments.length===1?(Ce(e,F(e)+1),arguments[0]):(F(e),n())}}function Un(n,e){var i;var t=(i=n.$$events)==null?void 0:i[e.type],r=er(t)?t.slice():t==null?[]:[t];for(var s of r)s.call(this,e)}var Ge={exports:{}},rt,_r;function Ye(){if(_r)return rt;_r=1;const n="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=e-6;return rt={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},rt}var nt,Nr;function Xe(){if(Nr)return nt;Nr=1;var n={};return nt=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},nt}var yr;function Be(){return yr||(yr=1,function(n,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=Ye(),i=Xe();e=n.exports={};const o=e.re=[],c=e.safeRe=[],l=e.src=[],a=e.t={};let d=0;const u="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[u,r]],v=I=>{for(const[C,b]of h)I=I.split(`${C}*`).join(`${C}{0,${b}}`).split(`${C}+`).join(`${C}{1,${b}}`);return I},f=(I,C,b)=>{const g=v(C),m=d++;i(I,m,C),a[I]=m,l[m]=C,o[m]=new RegExp(C,b?"g":void 0),c[m]=new RegExp(g,b?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),f("MAINVERSION",`(${l[a.NUMERICIDENTIFIER]})\\.(${l[a.NUMERICIDENTIFIER]})\\.(${l[a.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[a.NUMERICIDENTIFIERLOOSE]})\\.(${l[a.NUMERICIDENTIFIERLOOSE]})\\.(${l[a.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[a.NUMERICIDENTIFIER]}|${l[a.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[a.NUMERICIDENTIFIERLOOSE]}|${l[a.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[a.PRERELEASEIDENTIFIER]}(?:\\.${l[a.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[a.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${u}+`),f("BUILD",`(?:\\+(${l[a.BUILDIDENTIFIER]}(?:\\.${l[a.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[a.MAINVERSION]}${l[a.PRERELEASE]}?${l[a.BUILD]}?`),f("FULL",`^${l[a.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[a.MAINVERSIONLOOSE]}${l[a.PRERELEASELOOSE]}?${l[a.BUILD]}?`),f("LOOSE",`^${l[a.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[a.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[a.XRANGEIDENTIFIER]})(?:\\.(${l[a.XRANGEIDENTIFIER]})(?:\\.(${l[a.XRANGEIDENTIFIER]})(?:${l[a.PRERELEASE]})?${l[a.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[a.XRANGEIDENTIFIERLOOSE]})(?:${l[a.PRERELEASELOOSE]})?${l[a.BUILD]}?)?)?`),f("XRANGE",`^${l[a.GTLT]}\\s*${l[a.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[a.GTLT]}\\s*${l[a.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),f("COERCE",`${l[a.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",l[a.COERCEPLAIN]+`(?:${l[a.PRERELEASE]})?(?:${l[a.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",l[a.COERCE],!0),f("COERCERTLFULL",l[a.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",f("TILDE",`^${l[a.LONETILDE]}${l[a.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[a.LONETILDE]}${l[a.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",f("CARET",`^${l[a.LONECARET]}${l[a.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[a.LONECARET]}${l[a.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[a.GTLT]}\\s*(${l[a.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[a.GTLT]}\\s*(${l[a.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[a.GTLT]}\\s*(${l[a.LOOSEPLAIN]}|${l[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[a.XRANGEPLAIN]})\\s+-\\s+(${l[a.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[a.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Ge,Ge.exports)),Ge.exports}var st,Rr;function ir(){if(Rr)return st;Rr=1;const n=Object.freeze({loose:!0}),e=Object.freeze({});return st=r=>r?typeof r!="object"?n:r:e,st}var it,Sr;function Gn(){if(Sr)return it;Sr=1;const n=/^[0-9]+$/,e=(r,s)=>{const i=n.test(r),o=n.test(s);return i&&o&&(r=+r,s=+s),r===s?0:i&&!o?-1:o&&!i?1:r<s?-1:1};return it={compareIdentifiers:e,rcompareIdentifiers:(r,s)=>e(s,r)},it}var at,wr;function de(){if(wr)return at;wr=1;const n=Xe(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=Ye(),{safeRe:r,t:s}=Be(),i=ir(),{compareIdentifiers:o}=Gn();class c{constructor(a,d){if(d=i(d),a instanceof c){if(a.loose===!!d.loose&&a.includePrerelease===!!d.includePrerelease)return a;a=a.version}else if(typeof a!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>e)throw new TypeError(`version is longer than ${e} characters`);n("SemVer",a,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const u=a.trim().match(d.loose?r[s.LOOSE]:r[s.FULL]);if(!u)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const v=+h;if(v>=0&&v<t)return v}return h}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(n("SemVer.compare",this.version,this.options,a),!(a instanceof c)){if(typeof a=="string"&&a===this.version)return 0;a=new c(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return a instanceof c||(a=new c(a,this.options)),o(this.major,a.major)||o(this.minor,a.minor)||o(this.patch,a.patch)}comparePre(a){if(a instanceof c||(a=new c(a,this.options)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let d=0;do{const u=this.prerelease[d],h=a.prerelease[d];if(n("prerelease compare",d,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return o(u,h)}while(++d)}compareBuild(a){a instanceof c||(a=new c(a,this.options));let d=0;do{const u=this.build[d],h=a.build[d];if(n("build compare",d,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return o(u,h)}while(++d)}inc(a,d,u){switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,u),this.inc("pre",d,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,u),this.inc("pre",d,u);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(u)?1:0;if(!d&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[h];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(d===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(d){let v=[d,h];u===!1&&(v=[d]),o(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return at=c,at}var ot,Ir;function Le(){if(Ir)return ot;Ir=1;const n=de();return ot=(t,r,s=!1)=>{if(t instanceof n)return t;try{return new n(t,r)}catch(i){if(!s)return null;throw i}},ot}var lt,Cr;function Bs(){if(Cr)return lt;Cr=1;const n=Le();return lt=(t,r)=>{const s=n(t,r);return s?s.version:null},lt}var ct,Ar;function Us(){if(Ar)return ct;Ar=1;const n=Le();return ct=(t,r)=>{const s=n(t.trim().replace(/^[=v]+/,""),r);return s?s.version:null},ct}var ut,Mr;function Gs(){if(Mr)return ut;Mr=1;const n=de();return ut=(t,r,s,i,o)=>{typeof s=="string"&&(o=i,i=s,s=void 0);try{return new n(t instanceof n?t.version:t,s).inc(r,i,o).version}catch{return null}},ut}var dt,Tr;function Fs(){if(Tr)return dt;Tr=1;const n=Le();return dt=(t,r)=>{const s=n(t,null,!0),i=n(r,null,!0),o=s.compare(i);if(o===0)return null;const c=o>0,l=c?s:i,a=c?i:s,d=!!l.prerelease.length;if(!!a.prerelease.length&&!d)return!a.patch&&!a.minor?"major":l.patch?"patch":l.minor?"minor":"major";const h=d?"pre":"";return s.major!==i.major?h+"major":s.minor!==i.minor?h+"minor":s.patch!==i.patch?h+"patch":"prerelease"},dt}var ft,Or;function Hs(){if(Or)return ft;Or=1;const n=de();return ft=(t,r)=>new n(t,r).major,ft}var ht,Lr;function qs(){if(Lr)return ht;Lr=1;const n=de();return ht=(t,r)=>new n(t,r).minor,ht}var mt,$r;function Vs(){if($r)return mt;$r=1;const n=de();return mt=(t,r)=>new n(t,r).patch,mt}var pt,xr;function js(){if(xr)return pt;xr=1;const n=Le();return pt=(t,r)=>{const s=n(t,r);return s&&s.prerelease.length?s.prerelease:null},pt}var vt,Dr;function _e(){if(Dr)return vt;Dr=1;const n=de();return vt=(t,r,s)=>new n(t,s).compare(new n(r,s)),vt}var Et,Pr;function zs(){if(Pr)return Et;Pr=1;const n=_e();return Et=(t,r,s)=>n(r,t,s),Et}var gt,kr;function Ys(){if(kr)return gt;kr=1;const n=_e();return gt=(t,r)=>n(t,r,!0),gt}var bt,Br;function ar(){if(Br)return bt;Br=1;const n=de();return bt=(t,r,s)=>{const i=new n(t,s),o=new n(r,s);return i.compare(o)||i.compareBuild(o)},bt}var _t,Ur;function Xs(){if(Ur)return _t;Ur=1;const n=ar();return _t=(t,r)=>t.sort((s,i)=>n(s,i,r)),_t}var Nt,Gr;function Ws(){if(Gr)return Nt;Gr=1;const n=ar();return Nt=(t,r)=>t.sort((s,i)=>n(i,s,r)),Nt}var yt,Fr;function We(){if(Fr)return yt;Fr=1;const n=_e();return yt=(t,r,s)=>n(t,r,s)>0,yt}var Rt,Hr;function or(){if(Hr)return Rt;Hr=1;const n=_e();return Rt=(t,r,s)=>n(t,r,s)<0,Rt}var St,qr;function Fn(){if(qr)return St;qr=1;const n=_e();return St=(t,r,s)=>n(t,r,s)===0,St}var wt,Vr;function Hn(){if(Vr)return wt;Vr=1;const n=_e();return wt=(t,r,s)=>n(t,r,s)!==0,wt}var It,jr;function lr(){if(jr)return It;jr=1;const n=_e();return It=(t,r,s)=>n(t,r,s)>=0,It}var Ct,zr;function cr(){if(zr)return Ct;zr=1;const n=_e();return Ct=(t,r,s)=>n(t,r,s)<=0,Ct}var At,Yr;function qn(){if(Yr)return At;Yr=1;const n=Fn(),e=Hn(),t=We(),r=lr(),s=or(),i=cr();return At=(c,l,a,d)=>{switch(l){case"===":return typeof c=="object"&&(c=c.version),typeof a=="object"&&(a=a.version),c===a;case"!==":return typeof c=="object"&&(c=c.version),typeof a=="object"&&(a=a.version),c!==a;case"":case"=":case"==":return n(c,a,d);case"!=":return e(c,a,d);case">":return t(c,a,d);case">=":return r(c,a,d);case"<":return s(c,a,d);case"<=":return i(c,a,d);default:throw new TypeError(`Invalid operator: ${l}`)}},At}var Mt,Xr;function Ks(){if(Xr)return Mt;Xr=1;const n=de(),e=Le(),{safeRe:t,t:r}=Be();return Mt=(i,o)=>{if(i instanceof n)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;o=o||{};let c=null;if(!o.rtl)c=i.match(o.includePrerelease?t[r.COERCEFULL]:t[r.COERCE]);else{const v=o.includePrerelease?t[r.COERCERTLFULL]:t[r.COERCERTL];let f;for(;(f=v.exec(i))&&(!c||c.index+c[0].length!==i.length);)(!c||f.index+f[0].length!==c.index+c[0].length)&&(c=f),v.lastIndex=f.index+f[1].length+f[2].length;v.lastIndex=-1}if(c===null)return null;const l=c[2],a=c[3]||"0",d=c[4]||"0",u=o.includePrerelease&&c[5]?`-${c[5]}`:"",h=o.includePrerelease&&c[6]?`+${c[6]}`:"";return e(`${l}.${a}.${d}${u}${h}`,o)},Mt}var Tt,Wr;function Js(){if(Wr)return Tt;Wr=1;class n{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}}return Tt=n,Tt}var Ot,Kr;function Ne(){if(Kr)return Ot;Kr=1;const n=/\s+/g;class e{constructor(_,x){if(x=s(x),_ instanceof e)return _.loose===!!x.loose&&_.includePrerelease===!!x.includePrerelease?_:new e(_.raw,x);if(_ instanceof i)return this.raw=_.value,this.set=[[_]],this.formatted=void 0,this;if(this.options=x,this.loose=!!x.loose,this.includePrerelease=!!x.includePrerelease,this.raw=_.trim().replace(n," "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(P=>!I(P[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const P of this.set)if(P.length===1&&C(P[0])){this.set=[P];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let _=0;_<this.set.length;_++){_>0&&(this.formatted+="||");const x=this.set[_];for(let L=0;L<x.length;L++)L>0&&(this.formatted+=" "),this.formatted+=x[L].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(_){const L=((this.options.includePrerelease&&v)|(this.options.loose&&f))+":"+_,P=r.get(L);if(P)return P;const O=this.options.loose,B=O?l[a.HYPHENRANGELOOSE]:l[a.HYPHENRANGE];_=_.replace(B,ne(this.options.includePrerelease)),o("hyphen replace",_),_=_.replace(l[a.COMPARATORTRIM],d),o("comparator trim",_),_=_.replace(l[a.TILDETRIM],u),o("tilde trim",_),_=_.replace(l[a.CARETTRIM],h),o("caret trim",_);let V=_.split(" ").map(j=>g(j,this.options)).join(" ").split(/\s+/).map(j=>Z(j,this.options));O&&(V=V.filter(j=>(o("loose invalid filter",j,this.options),!!j.match(l[a.COMPARATORLOOSE])))),o("range list",V);const H=new Map,Q=V.map(j=>new i(j,this.options));for(const j of Q){if(I(j))return[j];H.set(j.value,j)}H.size>1&&H.has("")&&H.delete("");const q=[...H.values()];return r.set(L,q),q}intersects(_,x){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>b(L,x)&&_.set.some(P=>b(P,x)&&L.every(O=>P.every(B=>O.intersects(B,x)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new c(_,this.options)}catch{return!1}for(let x=0;x<this.set.length;x++)if(re(this.set[x],_,this.options))return!0;return!1}}Ot=e;const t=Js(),r=new t,s=ir(),i=Ke(),o=Xe(),c=de(),{safeRe:l,t:a,comparatorTrimReplace:d,tildeTrimReplace:u,caretTrimReplace:h}=Be(),{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:f}=Ye(),I=A=>A.value==="<0.0.0-0",C=A=>A.value==="",b=(A,_)=>{let x=!0;const L=A.slice();let P=L.pop();for(;x&&L.length;)x=L.every(O=>P.intersects(O,_)),P=L.pop();return x},g=(A,_)=>(o("comp",A,_),A=T(A,_),o("caret",A),A=N(A,_),o("tildes",A),A=M(A,_),o("xrange",A),A=te(A,_),o("stars",A),A),m=A=>!A||A.toLowerCase()==="x"||A==="*",N=(A,_)=>A.trim().split(/\s+/).map(x=>w(x,_)).join(" "),w=(A,_)=>{const x=_.loose?l[a.TILDELOOSE]:l[a.TILDE];return A.replace(x,(L,P,O,B,V)=>{o("tilde",A,L,P,O,B,V);let H;return m(P)?H="":m(O)?H=`>=${P}.0.0 <${+P+1}.0.0-0`:m(B)?H=`>=${P}.${O}.0 <${P}.${+O+1}.0-0`:V?(o("replaceTilde pr",V),H=`>=${P}.${O}.${B}-${V} <${P}.${+O+1}.0-0`):H=`>=${P}.${O}.${B} <${P}.${+O+1}.0-0`,o("tilde return",H),H})},T=(A,_)=>A.trim().split(/\s+/).map(x=>D(x,_)).join(" "),D=(A,_)=>{o("caret",A,_);const x=_.loose?l[a.CARETLOOSE]:l[a.CARET],L=_.includePrerelease?"-0":"";return A.replace(x,(P,O,B,V,H)=>{o("caret",A,P,O,B,V,H);let Q;return m(O)?Q="":m(B)?Q=`>=${O}.0.0${L} <${+O+1}.0.0-0`:m(V)?O==="0"?Q=`>=${O}.${B}.0${L} <${O}.${+B+1}.0-0`:Q=`>=${O}.${B}.0${L} <${+O+1}.0.0-0`:H?(o("replaceCaret pr",H),O==="0"?B==="0"?Q=`>=${O}.${B}.${V}-${H} <${O}.${B}.${+V+1}-0`:Q=`>=${O}.${B}.${V}-${H} <${O}.${+B+1}.0-0`:Q=`>=${O}.${B}.${V}-${H} <${+O+1}.0.0-0`):(o("no pr"),O==="0"?B==="0"?Q=`>=${O}.${B}.${V}${L} <${O}.${B}.${+V+1}-0`:Q=`>=${O}.${B}.${V}${L} <${O}.${+B+1}.0-0`:Q=`>=${O}.${B}.${V} <${+O+1}.0.0-0`),o("caret return",Q),Q})},M=(A,_)=>(o("replaceXRanges",A,_),A.split(/\s+/).map(x=>W(x,_)).join(" ")),W=(A,_)=>{A=A.trim();const x=_.loose?l[a.XRANGELOOSE]:l[a.XRANGE];return A.replace(x,(L,P,O,B,V,H)=>{o("xRange",A,L,P,O,B,V,H);const Q=m(O),q=Q||m(B),j=q||m(V),K=j;return P==="="&&K&&(P=""),H=_.includePrerelease?"-0":"",Q?P===">"||P==="<"?L="<0.0.0-0":L="*":P&&K?(q&&(B=0),V=0,P===">"?(P=">=",q?(O=+O+1,B=0,V=0):(B=+B+1,V=0)):P==="<="&&(P="<",q?O=+O+1:B=+B+1),P==="<"&&(H="-0"),L=`${P+O}.${B}.${V}${H}`):q?L=`>=${O}.0.0${H} <${+O+1}.0.0-0`:j&&(L=`>=${O}.${B}.0${H} <${O}.${+B+1}.0-0`),o("xRange return",L),L})},te=(A,_)=>(o("replaceStars",A,_),A.trim().replace(l[a.STAR],"")),Z=(A,_)=>(o("replaceGTE0",A,_),A.trim().replace(l[_.includePrerelease?a.GTE0PRE:a.GTE0],"")),ne=A=>(_,x,L,P,O,B,V,H,Q,q,j,K)=>(m(L)?x="":m(P)?x=`>=${L}.0.0${A?"-0":""}`:m(O)?x=`>=${L}.${P}.0${A?"-0":""}`:B?x=`>=${x}`:x=`>=${x}${A?"-0":""}`,m(Q)?H="":m(q)?H=`<${+Q+1}.0.0-0`:m(j)?H=`<${Q}.${+q+1}.0-0`:K?H=`<=${Q}.${q}.${j}-${K}`:A?H=`<${Q}.${q}.${+j+1}-0`:H=`<=${H}`,`${x} ${H}`.trim()),re=(A,_,x)=>{for(let L=0;L<A.length;L++)if(!A[L].test(_))return!1;if(_.prerelease.length&&!x.includePrerelease){for(let L=0;L<A.length;L++)if(o(A[L].semver),A[L].semver!==i.ANY&&A[L].semver.prerelease.length>0){const P=A[L].semver;if(P.major===_.major&&P.minor===_.minor&&P.patch===_.patch)return!0}return!1}return!0};return Ot}var Lt,Jr;function Ke(){if(Jr)return Lt;Jr=1;const n=Symbol("SemVer ANY");class e{static get ANY(){return n}constructor(d,u){if(u=t(u),d instanceof e){if(d.loose===!!u.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,u),this.options=u,this.loose=!!u.loose,this.parse(d),this.semver===n?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const u=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],h=d.match(u);if(!h)throw new TypeError(`Invalid comparator: ${d}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new c(h[2],this.options.loose):this.semver=n}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===n||d===n)return!0;if(typeof d=="string")try{d=new c(d,this.options)}catch{return!1}return i(d,this.operator,this.semver,this.options)}intersects(d,u){if(!(d instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,u).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,u).test(d.semver):(u=t(u),u.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||i(this.semver,"<",d.semver,u)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||i(this.semver,">",d.semver,u)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}Lt=e;const t=ir(),{safeRe:r,t:s}=Be(),i=qn(),o=Xe(),c=de(),l=Ne();return Lt}var $t,Qr;function Je(){if(Qr)return $t;Qr=1;const n=Ne();return $t=(t,r,s)=>{try{r=new n(r,s)}catch{return!1}return r.test(t)},$t}var xt,Zr;function Qs(){if(Zr)return xt;Zr=1;const n=Ne();return xt=(t,r)=>new n(t,r).set.map(s=>s.map(i=>i.value).join(" ").trim().split(" ")),xt}var Dt,en;function Zs(){if(en)return Dt;en=1;const n=de(),e=Ne();return Dt=(r,s,i)=>{let o=null,c=null,l=null;try{l=new e(s,i)}catch{return null}return r.forEach(a=>{l.test(a)&&(!o||c.compare(a)===-1)&&(o=a,c=new n(o,i))}),o},Dt}var Pt,tn;function ei(){if(tn)return Pt;tn=1;const n=de(),e=Ne();return Pt=(r,s,i)=>{let o=null,c=null,l=null;try{l=new e(s,i)}catch{return null}return r.forEach(a=>{l.test(a)&&(!o||c.compare(a)===1)&&(o=a,c=new n(o,i))}),o},Pt}var kt,rn;function ti(){if(rn)return kt;rn=1;const n=de(),e=Ne(),t=We();return kt=(s,i)=>{s=new e(s,i);let o=new n("0.0.0");if(s.test(o)||(o=new n("0.0.0-0"),s.test(o)))return o;o=null;for(let c=0;c<s.set.length;++c){const l=s.set[c];let a=null;l.forEach(d=>{const u=new n(d.semver.version);switch(d.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!a||t(u,a))&&(a=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),a&&(!o||t(o,a))&&(o=a)}return o&&s.test(o)?o:null},kt}var Bt,nn;function ri(){if(nn)return Bt;nn=1;const n=Ne();return Bt=(t,r)=>{try{return new n(t,r).range||"*"}catch{return null}},Bt}var Ut,sn;function ur(){if(sn)return Ut;sn=1;const n=de(),e=Ke(),{ANY:t}=e,r=Ne(),s=Je(),i=We(),o=or(),c=cr(),l=lr();return Ut=(d,u,h,v)=>{d=new n(d,v),u=new r(u,v);let f,I,C,b,g;switch(h){case">":f=i,I=c,C=o,b=">",g=">=";break;case"<":f=o,I=l,C=i,b="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(d,u,v))return!1;for(let m=0;m<u.set.length;++m){const N=u.set[m];let w=null,T=null;if(N.forEach(D=>{D.semver===t&&(D=new e(">=0.0.0")),w=w||D,T=T||D,f(D.semver,w.semver,v)?w=D:C(D.semver,T.semver,v)&&(T=D)}),w.operator===b||w.operator===g||(!T.operator||T.operator===b)&&I(d,T.semver))return!1;if(T.operator===g&&C(d,T.semver))return!1}return!0},Ut}var Gt,an;function ni(){if(an)return Gt;an=1;const n=ur();return Gt=(t,r,s)=>n(t,r,">",s),Gt}var Ft,on;function si(){if(on)return Ft;on=1;const n=ur();return Ft=(t,r,s)=>n(t,r,"<",s),Ft}var Ht,ln;function ii(){if(ln)return Ht;ln=1;const n=Ne();return Ht=(t,r,s)=>(t=new n(t,s),r=new n(r,s),t.intersects(r,s)),Ht}var qt,cn;function ai(){if(cn)return qt;cn=1;const n=Je(),e=_e();return qt=(t,r,s)=>{const i=[];let o=null,c=null;const l=t.sort((h,v)=>e(h,v,s));for(const h of l)n(h,r,s)?(c=h,o||(o=h)):(c&&i.push([o,c]),c=null,o=null);o&&i.push([o,null]);const a=[];for(const[h,v]of i)h===v?a.push(h):!v&&h===l[0]?a.push("*"):v?h===l[0]?a.push(`<=${v}`):a.push(`${h} - ${v}`):a.push(`>=${h}`);const d=a.join(" || "),u=typeof r.raw=="string"?r.raw:String(r);return d.length<u.length?d:r},qt}var Vt,un;function oi(){if(un)return Vt;un=1;const n=Ne(),e=Ke(),{ANY:t}=e,r=Je(),s=_e(),i=(u,h,v={})=>{if(u===h)return!0;u=new n(u,v),h=new n(h,v);let f=!1;e:for(const I of u.set){for(const C of h.set){const b=l(I,C,v);if(f=f||b!==null,b)continue e}if(f)return!1}return!0},o=[new e(">=0.0.0-0")],c=[new e(">=0.0.0")],l=(u,h,v)=>{if(u===h)return!0;if(u.length===1&&u[0].semver===t){if(h.length===1&&h[0].semver===t)return!0;v.includePrerelease?u=o:u=c}if(h.length===1&&h[0].semver===t){if(v.includePrerelease)return!0;h=c}const f=new Set;let I,C;for(const M of u)M.operator===">"||M.operator===">="?I=a(I,M,v):M.operator==="<"||M.operator==="<="?C=d(C,M,v):f.add(M.semver);if(f.size>1)return null;let b;if(I&&C){if(b=s(I.semver,C.semver,v),b>0)return null;if(b===0&&(I.operator!==">="||C.operator!=="<="))return null}for(const M of f){if(I&&!r(M,String(I),v)||C&&!r(M,String(C),v))return null;for(const W of h)if(!r(M,String(W),v))return!1;return!0}let g,m,N,w,T=C&&!v.includePrerelease&&C.semver.prerelease.length?C.semver:!1,D=I&&!v.includePrerelease&&I.semver.prerelease.length?I.semver:!1;T&&T.prerelease.length===1&&C.operator==="<"&&T.prerelease[0]===0&&(T=!1);for(const M of h){if(w=w||M.operator===">"||M.operator===">=",N=N||M.operator==="<"||M.operator==="<=",I){if(D&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===D.major&&M.semver.minor===D.minor&&M.semver.patch===D.patch&&(D=!1),M.operator===">"||M.operator===">="){if(g=a(I,M,v),g===M&&g!==I)return!1}else if(I.operator===">="&&!r(I.semver,String(M),v))return!1}if(C){if(T&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===T.major&&M.semver.minor===T.minor&&M.semver.patch===T.patch&&(T=!1),M.operator==="<"||M.operator==="<="){if(m=d(C,M,v),m===M&&m!==C)return!1}else if(C.operator==="<="&&!r(C.semver,String(M),v))return!1}if(!M.operator&&(C||I)&&b!==0)return!1}return!(I&&N&&!C&&b!==0||C&&w&&!I&&b!==0||D||T)},a=(u,h,v)=>{if(!u)return h;const f=s(u.semver,h.semver,v);return f>0?u:f<0||h.operator===">"&&u.operator===">="?h:u},d=(u,h,v)=>{if(!u)return h;const f=s(u.semver,h.semver,v);return f<0?u:f>0||h.operator==="<"&&u.operator==="<="?h:u};return Vt=i,Vt}var jt,dn;function li(){if(dn)return jt;dn=1;const n=Be(),e=Ye(),t=de(),r=Gn(),s=Le(),i=Bs(),o=Us(),c=Gs(),l=Fs(),a=Hs(),d=qs(),u=Vs(),h=js(),v=_e(),f=zs(),I=Ys(),C=ar(),b=Xs(),g=Ws(),m=We(),N=or(),w=Fn(),T=Hn(),D=lr(),M=cr(),W=qn(),te=Ks(),Z=Ke(),ne=Ne(),re=Je(),A=Qs(),_=Zs(),x=ei(),L=ti(),P=ri(),O=ur(),B=ni(),V=si(),H=ii(),Q=ai(),q=oi();return jt={parse:s,valid:i,clean:o,inc:c,diff:l,major:a,minor:d,patch:u,prerelease:h,compare:v,rcompare:f,compareLoose:I,compareBuild:C,sort:b,rsort:g,gt:m,lt:N,eq:w,neq:T,gte:D,lte:M,cmp:W,coerce:te,Comparator:Z,Range:ne,satisfies:re,toComparators:A,maxSatisfying:_,minSatisfying:x,minVersion:L,validRange:P,outside:O,gtr:B,ltr:V,intersects:H,simplifyRange:Q,subset:q,SemVer:t,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},jt}var Oe=li();class be{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,t,r={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==be.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const s=new fn(e,this,t,r);return this.eventMap[e]||(this.eventMap[e]=[]),r.prepend?this.eventMap[e].unshift(s):this.eventMap[e].push(s),s}addOneTimeListener(e,t,r={}){r.remaining=1,this.addListener(e,t,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?this.eventMap[be.ANY_EVENT]&&this.eventMap[be.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof fn?this.eventMap[e].filter(s=>s===t).length>0:typeof t=="function"?this.eventMap[e].filter(s=>s.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],s=this.eventMap[be.ANY_EVENT]||[];return this.eventMap[e]&&(s=s.concat(this.eventMap[e])),s.forEach(i=>{if(i.suspended)return;let o=[...t];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(r.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),r}removeListener(e,t,r={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let s=this.eventMap[e].filter(i=>t&&i.callback!==t||r.remaining&&r.remaining!==i.remaining||r.context&&r.context!==i.context);s.length?this.eventMap[e]=s:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((r,s)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),r()},{remaining:1});t.duration!==1/0&&(i=setTimeout(()=>{o.remove(),s("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class fn{constructor(e,t,r,s={}){if(typeof e!="string"&&!(e instanceof String)&&e!==be.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");s.arguments!==void 0&&!Array.isArray(s.arguments)&&(s.arguments=[s.arguments]),s=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},s),s.duration!==1/0&&setTimeout(()=>this.remove(),s.duration),this.arguments=s.arguments,this.callback=r,this.context=s.context,this.count=0,this.event=e,this.remaining=parseInt(s.remaining)>=1?parseInt(s.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class p{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),p.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),p.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),p.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),p.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Ae{constructor(e,t={}){this.duration=R.defaults.note.duration,this.attack=R.defaults.note.attack,this.release=R.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=S.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=S.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=S.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=S.getNoteDetails(e);if(R.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(R.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(R.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(R.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(R.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(R.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(R.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return S.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=S.from7bitToFloat(e)}get rawRelease(){return S.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=S.from7bitToFloat(e)}get number(){return S.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return R.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+e*12+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class S{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const r=this.getNoteDetails(e);if(!r)throw new TypeError("Invalid note identifier");const s={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let i=(r.octave+1+t)*12;if(i+=s[r.name],r.accidental&&(r.accidental.startsWith("b")?i-=r.accidental.length:i+=r.accidental.length),i<0||i>127)throw new RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const r=t[1].toUpperCase(),s=parseInt(t[3]);let i=t[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:r+(i||"")+s,name:r,octave:s}}static sanitizeChannels(e){let t;if(R.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return Array.isArray(e)?t=e:t=[e],t.indexOf("all")>-1&&(t=p.MIDI_CHANNEL_NUMBERS),t.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(e){let t=!1;const r=parseFloat(e);return isNaN(r)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?r>=0&&(t=R.time+r):r>=0&&(t=r),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let r=!1;if(Number.isInteger(e)&&e>=0&&e<=127)r=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)r=parseInt(e);else if(typeof e=="string"||e instanceof String)try{r=this.toNoteNumber(e.trim(),t)}catch{return!1}return r}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(e/12-1)+t;return r[e%12]+s.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof Ae)return e;let r=this.guessNoteNumber(e,t.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new Ae(r,t)}static buildNoteArray(e,t={}){let r=[];return Array.isArray(e)||(e=[e]),e.forEach(s=>{r.push(this.buildNote(s,t))}),r}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,t=0){R.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const r=((e<<7)+t)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(e){R.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(e*16383);return{msb:t>>7,lsb:t&127}}static offsetNumber(e,t=0,r=0){if(R.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,r=parseInt(r)||0}return Math.min(Math.max(e+t*12+r,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(r=>e[r]===t)}static getCcNameByNumber(e){if(!(R.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return p.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let t=p.CONTROL_CHANGE_MESSAGES.find(r=>r.name===e);return t?t.number:p.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in p.CHANNEL_MODE_MESSAGES)if(p.CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===p.CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class ci extends be{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,r={}){if(R.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(t=S.fromFloatTo7Bit(t));const s=R.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),S.buildNoteArray(e).forEach(i=>{this.send([(p.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(s),t],{time:S.toTimestamp(r.time)})}),this}sendControlChange(e,t,r={}){if(typeof e=="string"&&(e=S.getCcNumberByName(e)),Array.isArray(t)||(t=[t]),R.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(t=t.map(s=>{const i=Math.min(Math.max(parseInt(s),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i}),t.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((s,i)=>{this.send([(p.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+i*32,t[i]],{time:S.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2?this:(this.sendControlChange(38,e[1],t),this)}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=p.REGISTERED_PARAMETERS[e]),R.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(p.REGISTERED_PARAMETERS).forEach(s=>{p.REGISTERED_PARAMETERS[s][0]===e[0]&&p.REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=p.REGISTERED_PARAMETERS[e]),R.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(p.REGISTERED_PARAMETERS).forEach(s=>{p.REGISTERED_PARAMETERS[s][0]===e[0]&&p.REGISTERED_PARAMETERS[s][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){this.sendNoteOn(e,t);const r=Array.isArray(e)?e:[e];for(let s of r)if(parseInt(s.duration)>0){const i={time:(S.toTimestamp(t.time)||R.time)+parseInt(s.duration),release:s.release,rawRelease:s.rawRelease};this.sendNoteOff(s,i)}else if(parseInt(t.duration)>0){const i={time:(S.toTimestamp(t.time)||R.time)+parseInt(t.duration),release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(s,i)}return this}sendNoteOff(e,t={}){if(R.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;t.rawRelease!=null?r=t.rawRelease:isNaN(t.release)||(r=Math.round(t.release*127));const s=R.octaveOffset+this.output.octaveOffset+this.octaveOffset;return S.buildNoteArray(e,{rawRelease:parseInt(r)}).forEach(i=>{this.send([(p.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(s),i.rawRelease],{time:S.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(R.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;t.rawAttack!=null?r=t.rawAttack:isNaN(t.attack)||(r=Math.round(t.attack*127));const s=R.octaveOffset+this.output.octaveOffset+this.octaveOffset;return S.buildNoteArray(e,{rawAttack:r}).forEach(i=>{this.send([(p.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(s),i.rawAttack],{time:S.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,r={}){if(typeof e=="string"&&(e=p.CHANNEL_MODE_MESSAGES[e]),R.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(p.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:S.toTimestamp(r.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(R.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return t.rawValue||(e=S.fromFloatTo7Bit(e)),this.send([(p.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:S.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,R.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(e)+64,s=e-Math.floor(e);s=Math.round((s+1)/2*16383);let i=s>>7&127,o=s&127;return this.sendRpnValue("channelcoarsetuning",r,t),this.sendRpnValue("channelfinetuning",[i,o],t),this}sendModulationRange(e,t,r={}){if(R.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(t!=null&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],r),this}sendNrpnValue(e,t,r={}){if(t=[].concat(t),R.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,r),this._setCurrentParameter(t,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(e,t={}){if(R.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,s=0;if(t.rawValue&&Array.isArray(e))r=e[0],s=e[1];else if(t.rawValue&&!Array.isArray(e))r=e;else{const i=S.fromFloatToMsbLsb((e+1)/2);r=i.msb,s=i.lsb}return this.send([(p.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),s,r],{time:S.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,r={}){if(R.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],r),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,R.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(p.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:S.toTimestamp(t.time)}),this}sendRpnValue(e,t,r={}){if(Array.isArray(e)||(e=p.REGISTERED_PARAMETERS[e]),R.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(s=>{if(!(s>=0&&s<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,r),this._setCurrentParameter(t,r),this._deselectRegisteredParameter(r),this}sendTuningBank(e,t={}){if(R.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(R.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Qt extends be{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new ci(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:R.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},r=0){if(e instanceof Vn&&(e=S.isNode?e.data:e.rawData),e instanceof Uint8Array&&S.isNode&&(e=Array.from(e)),R.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(r)?{time:0}:{time:r}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(s=>{if(s=parseInt(s),!(s>=0&&s<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,S.toTimestamp(t.time)),this}sendSysex(e,t=[],r={}){if(e=[].concat(e),t instanceof Uint8Array){const s=new Uint8Array(1+e.length+t.length+1);s[0]=p.SYSTEM_MESSAGES.sysex,s.set(Uint8Array.from(e),1),s.set(t,1+e.length),s[s.length-1]=p.SYSTEM_MESSAGES.sysexend,this.send(s,{time:r.time})}else{const s=e.concat(t,p.SYSTEM_MESSAGES.sysexend);this.send([p.SYSTEM_MESSAGES.sysex].concat(s),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():R.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(R.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([p.SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){e=Math.floor(e)||0;var r=e>>7&127,s=e&127;return this.send([p.SYSTEM_MESSAGES.songposition,r,s],{time:t.time}),this}sendSongSelect(e=0,t={}){if(R.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([p.SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([p.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([p.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([p.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([p.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([p.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([p.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([p.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return R.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,r={}){return r.channels==null&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendKeyAftertouch(e,t,r)}),this}sendControlChange(e,t,r={},s={}){if(R.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;r=s,r.channels=i,r.channels==="all"&&(r.channels=p.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendControlChange(e,t,r)}),this}sendPitchBendRange(e=0,t=0,r={}){return r.channels==null&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendPitchBendRange(e,t,r)}),this}setPitchBendRange(e=0,t=0,r="all",s={}){return R.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,s)}sendRpnValue(e,t,r={}){return r.channels==null&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendRpnValue(e,t,r)}),this}setRegisteredParameter(e,t=[],r="all",s={}){return R.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,s)}sendChannelAftertouch(e,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendProgramChange(e,t)}),this}sendModulationRange(e,t,r={}){return r.channels==null&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendModulationRange(e,t,r)}),this}setModulationRange(e=0,t=0,r="all",s={}){return R.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),s.channels=r,s.channels==="all"&&(s.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,s)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},r={}){return R.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=t,r.channels==="all"&&(r.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,r)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",r={}){return R.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=t,r.channels==="all"&&(r.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,r)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",r={}){return R.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=t,r.channels==="all"&&(r.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,r)}sendChannelMode(e,t=0,r={},s={}){if(R.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const i=r;r=s,r.channels=i,r.channels==="all"&&(r.channels=p.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendChannelMode(e,t,r)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(R.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=t,e.channels=r,e.channels==="all"&&(e.channels=p.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,r={}){return r.channels==null&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].sendNrpnValue(e,t,r)}),this}setNonRegisteredParameter(e,t=[],r="all",s={}){return R.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),s.channels=r,s.channels==="all"&&(s.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,s)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",r={}){return R.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=t,r.channels==="all"&&(r.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,r)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",r={}){return R.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=t,r.channels==="all"&&(r.channels=p.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,r)}sendNoteOff(e,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},r={}){if(R.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].playNote(e,t)}),this}sendNoteOn(e,t={},r={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const s=t;t=r,t.channels=s,t.channels==="all"&&(t.channels=p.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class hn{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(p.SYSTEM_MESSAGES),...Object.keys(p.CHANNEL_MESSAGES)],this.channels=p.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),R.validation&&(e.forEach(r=>{if(!(r instanceof Qt))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(r=>{if(!p.SYSTEM_MESSAGES.hasOwnProperty(r)&&!p.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(r=>{if(!p.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{R.validation&&!(t instanceof Qt)||t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class ui extends be{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const r=e.message.dataBytes[0],s=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&s===0)this.notesState[r]=!1,t.type="noteoff",t.note=new Ae(S.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+R.octaveOffset),{rawAttack:0,rawRelease:s}),t.value=S.from7bitToFloat(s),t.rawValue=s,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[r]=!0,t.note=new Ae(S.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+R.octaveOffset),{rawAttack:s}),t.value=S.from7bitToFloat(s),t.rawValue=s,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new Ae(S.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+R.octaveOffset)),t.value=S.from7bitToFloat(s),t.rawValue=s,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=r;else if(t.type==="controlchange"){t.controller={number:r,name:p.CONTROL_CHANGE_MESSAGES[r].name,description:p.CONTROL_CHANGE_MESSAGES[r].description,position:p.CONTROL_CHANGE_MESSAGES[r].position},t.subtype=t.controller.name||"controller"+r,t.value=S.from7bitToFloat(s),t.rawValue=s;const i=Object.assign({},t);i.type=`${t.type}-controller${r}`,delete i.subtype,this.emit(i.type,i);const o=Object.assign({},t);o.type=`${t.type}-`+p.CONTROL_CHANGE_MESSAGES[r].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=r,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=S.from7bitToFloat(r),t.rawValue=r):t.type==="pitchbend"?(t.value=((s<<7)+r-8192)/8192,t.rawValue=(s<<7)+r):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],r=e.message.dataBytes[1];t===99||t===101?(this._nrpnBuffer=[],this._rpnBuffer=[],t===99?this._nrpnBuffer=[e.message]:r!==127&&(this._rpnBuffer=[e.message])):t===98||t===100?t===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(t===6||t===38||t===96||t===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,t,r,s){e=e==="nrpn"?"nrpn":"rpn";const i={target:s.target,timestamp:s.timestamp,message:s.message,parameterMsb:t,parameterLsb:r,value:S.from7bitToFloat(s.message.dataBytes[1]),rawValue:s.message.dataBytes[1]};e==="rpn"?i.parameter=Object.keys(p.REGISTERED_PARAMETERS).find(l=>p.REGISTERED_PARAMETERS[l][0]===t&&p.REGISTERED_PARAMETERS[l][1]===r):i.parameter=(t<<7)+r;const o=p.CONTROL_CHANGE_MESSAGES[s.message.dataBytes[0]].name;i.type=`${e}-${o}`,this.emit(i.type,i);const c=Object.assign({},i);c.type==="nrpn-dataincrement"?c.type="nrpn-databuttonincrement":c.type==="nrpn-datadecrement"?c.type="nrpn-databuttondecrement":c.type==="rpn-dataincrement"?c.type="rpn-databuttonincrement":c.type==="rpn-datadecrement"&&(c.type="rpn-databuttondecrement"),this.emit(c.type,c),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return R.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),S.getChannelModeByNumber(e)}getCcNameByNumber(e){if(R.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return S.getCcNameByNumber(e)}getNoteState(e){e instanceof Ae&&(e=e.identifier);const t=S.guessNoteNumber(e,R.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Vn{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=S.getPropertyByValue(p.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=S.getPropertyByValue(p.SYSTEM_MESSAGES,this.command)),this.statusByte===p.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class di extends be{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new ui(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:R.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new Vn(e.data),r={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",r),t.isSystemMessage?this._parseEvent(r):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(r),this._forwarders.forEach(s=>s.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){R.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,r={}){if(R.validation&&typeof r=="function"){let s=t!=null?[].concat(t):void 0;t=r,r={channels:s}}if(p.CHANNEL_EVENTS.includes(e)){r.channels===void 0&&(r.channels=p.MIDI_CHANNEL_NUMBERS);let s=[];return S.sanitizeChannels(r.channels).forEach(i=>{s.push(this.channels[i].addListener(e,t,r))}),s}else return super.addListener(e,t,r)}addOneTimeListener(e,t,r={}){return r.remaining=1,this.addListener(e,t,r)}on(e,t,r,s){return this.addListener(e,t,r,s)}hasListener(e,t,r={}){if(R.validation&&typeof r=="function"){let s=[].concat(t);t=r,r={channels:s}}return p.CHANNEL_EVENTS.includes(e)?(r.channels===void 0&&(r.channels=p.MIDI_CHANNEL_NUMBERS),S.sanitizeChannels(r.channels).every(s=>this.channels[s].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,r={}){if(R.validation&&typeof r=="function"){let s=[].concat(t);t=r,r={channels:s}}if(r.channels===void 0&&(r.channels=p.MIDI_CHANNEL_NUMBERS),e==null)return S.sanitizeChannels(r.channels).forEach(s=>{this.channels[s]&&this.channels[s].removeListener()}),super.removeListener();p.CHANNEL_EVENTS.includes(e)?S.sanitizeChannels(r.channels).forEach(s=>{this.channels[s].removeListener(e,t,r)}):super.removeListener(e,t,r)}addForwarder(e,t={}){let r;return e instanceof hn?r=e:r=new hn(e,t),this._forwarders.push(r),r}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return R.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class fi extends be{constructor(){super(),this.defaults={note:{attack:S.from7bitToFloat(64),release:S.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},t=!1){if(S.isNode)try{window.navigator}catch{let c=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,c)}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:t}),t&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},i={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(o){return r.error=o,this.emit("error",r),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return r.error=o,this.emit("error",r),typeof e.callback=="function"&&e.callback(o),Promise.reject(o)}return this.emit("enabled",i),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r].id===e.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r].id===e.toString())return this.inputs[r]}getInputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(e))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(e))return this.inputs[r]}getOutputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(e))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(e))return this.outputs[r]}getOutputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r].id===e.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r].id===e.toString())return this.outputs[r]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),S.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?S.getNoteDetails(S.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),S.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),S.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),S.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),S.buildNoteArray(e,t)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),S.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(t=>e.push(t.destroy())),this.outputs.forEach(t=>e.push(t.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let t={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?t.port=this.getOutputById(e.port.id):e.port.type==="input"&&(t.port=this.getInputById(e.port.id)),this.emit(e.port.state,t);const r=Object.assign({},t);r.type="portschanged",this.emit(r.type,r)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?t.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(t.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,t);const r=Object.assign({},t);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let t=this._inputs.length-1;t>=0;t--){const r=this._inputs[t];Array.from(this.interface.inputs.values()).find(i=>i===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(t,1))}let e=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(r=>r._midiInput===t)){let r=this._disconnectedInputs.find(s=>s._midiInput===t);r||(r=new di(t)),this._inputs.push(r),e.push(r.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let t=this._outputs.length-1;t>=0;t--){const r=this._outputs[t];Array.from(this.interface.outputs.values()).find(i=>i===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(t,1))}let e=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(r=>r._midiOutput===t)){let r=this._disconnectedOutputs.find(s=>s._midiOutput===t);r||(r=new Qt(t)),this._outputs.push(r),e.push(r.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),S.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),S.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.12"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),p.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),p.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),p.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),p.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),p.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const R=new fi;R.constructor=null;const ze=(...n)=>{},hi=[{name:"unknown",controlCount:0,capabilities:{}},{name:"Oxion development board",controlCount:4,capabilities:{led:!0}},{name:"16n",controlCount:16,capabilities:{i2c:!0,led:!0,faderCalibration:!0,highResolution:"2.2.0"},latestFirmwareVersion:"2.2.0",firmwareUrl:"https://github.com/16n-faderbank/16n/releases/latest"},{name:"16n (LC)",controlCount:16,capabilities:{i2c:!0,led:!0,faderCalibration:!0,highResolution:"2.2.0"},sendShortMessages:!0,latestFirmwareVersion:"2.1.1",firmwareUrl:"https://github.com/16n-faderbank/16n/releases/latest"},{name:"16rx",controlCount:16,capabilities:{i2c:!0,led:!0,highResolution:"3.1.0"},latestFirmwareVersion:"3.0.3",firmwareUrl:"https://github.com/16n-faderbank/16next_firmware/releases/latest"},{name:"16nx",controlCount:16,capabilities:{i2c:!0,led:!0,highResolution:"3.1.0"},latestFirmwareVersion:"3.0.3",firmwareUrl:"https://github.com/16n-faderbank/16next_firmware/releases/latest"}],jn=(n,e)=>{let t=n.ledOn==e.ledOn&&n.ledFlash==e.ledFlash&&n.controllerFlip==e.controllerFlip&&n.midiThru==e.midiThru;("i2cLeader"in n||"i2cLeader"in e)&&(t=t&&n.i2cLeader==e.i2cLeader),("faderMax"in n||"faderMax"in e)&&(t=t&&n.faderMax==e.faderMax&&n.faderMin==e.faderMin);let r=!0,s=!0;return n.usbControls.forEach((i,o)=>{const c=e.usbControls[o];(i.channel!=c.channel||i.cc!=c.cc||i.highResolution!=c.highResolution)&&(r=!1)}),n.trsControls.forEach((i,o)=>{const c=e.trsControls[o];(i.channel!=c.channel||i.cc!=c.cc||i.highResolution!=c.highResolution)&&(s=!1)}),t&&r&&s},Ue=n=>{const e=Array.from({length:84},()=>0),t=n.firmwareVersion.trim().split(".").map(u=>parseInt(u));e[0]=n.deviceId,e[1]=t[0],e[2]=t[1],e[3]=t[2],e[4]=n.ledOn?1:0,e[5]=n.ledFlash?1:0,e[6]=n.controllerFlip?1:0,e[7]=n.i2cLeader?1:0;const r=n.faderMin>>7,s=n.faderMin-(r<<7);e[8]=s,e[9]=r;const i=n.faderMax>>7,o=n.faderMax-(i<<7);e[10]=o,e[11]=i,e[12]=n.midiThru?1:0;const c=20,l=36,a=52,d=68;if(n.usbControls.forEach((u,h)=>{e[h+c]=u.channel,e[h+a]=u.cc}),n.trsControls.forEach((u,h)=>{e[h+l]=u.channel,e[h+d]=u.cc}),Re(ve(n.deviceId),"highResolution",t.join("."))){const v=pn(n.usbControls),f=pn(n.trsControls);v.forEach((I,C)=>{e[84+C]=v[C]}),f.forEach((I,C)=>{e[87+C]=f[C]})}return e},mi=n=>Ue(n).slice(4,20),pi=n=>{const e=Ue(n),t=e.slice(20,36),r=e.slice(52,68);return t.concat(r)},vi=n=>{const e=Ue(n),t=e.slice(36,52),r=e.slice(68,84);return t.concat(r)},Ei=n=>{const e={...n},t=ve(n.deviceId).controlCount;return e.usbControls=e.usbControls.splice(0,t),e.usbControls.forEach(r=>delete r.val),e.trsControls=e.trsControls.splice(0,t),JSON.stringify(e,null,2)},gi=(n,e)=>e.deviceId!=n.deviceId?`Cannot update - this data file is for a ${ve(e.deviceId).name}, but you are trying to install it on a ${ve(n.deviceId).name} `:!1,bi=(n,e)=>(Object.keys(e).forEach(t=>{n[t]=e[t]}),n),_i=n=>{const t=n[5],r=n[6]+"."+n[7]+"."+n[8],s=n[9]==1,i=n[10]==1,o=n[11]==1,c=n[12]==1,l=n[13],d=(n[14]<<7)+l,u=n[15],v=(n[16]<<7)+u,f=n[17]==1,I=[],C=[];n.slice(25,41).forEach((N,w)=>{N!=127&&(I[w]={channel:N})}),n.slice(41,57).forEach((N,w)=>{N!=127&&(C[w]={channel:N})}),n.slice(57,73).forEach((N,w)=>{N!=127&&(I[w].cc=N)}),n.slice(73,89).forEach((N,w)=>{N!=127&&(C[w].cc=N)}),I.forEach(N=>N.val=0);const b=ve(t);let g=Array.from(Array(16)).map(()=>!1),m=Array.from(Array(16)).map(()=>!1);if(b&&Re(b,"highResolution",r)){const N=n.slice(89,92);g=mn(N),I.forEach((T,D)=>{T.highResolution=g[D]});const w=n.slice(92,95);m=mn(w),C.forEach((T,D)=>{T.highResolution=m[D]})}return{ledOn:s,ledFlash:i,controllerFlip:o,midiThru:f,usbControls:I,trsControls:C,deviceId:t,firmwareVersion:r,i2cLeader:c,faderMin:d,faderMax:v,usbHighResolution:g,trsHighResolution:m}},mn=n=>{let e=0;for(let r=0;r<3;r++){const s=r==2?3:127;e|=(n[r]&s)<<7*r}const t=[];for(let r=0;r<16;r++)t.push((e&1<<r)!==0);return t},pn=n=>{let e=0;return n.forEach((t,r)=>{t.highResolution&&(e|=1<<r)}),[e&127,e>>7&127,e>>14&3]},ve=n=>hi[n],Re=(n,e,t)=>{if(n)return n.capabilities[e]?n.capabilities[e]===!0?!0:Oe.gte(t,n.capabilities[e]):!1},ue={sysexMfgId:[125,0,0],requestInfoMsg:31,updateConfigMsg:14,updateDeviceOptionsMsg:13,updateUSBOptionsMessage:12,updateTRSOptionsMessage:11,factoryResetMsg:26},Ni=n=>n[1]==ue.sysexMfgId[0]&&n[2]==ue.sysexMfgId[1]&&n[3]==ue.sysexMfgId[2],yi=(n,e)=>{ve(n.deviceId).sendShortMessages?Si(n,e):Ri(n,e)},Ri=(n,e)=>{e.sendSysex(ue.sysexMfgId,[ue.updateConfigMsg,...Ue(n)])},Si=(n,e)=>{e.sendSysex(ue.sysexMfgId,[ue.updateDeviceOptionsMsg,...mi(n)]),e.sendSysex(ue.sysexMfgId,[ue.updateUSBOptionsMessage,...pi(n)]),e.sendSysex(ue.sysexMfgId,[ue.updateTRSOptionsMessage,...vi(n)])},dr=n=>{n.sendSysex(ue.sysexMfgId,[ue.requestInfoMsg])},zn=n=>{n.sendSysex(ue.sysexMfgId,[ue.factoryResetMsg])},E=rr({current:null,controllerMightNeedFactoryReset:!1,editing:null,editMode:!1}),z=rr({inputs:[],outputs:[],selectedInput:null,selectedOutput:null,webMidiEnabled:!1});let je=-1;const zt=()=>R.inputs.sort(Yn),Yt=()=>R.outputs.sort(Yn),Yn=(n,e)=>{const t=`${n.manufacturer} ${n.name}`,r=`${e.manufacturer} ${e.name}`;return t<r?-1:t>r?1:0},wi=()=>{z.webMidiEnabled=!0,Ii()},Ii=()=>{z.inputs=[...zt()],z.outputs=[...Yt()],Fe(),R.addListener("connected",()=>{z.inputs=[...zt()],z.outputs=[...Yt()],Fe()}),R.addListener("disconnected",()=>{z.inputs=[...zt()],z.outputs=[...Yt()],z.selectedInput=null,z.selectedOutput=null,E.current=null,Fe()}),setInterval(()=>{Fe()},5e3)},Fe=()=>{if(!z.selectedInput&&z.inputs.length>0){const n=z.inputs.find(e=>e.name.match(/.*16n.*/));n&&(z.selectedInput=n)}if(!z.selectedOutput&&z.outputs.length>0){const n=z.outputs.find(e=>e.name.match(/.*16n.*/));n&&(z.selectedOutput=n)}!E.current&&z.selectedInput&&z.selectedOutput&&(Xn(z.selectedInput),Wn(z.selectedInput),Zt())},Ci=n=>{E.current&&E.current.usbControls.forEach(e=>{n.message.channel==e.channel&&n.controller.number==e.cc&&(e.msb=n.rawValue),e.highResolution&&n.message.channel==e.channel&&n.controller.number==e.cc+32&&(e.lsb=n.rawValue),e.highResolution&&e.msb?e.val=(e.msb<<7)+e.lsb:e.val=e.msb})},Xn=n=>{n.addListener("controlchange",Ci)},Wn=n=>{n.addListener("sysex",e=>{const t=e.message.data;Ni(t)&&t[4]==15&&(E.current=_i(t),ze("Received config",E.current),je=-1,E.controllerMightNeedFactoryReset=!1)}),ze("Attached sysex listener to ",n.name)},Zt=()=>{je<0&&(je=Date.now()),Date.now()-je>8e3&&(E.controllerMightNeedFactoryReset||(E.controllerMightNeedFactoryReset=!0));const n=z.selectedInput,e=z.selectedOutput;n&&e&&(ze("Requesting config over "+e.name),ze("Hoping to receive on "+n.name),dr(e))};var Ai=G("<span></span>");function Mi(n,e){let t=Se(e,"classList",3,"");var r=Ai();fe(()=>Dn(r,`fas fa-${e.i??""} ${t()??""} svelte-pvbvkq`)),y(n,r)}var Ti=G('<div class="button-wrapper svelte-1qu28ag"><button class="svelte-1qu28ag"><!> <!></button></div>');function ce(n,e){se(e,!0);let t=Se(e,"icon",3,""),r=Se(e,"disabled",3,!1);var s=Ti(),i=U(s);i.__click=function(...a){var d;(d=e.onclick)==null||d.apply(this,a)};var o=U(i);{var c=a=>{Mi(a,{get i(){return t()}})};X(o,a=>{t()&&t().trim()!==""&&a(c)})}var l=$(o,2);Ie(l,()=>e.children),k(i),k(s),fe(()=>i.disabled=r()),y(n,s),ie()}sr(["click"]);var Oi=G('<span class="upgrade svelte-ykry5x"> <a>Download</a></span>'),Li=G('<p class="device svelte-ykry5x">Connected: <strong> </strong> running firmware <strong> </strong> <!></p>'),$i=G('<p class="device svelte-ykry5x">No device connected.</p>'),xi=G('<div class="details svelte-ykry5x"><!></div>');function Di(n,e){se(e,!0);let t=Wt(""),r=Wt(""),s=!1;tr(()=>{if(E.current&&E.current.firmwareVersion&&E.current.deviceId&&!s){s=!0;const l=ve(E.current.deviceId);l.latestFirmwareVersion&&Oe.gt(l.latestFirmwareVersion,E.current.firmwareVersion)?(Ce(t,`A new version of the ${l.name} firmware (${l.latestFirmwareVersion}) is available.`),Ce(r,rr(l.firmwareUrl||""))):(Ce(t,""),Ce(r,""))}});var i=he(),o=Y(i);{var c=l=>{var a=xi(),d=U(a);{var u=v=>{var f=Li(),I=$(U(f)),C=U(I,!0);fe(()=>ge(C,ve(E.current.deviceId).name)),k(I);var b=$(I,2),g=U(b,!0);k(b);var m=$(b,2);{var N=w=>{var T=Oi(),D=U(T),M=$(D);k(T),fe(()=>{ge(D,`${F(t)??""} `),we(M,"href",F(r))}),y(w,T)};X(m,w=>{F(t).trim()!=""&&w(N)})}k(f),fe(()=>ge(g,E.current.firmwareVersion)),y(v,f)},h=v=>{var f=$i();y(v,f)};X(d,v=>{E.current?v(u):v(h,!1)})}k(a),y(l,a)};X(o,l=>{z.webMidiEnabled&&l(c)})}y(n,i),ie()}var Pi=G('<p><label><input type="checkbox"> <!></label></p>');function He(n,e){se(e,!0);let t=Se(e,"checked",15);var r=Pi(),s=U(r),i=U(s);ke(i);var o=$(i,2);{var c=l=>{var a=he(),d=Y(a);Ie(d,()=>e.children),y(l,a)};X(o,l=>{e.children&&l(c)})}k(s),k(r),Pn(i,t),y(n,r),ie()}var ki=G("<!> <!>",1),Bi=G(`<hr> <h3>Fader Minimum/Maximum calibration</h3> <div><label for="faderMin" class="svelte-idpdcv">Fader Minimum raw value</label> <input name="faderMin" type="number" min="0"></div> <div><label for="faderMax" class="svelte-idpdcv">Fader Maximum raw value</label> <input name="faderMax" type="number" min="0"></div> <p class="note svelte-idpdcv">You shouldn't touch this unless you are having issues with your faders
      either reaching <code>127</code> before the end of their travel, or not at all.<br><br> "Raw" analog values are read from the faders between 0 and 8192. Bring the
      fader maximum down until all faders smoothly travel from 0 to 127 on the debug
      view (bearing in mind there is a small dead zone at either end of a fader).</p>`,1),Ui=G(`<hr> <h3>I2C Leader/Follower</h3> <select><option>Follower</option><option>Leader</option></select> <p class="note svelte-idpdcv"><strong>Follower</strong> mode is for use with Teletype.</p> <p class="note svelte-idpdcv"><strong>Leader</strong> mode is for use with Ansible, TXo, ER-301. 16n will
      not respond to Teletype when in leader mode.</p> <p class="note svelte-idpdcv">This will not take effect until you restart (disconnect/reconnect) your
      16n.</p> <p class="note small svelte-idpdcv">("Leader" is sometimes also referred to as 'master' mode)</p>`,1),Gi=G("<!> <!> <!> <!> <!>",1);function Fi(n,e){se(e,!0);let t=Ee(()=>E.current&&ve(E.current.deviceId));var r=he(),s=Y(r);{var i=o=>{var c=Gi(),l=Y(c);{var a=b=>{var g=ki(),m=Y(g);He(m,{get checked(){return E.editing.ledOn},set checked(w){E.editing.ledOn=w},children:(w,T)=>{J();var D=ee("LED permanently on when powered");y(w,D)},$$slots:{default:!0}});var N=$(m,2);He(N,{get checked(){return E.editing.ledFlash},set checked(w){E.editing.ledFlash=w},children:(w,T)=>{J();var D=ee("LED flash on MIDI activity");y(w,D)},$$slots:{default:!0}}),y(b,g)};X(l,b=>{Re(F(t),"led",E.current.firmwareVersion)&&b(a)})}var d=$(l,2);He(d,{get checked(){return E.editing.controllerFlip},set checked(b){E.editing.controllerFlip=b},children:(b,g)=>{J();var m=ee("Rotate controller 180º");y(b,m)},$$slots:{default:!0}});var u=$(d,2);{var h=b=>{He(b,{get checked(){return E.editing.midiThru},set checked(g){E.editing.midiThru=g},children:(g,m)=>{J();var N=ee("Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)");y(g,N)},$$slots:{default:!0}})};X(u,b=>{Oe.gte(E.current.firmwareVersion,"2.1.0")&&b(h)})}var v=$(u,2);{var f=b=>{var g=Bi(),m=$(Y(g),4),N=$(U(m),2);ke(N),we(N,"max",8191),k(m);var w=$(m,2),T=$(U(w),2);ke(T),we(T,"max",8191),k(w),J(2),Jt(N,()=>E.editing.faderMin,D=>E.editing.faderMin=D),Jt(T,()=>E.editing.faderMax,D=>E.editing.faderMax=D),y(b,g)};X(v,b=>{Re(F(t),"faderCalibration",E.current.firmwareVersion)&&b(f)})}var I=$(v,2);{var C=b=>{var g=Ui(),m=$(Y(g),4),N=U(m);N.value=(N.__value=!1)==null?"":!1;var w=$(N);w.value=(w.__value=!0)==null?"":!0,k(m),J(8),Bn(m,()=>E.editing.i2cLeader,T=>E.editing.i2cLeader=T),y(b,g)};X(I,b=>{Re(F(t),"i2c",E.current.firmwareVersion)&&b(C)})}y(o,c)};X(s,o=>{E.current&&E.editing&&F(t)&&o(i)})}y(n,r),ie()}const Hi=(n,e)=>{e(e().highResolution=!e().highResolution,!0)};var qi=G("<option> </option>"),Vi=G('<dt class="hr-title svelte-1fipzis">High Resolution?</dt> <dd class="svelte-1fipzis"><input type="checkbox" class="svelte-1fipzis"></dd>',1),ji=G('<dl class="config-column svelte-1fipzis"><dt class="index svelte-1fipzis"> </dt> <dt class="no-top-border svelte-1fipzis">Channel</dt> <dd class="svelte-1fipzis"><select class="svelte-1fipzis"></select></dd> <dt class="svelte-1fipzis">CC</dt> <dd class="svelte-1fipzis"><input type="number" min="0" class="svelte-1fipzis"></dd> <!></dl>');function vn(n,e){se(e,!0);let t=Se(e,"editControl",15),r=Ee(()=>t().highResolution?95:127),s=Ee(()=>E.editing?ve(E.editing.deviceId):null),i=Ee(()=>F(s)&&E.editing&&Re(F(s),"highResolution",E.editing.firmwareVersion));const o=Array.from({length:16},(g,m)=>m+1),c=g=>{const m=g.target;parseInt(m.value)<0&&t(t().cc=0,!0),parseInt(m.value)>F(r)&&t(t().cc=F(r),!0)},l=()=>{t().cc>F(r)&&t(t().cc=F(r),!0)};var a=ji(),d=U(a),u=U(d,!0);k(d);var h=$(d,4),v=U(h);Pe(v,21,()=>o,De,(g,m)=>{var N=qi(),w={},T=U(N,!0);k(N),fe(()=>{w!==(w=F(m))&&(N.value=(N.__value=F(m))==null?"":F(m)),ge(T,F(m))}),y(g,N)}),k(v),k(h);var f=$(h,4),I=U(f);ke(I),I.__change=c,k(f);var C=$(f,2);{var b=g=>{var m=Vi(),N=Y(m);N.__click=[Hi,t];var w=$(N,2),T=U(w);ke(T),T.__change=l,k(w),vr("blur",T,l),Pn(T,()=>t().highResolution,D=>t(t().highResolution=D,!0)),y(g,m)};X(C,g=>{F(i)&&g(b)})}k(a),fe(()=>{ge(u,e.index+1),we(I,"max",F(r))}),Bn(v,()=>t().channel,g=>t(t().channel=g,!0)),vr("blur",I,c),Jt(I,()=>t().cc,g=>t(t().cc=g,!0)),y(n,a),ie()}sr(["change","click"]);var En=ks(()=>E),zi=G(`<p>"Factory Reset" will reset the configuration of your 16n back to 'default'
  values; primarily, MIDI CCs 32-48, Channel 1, for both TRS and USB MIDI.</p> <p>Note that this will also reset any calibration data or other options you may
  have adjusted on the "Device Options" tab. You will need to repeat this
  configuration after performing a reset.</p> <!>`,1);function Yi(n,e){se(e,!1);const t="Confirm that you wish to reset your controller configuration to the default values. You will lose any configuration stored on the controller.",r=()=>{z.selectedOutput&&confirm(t)&&(En(En().editMode=!1),zn(z.selectedOutput),setTimeout(()=>{z.selectedOutput&&dr(z.selectedOutput)},50))};Ln();var s=zi(),i=$(Y(s),4);ce(i,{icon:"history",onclick:r,$$events:{message(o){Un.call(this,e,o)}},children:(o,c)=>{J();var l=ee("Reset controller configuration to defaults");y(o,l)},$$slots:{default:!0}}),y(n,s),ie()}var Xi=G('<div class="subhead svelte-1o2kpty"><h2 class="svelte-1o2kpty"> </h2> <div class="details svelte-1o2kpty"><!></div></div>');function Kn(n,e){se(e,!0);var t=Xi(),r=U(t),s=U(r,!0);k(r);var i=$(r,2),o=U(i);{var c=l=>{var a=he(),d=Y(a);Ie(d,()=>e.children),y(l,a)};X(o,l=>{e.children&&l(c)})}k(i),k(t),fe(()=>ge(s,e.title)),y(n,t),ie()}var Wi=G("<p>The MIDI standard for a continuous controller sends 7-bit data - 0-127.</p> <p>“High resolution” CC data can send 14-bit data (0-16384).</p> <p>However: <strong>support for this is very limited</strong>. <em>If</em> you know you need it or can use it, go ahead, it’ll work. Both Ableton and Bitwig support this automatically - map a controller to a high-resolution MIDI output and it will automatically realise it’s 14-bit.</p> <p>If you think it sounds cool, but don’t know if your instruments or tools support it: you probably want to send standard 7-bit data. <strong>Don’t just click high resolution because it sounds better.</strong> Unless you know it’ll work, it might have unintended consequences.</p> <h4>How high-resolution CCs work</h4> <p>The 14 bits of data are split into two chunks, MSB/LSB style: one 7-bit chunk for bits 8-14, and one for bits 1-7. The higher significant chunk is sent on continuous controller number <code>x</code>; the lower significant chunk is sent on <code>x+32</code>. For instance, if you set a controller to send high-res data on CC <code>32</code> in the editor above, you’ll send the higher chunk on CC <code>32</code> and, simultaneously, the lower chunk on CC <code>64</code>. (This is why you should only use this feature if you think you need it: otherwise, you’re going to be sending extra CCs you might not want.)</p> <h4>Doesn’t my device have an ADC with less than 14 bits?</h4> <p>The RP2040 in 16nx devices only has a 12-bit ADC, and so the firmware actually multiples the read analog value by 4 (or left shifts it by 2, really) to get a 14-bit number. So yes, we don’t have 14 “real” usable bits of data.</p> <p>But: a 12-bit ADC probably doesn’t have <em>12</em> usable bits of data, really; one you filter out noise and jitter, you probably are working with 10 usable bits of data (ie: if you /4 or >> 2, you will filter out a lot of unwanted noise).</p> <p>But regardless: 10 usable bits - 0-1023 - is <em>still</em> better than 0-127. So there’s an advantage to using this, if it’s available to you.</p>",1);function Ki(n){var e=Wi();J(18),y(n,e)}var Ji=G('<details class="svelte-154bcv2"><summary class="svelte-154bcv2">What is High Resolution mode?</summary> <!></details>');function gn(n){var e=Ji(),t=$(U(e),2);Ki(t),k(e),y(n,e)}var Qi=G(`<div class="svelte-ryvu2e"><p><strong>Warning:</strong> </p> <p>The MIDI spec only allows for high-resolution CCs for CCs 0-31. <strong>However</strong>, some hardware or software is absolutely fine with
    high-resolution CCs on any channel. Check the documentation for your
    hardware or software; your faderbank configuration may still function
    correctly.</p></div>`);function bn(n,e){se(e,!1);let t=Se(e,"type",8);Ln();var r=Qi(),s=U(r),i=$(U(s));fe(()=>ge(i,` You have an one or more out-of-spec ${t().toLocaleUpperCase()??""} CC assignments.`)),k(s),J(2),k(r),y(n,r),ie()}const fr={};var Zi=G('<div class="tabs"><!></div>');function Jn(n,e){se(e,!0);const t=[],r=[],s=Er(null),i=Er(null);ys(fr,{registerTab:l=>{t.push(l),s.update(a=>a||l),pr(()=>{const a=t.indexOf(l);t.splice(a,1),s.update(d=>d===l?t[a]||t[t.length-1]:d)})},registerPanel:l=>{r.push(l),i.update(a=>a||l),pr(()=>{const a=r.indexOf(l);r.splice(a,1),i.update(d=>d===l?r[a]||r[r.length-1]:d)})},selectTab:l=>{const a=t.indexOf(l);s.set(l),i.set(r[a])},selectedTab:s,selectedPanel:i});var o=Zi(),c=U(o);Ie(c,()=>e.children??An),k(o),y(n,o),ie()}var ea=G('<div class="tab-list svelte-1c799zm"><!></div>');function Qn(n,e){se(e,!0);var t=ea(),r=U(t);{var s=i=>{var o=he(),c=Y(o);Ie(c,()=>e.children),y(i,o)};X(r,i=>{e.children&&i(s)})}k(t),y(n,t),ie()}function Me(n,e){se(e,!0);const t=Tn(),r=()=>On(o,"$selectedPanel",t),s={},{registerPanel:i,selectedPanel:o}=Mn(fr);i(s);var c=he(),l=Y(c);{var a=d=>{var u=he(),h=Y(u);Ie(h,()=>e.children),y(d,u)};X(l,d=>{e.children&&r()===s&&d(a)})}y(n,c),ie()}var ta=(n,e,t)=>e(t),ra=G('<button class="svelte-1rryekj"><!></button>');function Te(n,e){se(e,!0);const t=Tn(),r=()=>On(c,"$selectedTab",t),s={},{registerTab:i,selectTab:o,selectedTab:c}=Mn(fr);i(s);var l=ra();l.__click=[ta,o,s];var a=U(l);Ie(a,()=>e.children??An),k(l),fe(()=>xs(l,"selected",r()===s)),y(n,l),ie()}sr(["click"]);const na=(n,e)=>{const t=document.createElement("input");t.type="file",t.id="uploadedConfig",t.addEventListener("change",r=>{const s=r.target.files;if(s&&s.length>0){const i=s[0],o=new FileReader;o.addEventListener("load",()=>{const c=JSON.parse(o.result),l=gi(n,c);if(l){alert(l);return}else E.editing=bi(n,c),jn(n,e)?alert("Imported configuration is identical to currently loaded configuration; no changes to upload."):alert("New configuration imported. Choose 'update controller' to import, or 'Cancel' to abort")}),o.readAsText(i)}}),t.click(),t.remove()},sa=n=>{const e="data:text/json;charset=utf-8,"+encodeURIComponent(Ei(n)),t=document.createElement("a");t.href=e,t.download=`${ve(n.deviceId).name}_controller_config.json`,document.body.appendChild(t),t.click(),t.remove()};var ia=G("<!> <!> <!>",1),aa=G("<!> <!> <!> <!>",1),oa=G("<!><br> <!>",1),la=G("<!> <!>",1),ca=G('<div id="controls" class="svelte-1xvmucy"></div> <div id="extra-controls" class="svelte-1xvmucy"><div class="left svelte-1xvmucy"><!><br> <!></div> <div class="right svelte-1xvmucy"><!></div></div> <!>',1),ua=G("<!><br> <!>",1),da=G("<!> <!>",1),fa=G('<div id="controls" class="svelte-1xvmucy"></div> <div id="extra-controls" class="svelte-1xvmucy"><div class="left svelte-1xvmucy"><!><br> <!></div> <div class="right svelte-1xvmucy"><!></div></div> <!>',1),ha=G("<!> <!> <!> <!> <!>",1),ma=G("<!> <!>",1);function pa(n,e){se(e,!0);let t=Wt(!1);tr(()=>{E.editing&&E.current&&Ce(t,!jn(E.editing,E.current))});const r=()=>{E.editMode=!1},s=()=>{E.editing&&E.current&&na(E.editing,E.current)},i=()=>{if(!E.editing){console.error("No edit configuration found");return}if(!z.selectedOutput){console.error("No selected MIDI output found");return}Ue(E.editing),yi(E.editing,z.selectedOutput),E.current=structuredClone(Kt(E.editing)),E.editMode=!1,dr(z.selectedOutput)};let o=Ee(()=>E.current?ve(E.current.deviceId):null),c=Ee(()=>E.editing&&F(o)&&Re(F(o),"highResolution",E.editing.firmwareVersion)),l=Ee(()=>E.editing&&E.editing.usbControls.some(b=>b.highResolution&&b.cc>31)),a=Ee(()=>E.editing&&E.editing.trsControls.some(b=>b.highResolution&&b.cc>31));const d=(b,g)=>{var m,N;g=="usb"&&((m=E.editing)==null||m.usbControls.forEach(w=>{w.highResolution=b})),g=="trs"&&((N=E.editing)==null||N.trsControls.forEach(w=>{w.highResolution=b}))},u=b=>{if(!E.editing){console.error("No configuration to update");return}if(b=="usb"){const g=E.editing.usbControls[0].channel;for(let m=1;m<E.editing.usbControls.length;m++)E.editing.usbControls[m].channel=g}if(b=="trs"){const g=E.editing.trsControls[0].channel;for(let m=1;m<E.editing.trsControls.length;m++)E.editing.usbControls[m].channel=g}},h=b=>{if(!E.editing){console.error("No configuration to update");return}if(b=="usb"){const g=E.editing.usbControls[0].cc;for(let m=1;m<E.editing.usbControls.length;m++){let N=g+m,w=E.editing.usbControls[m].highResolution?95:127;E.editing.usbControls[m].cc=N>w?w:N}}if(b=="trs"){const g=E.editing.trsControls[0].cc;for(let m=1;m<E.editing.trsControls.length;m++){let N=g+m,w=E.editing.trsControls[m].highResolution?95:127;E.editing.usbControls[m].cc=N>w?w:N}}};var v=ma(),f=Y(v);Kn(f,{title:"Edit Configuration",children:(b,g)=>{var m=ia(),N=Y(m);ce(N,{icon:"times",onclick:r,children:(M,W)=>{J();var te=ee("Cancel");y(M,te)},$$slots:{default:!0}});var w=$(N,2);ce(w,{icon:"file-import",onclick:s,children:(M,W)=>{J();var te=ee("Import config");y(M,te)},$$slots:{default:!0}});var T=$(w,2),D=Ee(()=>!F(t));ce(T,{icon:"download",onclick:i,get disabled(){return F(D)},children:(M,W)=>{J();var te=ee("Update controller");y(M,te)},$$slots:{default:!0}}),y(b,m)},$$slots:{default:!0}});var I=$(f,2);{var C=b=>{Jn(b,{children:(g,m)=>{var N=ha(),w=Y(N);Qn(w,{children:(Z,ne)=>{var re=aa(),A=Y(re);Te(A,{children:(O,B)=>{J();var V=ee("USB");y(O,V)},$$slots:{default:!0}});var _=$(A,2);Te(_,{children:(O,B)=>{J();var V=ee("TRS Jack");y(O,V)},$$slots:{default:!0}});var x=$(_,2);Te(x,{children:(O,B)=>{J();var V=ee("Device Options");y(O,V)},$$slots:{default:!0}});var L=$(x,2);{var P=O=>{Te(O,{children:(B,V)=>{J();var H=ee("Factory Reset");y(B,H)},$$slots:{default:!0}})};X(L,O=>{E.current&&Oe.gte(E.current.firmwareVersion,"2.1.0")&&O(P)})}y(Z,re)},$$slots:{default:!0}});var T=$(w,2);Me(T,{children:(Z,ne)=>{var re=ca(),A=Y(re);Pe(A,21,()=>E.editing.usbControls,De,(q,j,K)=>{var me=he(),ae=Y(me);{var oe=le=>{vn(le,{get editControl(){return F(j)},index:K})};X(ae,le=>{F(o)&&K<F(o).controlCount&&le(oe)})}y(q,me)}),k(A);var _=$(A,2),x=U(_),L=U(x);ce(L,{onclick:()=>u("usb"),children:(q,j)=>{J();var K=ee("Set all channels to that of channel 1");y(q,K)},$$slots:{default:!0}});var P=$(L,3);ce(P,{onclick:()=>h("usb"),children:(q,j)=>{J();var K=ee("Set CCs sequentially, starting at channel 1");y(q,K)},$$slots:{default:!0}}),k(x);var O=$(x,2),B=U(O);{var V=q=>{var j=oa(),K=Y(j);ce(K,{onclick:()=>d(!0,"usb"),children:(ae,oe)=>{J();var le=ee("Set all USB channels to high-resolution (14 bit)");y(ae,le)},$$slots:{default:!0}});var me=$(K,3);ce(me,{onclick:()=>d(!1,"usb"),children:(ae,oe)=>{J();var le=ee("Set all USB channels to regular-resolution (7 bit)");y(ae,le)},$$slots:{default:!0}}),y(q,j)};X(B,q=>{F(c)&&q(V)})}k(O),k(_);var H=$(_,2);{var Q=q=>{var j=la(),K=Y(j);{var me=oe=>{bn(oe,{type:"usb"})};X(K,oe=>{F(l)&&oe(me)})}var ae=$(K,2);gn(ae),y(q,j)};X(H,q=>{F(c)&&q(Q)})}y(Z,re)},$$slots:{default:!0}});var D=$(T,2);Me(D,{children:(Z,ne)=>{var re=fa(),A=Y(re);Pe(A,21,()=>E.editing.trsControls,De,(q,j,K)=>{var me=he(),ae=Y(me);{var oe=le=>{vn(le,{get editControl(){return F(j)},index:K})};X(ae,le=>{F(o)&&K<F(o).controlCount&&le(oe)})}y(q,me)}),k(A);var _=$(A,2),x=U(_),L=U(x);ce(L,{onclick:()=>u("trs"),children:(q,j)=>{J();var K=ee("Set all channels to that of channel 1");y(q,K)},$$slots:{default:!0}});var P=$(L,3);ce(P,{onclick:()=>h("trs"),children:(q,j)=>{J();var K=ee("Set CCs sequentially, starting at channel 1");y(q,K)},$$slots:{default:!0}}),k(x);var O=$(x,2),B=U(O);{var V=q=>{var j=ua(),K=Y(j);ce(K,{onclick:()=>d(!0,"trs"),children:(ae,oe)=>{J();var le=ee("Set all TRS channels to high-resolution (14 bit)");y(ae,le)},$$slots:{default:!0}});var me=$(K,3);ce(me,{onclick:()=>d(!1,"trs"),children:(ae,oe)=>{J();var le=ee("Set all TRS channels to regular-resolution (7 bit)");y(ae,le)},$$slots:{default:!0}}),y(q,j)};X(B,q=>{F(c)&&q(V)})}k(O),k(_);var H=$(_,2);{var Q=q=>{var j=da(),K=Y(j);{var me=oe=>{bn(oe,{type:"trs"})};X(K,oe=>{F(a)&&oe(me)})}var ae=$(K,2);gn(ae),y(q,j)};X(H,q=>{F(c)&&q(Q)})}y(Z,re)},$$slots:{default:!0}});var M=$(D,2);Me(M,{children:(Z,ne)=>{Fi(Z,{})},$$slots:{default:!0}});var W=$(M,2);{var te=Z=>{Me(Z,{children:(ne,re)=>{Yi(ne,{$$events:{message(A){Un.call(this,e,A)}}})},$$slots:{default:!0}})};X(W,Z=>{E.current&&Oe.gte(E.current.firmwareVersion,"2.1.0")&&Z(te)})}y(g,N)},$$slots:{default:!0}})};X(I,b=>{E.editing&&b(C)})}y(n,v),ie()}var va=G(`<span class="hires svelte-1ifkqf8" title="This channel is in high-resolution mode, meaning it also uses a 'shadow' CC, 32 above the main CC"> </span>`),Ea=G("<span> </span>"),ga=G('<dt class="svelte-1ifkqf8">Value</dt> <dd class="display svelte-1ifkqf8"><div class="inner svelte-1ifkqf8"><!> <div class="bar svelte-1ifkqf8"></div></div></dd>',1),ba=G('<dl class="config-column svelte-1ifkqf8"><dt class="index svelte-1ifkqf8"> </dt> <dt class="svelte-1ifkqf8">Channel</dt> <dd class="svelte-1ifkqf8"> </dd> <dt class="svelte-1ifkqf8">CC</dt> <dd class="svelte-1ifkqf8"> <!></dd> <!></dl>');function _n(n,e){se(e,!0);let t=Se(e,"disableValue",3,!1),r=Ee(()=>e.control.highResolution?(e.control.val||0)>>7:e.control.val),s=Ee(()=>e.control.highResolution?3456:27);var i=ba(),o=U(i),c=U(o,!0);k(o);var l=$(o,4),a=U(l,!0);k(l);var d=$(l,4),u=U(d),h=$(u);{var v=C=>{var b=va(),g=U(b);k(b),fe(()=>ge(g,`& ${e.control.cc+32}`)),y(C,b)};X(h,C=>{e.control.highResolution&&C(v)})}k(d);var f=$(d,2);{var I=C=>{var b=ga(),g=$(Y(b),2),m=U(g),N=U(m);{var w=D=>{var M=Ea(),W=U(M,!0);k(M),fe(()=>{Dn(M,Os({controlval:!0,highresolution:e.control.highResolution,lowvalue:e.control.val<F(s)}),"svelte-1ifkqf8"),ge(W,e.control.val)}),y(D,M)};X(N,D=>{e.control.val!==void 0&&D(w)})}var T=$(N,2);k(m),k(g),fe(()=>we(T,"style",`height: ${F(r)??""}px`)),y(C,b)};X(f,C=>{t()||C(I)})}k(i),fe(()=>{ge(c,e.index+1),ge(a,e.control.channel),ge(u,`${e.control.cc??""} `)}),y(n,i),ie()}var _a=G("<!> <!>",1),Na=G("<!> <!>",1),ya=G('<div id="controls" class="svelte-13ul1lp"></div>'),Ra=G('<div id="controls" class="svelte-13ul1lp"></div> <p>There is no realtime preview of the TRS outputs.</p>',1),Sa=G("<!> <!> <!>",1),wa=G("<!> <!>",1);function Ia(n,e){se(e,!0);const t=()=>{E.current&&(sa(Kt(E.current)),console.log("Export complete"))},r=()=>{E.editMode=!0,E.current&&(E.editing=structuredClone(Kt(E.current)))};let s=Ee(()=>E.current?ve(E.current.deviceId):null);var i=he(),o=Y(i);{var c=l=>{var a=wa(),d=Y(a);Kn(d,{title:"Current Configuration",children:(h,v)=>{var f=_a(),I=Y(f);ce(I,{icon:"file-export",onclick:t,children:(b,g)=>{J();var m=ee("Export current config");y(b,m)},$$slots:{default:!0}});var C=$(I,2);ce(C,{icon:"pencil-alt",onclick:r,children:(b,g)=>{J();var m=ee("Edit config");y(b,m)},$$slots:{default:!0}}),y(h,f)},$$slots:{default:!0}});var u=$(d,2);Jn(u,{children:(h,v)=>{var f=Sa(),I=Y(f);Qn(I,{children:(g,m)=>{var N=Na(),w=Y(N);Te(w,{children:(D,M)=>{J();var W=ee("USB");y(D,W)},$$slots:{default:!0}});var T=$(w,2);Te(T,{children:(D,M)=>{J();var W=ee("TRS Jack");y(D,W)},$$slots:{default:!0}}),y(g,N)},$$slots:{default:!0}});var C=$(I,2);Me(C,{children:(g,m)=>{var N=ya();Pe(N,21,()=>E.current.usbControls,De,(w,T,D)=>{var M=he(),W=Y(M);{var te=Z=>{_n(Z,{get control(){return F(T)},index:D})};X(W,Z=>{F(s)&&D<F(s).controlCount&&Z(te)})}y(w,M)}),k(N),y(g,N)},$$slots:{default:!0}});var b=$(C,2);Me(b,{children:(g,m)=>{var N=Ra(),w=Y(N);Pe(w,21,()=>E.current.trsControls,De,(T,D,M)=>{var W=he(),te=Y(W);{var Z=ne=>{_n(ne,{get control(){return F(D)},index:M,disableValue:!0})};X(te,ne=>{F(s)&&M<F(s).controlCount&&ne(Z)})}y(T,W)}),k(w),J(2),y(g,N)},$$slots:{default:!0}}),y(h,f)},$$slots:{default:!0}}),y(l,a)};X(o,l=>{E.current&&l(c)})}y(n,i),ie()}var Ca=G(`<div class="notice svelte-kpoxps"><p>It looks like a 16n is trying to connect, but may have a corrupt
              memory.</p> <p><!></p></div>`),Aa=G("<!> <p></p>",1),Ma=G('<p class="notice svelte-kpoxps">Connect a controller via USB.</p>'),Ta=G(`<p class="notice svelte-kpoxps">WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.</p>`),Oa=G('<main class="svelte-kpoxps"><div id="head" class="svelte-kpoxps"><h1 class="svelte-kpoxps">16n configuration tool</h1> <!></div> <div id="inner" class="svelte-kpoxps"><!></div> <div id="foot" class="svelte-kpoxps"><div class="foot-left svelte-kpoxps"></div></div></main>');function Ga(n,e){se(e,!0);const t="2.1.2",r=!!navigator.requestMIDIAccess;Ss(()=>{r&&R.enable({sysex:!0}).then(wi).catch(f=>alert(f))}),tr(()=>{z.selectedInput&&(z.inputs.forEach(f=>{f.removeListener()}),Xn(z.selectedInput),Wn(z.selectedInput),E.current=null,Zt()),z.selectedOutput&&(E.current=null,Zt())});const s=()=>{z.selectedOutput&&zn(z.selectedOutput)};var i=Oa(),o=U(i),c=$(U(o),2);Di(c,{}),k(o);var l=$(o,2),a=U(l);{var d=f=>{var I=he(),C=Y(I);{var b=m=>{var N=he(),w=Y(N);{var T=M=>{var W=Ca(),te=$(U(W),2),Z=U(te);ce(Z,{onclick:s,children:(ne,re)=>{J();var A=ee("Click to reset your 16n's EEPROM to factory defaults");y(ne,A)},$$slots:{default:!0}}),k(te),k(W),y(M,W)},D=M=>{var W=Aa(),te=Y(W);{var Z=re=>{pa(re,{})},ne=re=>{Ia(re,{})};X(te,re=>{E.editMode?re(Z):re(ne,!1)})}J(2),y(M,W)};X(w,M=>{E.controllerMightNeedFactoryReset&&Oe.gte(E.current.firmwareVersion,"2.1.0")?M(T):M(D,!1)})}y(m,N)},g=m=>{var N=Ma();y(m,N)};X(C,m=>{E.current?m(b):m(g,!1)})}y(f,I)},u=f=>{var I=Ta();y(f,I)};X(a,f=>{z.webMidiEnabled?f(d):f(u,!1)})}k(l);var h=$(l,2),v=U(h);v.textContent=`16n Editor v${t}`,k(h),k(i),y(n,i),ie()}export{Ga as component};
