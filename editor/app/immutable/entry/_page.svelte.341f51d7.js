import{K as ye,S as Ee,i as _e,s as ge,k as w,l as I,m as L,h as m,n as O,b as g,I as ue,a as Y,q as H,c as z,r as x,H as _,L as Ne,g as b,v as he,d as R,f as de,u as we,y as W,z as J,A as K,B as Z,M as vr,e as ae,J as le,N as Dt,C as Ye,E as ze,F as Xe,G as We,w as ut,O as ht,P as Ge,Q as dt,R as qe,T as Pt,U as Qn,V as mt,W as er,X as et,Y as Ve,Z as tr,_ as $r,$ as nr,a0 as Zt,p as Qt,a1 as en,o as Nr}from"../chunks/index.5a5c9353.js";import{w as Ie}from"../chunks/index.3c44c25d.js";var Te={},yr={get exports(){return Te},set exports(i){Te=i}};const Sr="2.0.0",wr=256,Ir=Number.MAX_SAFE_INTEGER||9007199254740991,Rr=16;var gt={SEMVER_SPEC_VERSION:Sr,MAX_LENGTH:wr,MAX_SAFE_INTEGER:Ir,MAX_SAFE_COMPONENT_LENGTH:Rr};const Ar=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};var bt=Ar;(function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:t}=gt,n=bt;e=i.exports={};const r=e.re=[],s=e.src=[],a=e.t={};let l=0;const o=(c,u,f)=>{const d=l++;n(c,d,u),a[c]=d,s[d]=u,r[d]=new RegExp(u,f?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","[0-9]+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),o("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),o("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),o("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),o("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),o("BUILDIDENTIFIER","[0-9A-Za-z-]+"),o("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),o("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),o("FULL",`^${s[a.FULLPLAIN]}$`),o("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),o("LOOSE",`^${s[a.LOOSEPLAIN]}$`),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),o("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),o("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),o("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),o("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),o("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),o("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),o("COERCERTL",s[a.COERCE],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",o("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),o("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),o("LONECARET","(?:\\^)"),o("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",o("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),o("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),o("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),o("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),o("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),o("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(yr,Te);const Cr=["includePrerelease","loose","rtl"],Mr=i=>i?typeof i!="object"?{loose:!0}:Cr.filter(e=>i[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};var vt=Mr;const tn=/^[0-9]+$/,rr=(i,e)=>{const t=tn.test(i),n=tn.test(e);return t&&n&&(i=+i,e=+e),i===e?0:t&&!n?-1:n&&!t?1:i<e?-1:1},Tr=(i,e)=>rr(e,i);var sr={compareIdentifiers:rr,rcompareIdentifiers:Tr};const rt=bt,{MAX_LENGTH:nn,MAX_SAFE_INTEGER:st}=gt,{re:rn,t:sn}=Te,Or=vt,{compareIdentifiers:Ue}=sr;let Lr=class Ce{constructor(e,t){if(t=Or(t),e instanceof Ce){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>nn)throw new TypeError(`version is longer than ${nn} characters`);rt("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?rn[sn.LOOSE]:rn[sn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>st||this.major<0)throw new TypeError("Invalid major version");if(this.minor>st||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>st||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const s=+r;if(s>=0&&s<st)return s}return r}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(rt("SemVer.compare",this.version,this.options,e),!(e instanceof Ce)){if(typeof e=="string"&&e===this.version)return 0;e=new Ce(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Ce||(e=new Ce(e,this.options)),Ue(this.major,e.major)||Ue(this.minor,e.minor)||Ue(this.patch,e.patch)}comparePre(e){if(e instanceof Ce||(e=new Ce(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(rt("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Ue(n,r)}while(++t)}compareBuild(e){e instanceof Ce||(e=new Ce(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(rt("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Ue(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(Ue(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var $e=Lr;const{MAX_LENGTH:Dr}=gt,{re:an,t:ln}=Te,on=$e,kr=vt,Pr=(i,e)=>{if(e=kr(e),i instanceof on)return i;if(typeof i!="string"||i.length>Dr||!(e.loose?an[ln.LOOSE]:an[ln.FULL]).test(i))return null;try{return new on(i,e)}catch{return null}};var Je=Pr;const Br=Je,Ur=(i,e)=>{const t=Br(i,e);return t?t.version:null};var Gr=Ur;const Fr=Je,Vr=(i,e)=>{const t=Fr(i.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var Hr=Vr;const cn=$e,xr=(i,e,t,n)=>{typeof t=="string"&&(n=t,t=void 0);try{return new cn(i instanceof cn?i.version:i,t).inc(e,n).version}catch{return null}};var jr=xr;const fn=$e,qr=(i,e,t)=>new fn(i,t).compare(new fn(e,t));var Re=qr;const Yr=Re,zr=(i,e,t)=>Yr(i,e,t)===0;var Bt=zr;const un=Je,Xr=Bt,Wr=(i,e)=>{if(Xr(i,e))return null;{const t=un(i),n=un(e),r=t.prerelease.length||n.prerelease.length,s=r?"pre":"",a=r?"prerelease":"";for(const l in t)if((l==="major"||l==="minor"||l==="patch")&&t[l]!==n[l])return s+l;return a}};var Jr=Wr;const Kr=$e,Zr=(i,e)=>new Kr(i,e).major;var Qr=Zr;const es=$e,ts=(i,e)=>new es(i,e).minor;var ns=ts;const rs=$e,ss=(i,e)=>new rs(i,e).patch;var is=ss;const as=Je,ls=(i,e)=>{const t=as(i,e);return t&&t.prerelease.length?t.prerelease:null};var os=ls;const cs=Re,fs=(i,e,t)=>cs(e,i,t);var us=fs;const hs=Re,ds=(i,e)=>hs(i,e,!0);var ms=ds;const hn=$e,ps=(i,e,t)=>{const n=new hn(i,t),r=new hn(e,t);return n.compare(r)||n.compareBuild(r)};var Ut=ps;const Es=Ut,_s=(i,e)=>i.sort((t,n)=>Es(t,n,e));var gs=_s;const bs=Ut,vs=(i,e)=>i.sort((t,n)=>bs(n,t,e));var $s=vs;const Ns=Re,ys=(i,e,t)=>Ns(i,e,t)>0;var $t=ys;const Ss=Re,ws=(i,e,t)=>Ss(i,e,t)<0;var Gt=ws;const Is=Re,Rs=(i,e,t)=>Is(i,e,t)!==0;var ir=Rs;const As=Re,Cs=(i,e,t)=>As(i,e,t)>=0;var Ft=Cs;const Ms=Re,Ts=(i,e,t)=>Ms(i,e,t)<=0;var Vt=Ts;const Os=Bt,Ls=ir,Ds=$t,ks=Ft,Ps=Gt,Bs=Vt,Us=(i,e,t,n)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i===t;case"!==":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i!==t;case"":case"=":case"==":return Os(i,t,n);case"!=":return Ls(i,t,n);case">":return Ds(i,t,n);case">=":return ks(i,t,n);case"<":return Ps(i,t,n);case"<=":return Bs(i,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var ar=Us;const Gs=$e,Fs=Je,{re:it,t:at}=Te,Vs=(i,e)=>{if(i instanceof Gs)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let t=null;if(!e.rtl)t=i.match(it[at.COERCE]);else{let n;for(;(n=it[at.COERCERTL].exec(i))&&(!t||t.index+t[0].length!==i.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),it[at.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;it[at.COERCERTL].lastIndex=-1}return t===null?null:Fs(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};var Hs=Vs,St,dn;function xs(){return dn||(dn=1,St=function(i){i.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),St}var wt,mn;function js(){if(mn)return wt;mn=1,wt=i,i.Node=r,i.create=i;function i(s){var a=this;if(a instanceof i||(a=new i),a.tail=null,a.head=null,a.length=0,s&&typeof s.forEach=="function")s.forEach(function(c){a.push(c)});else if(arguments.length>0)for(var l=0,o=arguments.length;l<o;l++)a.push(arguments[l]);return a}i.prototype.removeNode=function(s){if(s.list!==this)throw new Error("removing node which does not belong to this list");var a=s.next,l=s.prev;return a&&(a.prev=l),l&&(l.next=a),s===this.head&&(this.head=a),s===this.tail&&(this.tail=l),s.list.length--,s.next=null,s.prev=null,s.list=null,a},i.prototype.unshiftNode=function(s){if(s!==this.head){s.list&&s.list.removeNode(s);var a=this.head;s.list=this,s.next=a,a&&(a.prev=s),this.head=s,this.tail||(this.tail=s),this.length++}},i.prototype.pushNode=function(s){if(s!==this.tail){s.list&&s.list.removeNode(s);var a=this.tail;s.list=this,s.prev=a,a&&(a.next=s),this.tail=s,this.head||(this.head=s),this.length++}},i.prototype.push=function(){for(var s=0,a=arguments.length;s<a;s++)t(this,arguments[s]);return this.length},i.prototype.unshift=function(){for(var s=0,a=arguments.length;s<a;s++)n(this,arguments[s]);return this.length},i.prototype.pop=function(){if(this.tail){var s=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,s}},i.prototype.shift=function(){if(this.head){var s=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,s}},i.prototype.forEach=function(s,a){a=a||this;for(var l=this.head,o=0;l!==null;o++)s.call(a,l.value,o,this),l=l.next},i.prototype.forEachReverse=function(s,a){a=a||this;for(var l=this.tail,o=this.length-1;l!==null;o--)s.call(a,l.value,o,this),l=l.prev},i.prototype.get=function(s){for(var a=0,l=this.head;l!==null&&a<s;a++)l=l.next;if(a===s&&l!==null)return l.value},i.prototype.getReverse=function(s){for(var a=0,l=this.tail;l!==null&&a<s;a++)l=l.prev;if(a===s&&l!==null)return l.value},i.prototype.map=function(s,a){a=a||this;for(var l=new i,o=this.head;o!==null;)l.push(s.call(a,o.value,this)),o=o.next;return l},i.prototype.mapReverse=function(s,a){a=a||this;for(var l=new i,o=this.tail;o!==null;)l.push(s.call(a,o.value,this)),o=o.prev;return l},i.prototype.reduce=function(s,a){var l,o=this.head;if(arguments.length>1)l=a;else if(this.head)o=this.head.next,l=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=0;o!==null;c++)l=s(l,o.value,c),o=o.next;return l},i.prototype.reduceReverse=function(s,a){var l,o=this.tail;if(arguments.length>1)l=a;else if(this.tail)o=this.tail.prev,l=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=this.length-1;o!==null;c--)l=s(l,o.value,c),o=o.prev;return l},i.prototype.toArray=function(){for(var s=new Array(this.length),a=0,l=this.head;l!==null;a++)s[a]=l.value,l=l.next;return s},i.prototype.toArrayReverse=function(){for(var s=new Array(this.length),a=0,l=this.tail;l!==null;a++)s[a]=l.value,l=l.prev;return s},i.prototype.slice=function(s,a){a=a||this.length,a<0&&(a+=this.length),s=s||0,s<0&&(s+=this.length);var l=new i;if(a<s||a<0)return l;s<0&&(s=0),a>this.length&&(a=this.length);for(var o=0,c=this.head;c!==null&&o<s;o++)c=c.next;for(;c!==null&&o<a;o++,c=c.next)l.push(c.value);return l},i.prototype.sliceReverse=function(s,a){a=a||this.length,a<0&&(a+=this.length),s=s||0,s<0&&(s+=this.length);var l=new i;if(a<s||a<0)return l;s<0&&(s=0),a>this.length&&(a=this.length);for(var o=this.length,c=this.tail;c!==null&&o>a;o--)c=c.prev;for(;c!==null&&o>s;o--,c=c.prev)l.push(c.value);return l},i.prototype.splice=function(s,a,...l){s>this.length&&(s=this.length-1),s<0&&(s=this.length+s);for(var o=0,c=this.head;c!==null&&o<s;o++)c=c.next;for(var u=[],o=0;c&&o<a;o++)u.push(c.value),c=this.removeNode(c);c===null&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev);for(var o=0;o<l.length;o++)c=e(this,c,l[o]);return u},i.prototype.reverse=function(){for(var s=this.head,a=this.tail,l=s;l!==null;l=l.prev){var o=l.prev;l.prev=l.next,l.next=o}return this.head=a,this.tail=s,this};function e(s,a,l){var o=a===s.head?new r(l,null,a,s):new r(l,a,a.next,s);return o.next===null&&(s.tail=o),o.prev===null&&(s.head=o),s.length++,o}function t(s,a){s.tail=new r(a,s.tail,null,s),s.head||(s.head=s.tail),s.length++}function n(s,a){s.head=new r(a,null,s.head,s),s.tail||(s.tail=s.head),s.length++}function r(s,a,l,o){if(!(this instanceof r))return new r(s,a,l,o);this.list=o,this.value=s,a?(a.next=this,this.prev=a):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}try{xs()(i)}catch{}return wt}var It,pn;function qs(){if(pn)return It;pn=1;const i=js(),e=Symbol("max"),t=Symbol("length"),n=Symbol("lengthCalculator"),r=Symbol("allowStale"),s=Symbol("maxAge"),a=Symbol("dispose"),l=Symbol("noDisposeOnSet"),o=Symbol("lruList"),c=Symbol("cache"),u=Symbol("updateAgeOnGet"),f=()=>1;class d{constructor(p){if(typeof p=="number"&&(p={max:p}),p||(p={}),p.max&&(typeof p.max!="number"||p.max<0))throw new TypeError("max must be a non-negative number");this[e]=p.max||1/0;const T=p.length||f;if(this[n]=typeof T!="function"?f:T,this[r]=p.stale||!1,p.maxAge&&typeof p.maxAge!="number")throw new TypeError("maxAge must be a number");this[s]=p.maxAge||0,this[a]=p.dispose,this[l]=p.noDisposeOnSet||!1,this[u]=p.updateAgeOnGet||!1,this.reset()}set max(p){if(typeof p!="number"||p<0)throw new TypeError("max must be a non-negative number");this[e]=p||1/0,F(this)}get max(){return this[e]}set allowStale(p){this[r]=!!p}get allowStale(){return this[r]}set maxAge(p){if(typeof p!="number")throw new TypeError("maxAge must be a non-negative number");this[s]=p,F(this)}get maxAge(){return this[s]}set lengthCalculator(p){typeof p!="function"&&(p=f),p!==this[n]&&(this[n]=p,this[t]=0,this[o].forEach(T=>{T.length=this[n](T.value,T.key),this[t]+=T.length})),F(this)}get lengthCalculator(){return this[n]}get length(){return this[t]}get itemCount(){return this[o].length}rforEach(p,T){T=T||this;for(let U=this[o].tail;U!==null;){const j=U.prev;B(this,p,U,T),U=j}}forEach(p,T){T=T||this;for(let U=this[o].head;U!==null;){const j=U.next;B(this,p,U,T),U=j}}keys(){return this[o].toArray().map(p=>p.key)}values(){return this[o].toArray().map(p=>p.value)}reset(){this[a]&&this[o]&&this[o].length&&this[o].forEach(p=>this[a](p.key,p.value)),this[c]=new Map,this[o]=new i,this[t]=0}dump(){return this[o].map(p=>y(this,p)?!1:{k:p.key,v:p.value,e:p.now+(p.maxAge||0)}).toArray().filter(p=>p)}dumpLru(){return this[o]}set(p,T,U){if(U=U||this[s],U&&typeof U!="number")throw new TypeError("maxAge must be a number");const j=U?Date.now():0,se=this[n](T,p);if(this[c].has(p)){if(se>this[e])return k(this,this[c].get(p)),!1;const C=this[c].get(p).value;return this[a]&&(this[l]||this[a](p,C.value)),C.now=j,C.maxAge=U,C.value=T,this[t]+=se-C.length,C.length=se,this.get(p),F(this),!0}const ee=new A(p,T,se,j,U);return ee.length>this[e]?(this[a]&&this[a](p,T),!1):(this[t]+=ee.length,this[o].unshift(ee),this[c].set(p,this[o].head),F(this),!0)}has(p){if(!this[c].has(p))return!1;const T=this[c].get(p).value;return!y(this,T)}get(p){return h(this,p,!0)}peek(p){return h(this,p,!1)}pop(){const p=this[o].tail;return p?(k(this,p),p.value):null}del(p){k(this,this[c].get(p))}load(p){this.reset();const T=Date.now();for(let U=p.length-1;U>=0;U--){const j=p[U],se=j.e||0;if(se===0)this.set(j.k,j.v);else{const ee=se-T;ee>0&&this.set(j.k,j.v,ee)}}}prune(){this[c].forEach((p,T)=>h(this,T,!1))}}const h=(P,p,T)=>{const U=P[c].get(p);if(U){const j=U.value;if(y(P,j)){if(k(P,U),!P[r])return}else T&&(P[u]&&(U.value.now=Date.now()),P[o].unshiftNode(U));return j.value}},y=(P,p)=>{if(!p||!p.maxAge&&!P[s])return!1;const T=Date.now()-p.now;return p.maxAge?T>p.maxAge:P[s]&&T>P[s]},F=P=>{if(P[t]>P[e])for(let p=P[o].tail;P[t]>P[e]&&p!==null;){const T=p.prev;k(P,p),p=T}},k=(P,p)=>{if(p){const T=p.value;P[a]&&P[a](T.key,T.value),P[t]-=T.length,P[c].delete(T.key),P[o].removeNode(p)}};class A{constructor(p,T,U,j,se){this.key=p,this.value=T,this.length=U,this.now=j,this.maxAge=se||0}}const B=(P,p,T,U)=>{let j=T.value;y(P,j)&&(k(P,T),P[r]||(j=void 0)),j&&p.call(U,j.value,j.key,P)};return It=d,It}var Rt,En;function Ae(){if(En)return Rt;En=1;class i{constructor(S,v){if(v=n(v),S instanceof i)return S.loose===!!v.loose&&S.includePrerelease===!!v.includePrerelease?S:new i(S.raw,v);if(S instanceof r)return this.raw=S.value,this.set=[[S]],this.format(),this;if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=S,this.set=S.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${S}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(V=>!d(V[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&h(V[0])){this.set=[V];break}}}this.format()}format(){return this.range=this.set.map(S=>S.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(S){S=S.trim();const D=`parseRange:${Object.keys(this.options).join(",")}:${S}`,V=t.get(D);if(V)return V;const G=this.options.loose,q=G?l[o.HYPHENRANGELOOSE]:l[o.HYPHENRANGE];S=S.replace(q,ee(this.options.includePrerelease)),s("hyphen replace",S),S=S.replace(l[o.COMPARATORTRIM],c),s("comparator trim",S),S=S.replace(l[o.TILDETRIM],u),S=S.replace(l[o.CARETTRIM],f),S=S.split(/\s+/).join(" ");let Q=S.split(" ").map(ie=>F(ie,this.options)).join(" ").split(/\s+/).map(ie=>se(ie,this.options));G&&(Q=Q.filter(ie=>(s("loose invalid filter",ie,this.options),!!ie.match(l[o.COMPARATORLOOSE])))),s("range list",Q);const X=new Map,ne=Q.map(ie=>new r(ie,this.options));for(const ie of ne){if(d(ie))return[ie];X.set(ie.value,ie)}X.size>1&&X.has("")&&X.delete("");const oe=[...X.values()];return t.set(D,oe),oe}intersects(S,v){if(!(S instanceof i))throw new TypeError("a Range is required");return this.set.some(D=>y(D,v)&&S.set.some(V=>y(V,v)&&D.every(G=>V.every(q=>G.intersects(q,v)))))}test(S){if(!S)return!1;if(typeof S=="string")try{S=new a(S,this.options)}catch{return!1}for(let v=0;v<this.set.length;v++)if(fe(this.set[v],S,this.options))return!0;return!1}}Rt=i;const e=qs(),t=new e({max:1e3}),n=vt,r=Nt(),s=bt,a=$e,{re:l,t:o,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:f}=Te,d=C=>C.value==="<0.0.0-0",h=C=>C.value==="",y=(C,S)=>{let v=!0;const D=C.slice();let V=D.pop();for(;v&&D.length;)v=D.every(G=>V.intersects(G,S)),V=D.pop();return v},F=(C,S)=>(s("comp",C,S),C=P(C,S),s("caret",C),C=A(C,S),s("tildes",C),C=T(C,S),s("xrange",C),C=j(C,S),s("stars",C),C),k=C=>!C||C.toLowerCase()==="x"||C==="*",A=(C,S)=>C.trim().split(/\s+/).map(v=>B(v,S)).join(" "),B=(C,S)=>{const v=S.loose?l[o.TILDELOOSE]:l[o.TILDE];return C.replace(v,(D,V,G,q,Q)=>{s("tilde",C,D,V,G,q,Q);let X;return k(V)?X="":k(G)?X=`>=${V}.0.0 <${+V+1}.0.0-0`:k(q)?X=`>=${V}.${G}.0 <${V}.${+G+1}.0-0`:Q?(s("replaceTilde pr",Q),X=`>=${V}.${G}.${q}-${Q} <${V}.${+G+1}.0-0`):X=`>=${V}.${G}.${q} <${V}.${+G+1}.0-0`,s("tilde return",X),X})},P=(C,S)=>C.trim().split(/\s+/).map(v=>p(v,S)).join(" "),p=(C,S)=>{s("caret",C,S);const v=S.loose?l[o.CARETLOOSE]:l[o.CARET],D=S.includePrerelease?"-0":"";return C.replace(v,(V,G,q,Q,X)=>{s("caret",C,V,G,q,Q,X);let ne;return k(G)?ne="":k(q)?ne=`>=${G}.0.0${D} <${+G+1}.0.0-0`:k(Q)?G==="0"?ne=`>=${G}.${q}.0${D} <${G}.${+q+1}.0-0`:ne=`>=${G}.${q}.0${D} <${+G+1}.0.0-0`:X?(s("replaceCaret pr",X),G==="0"?q==="0"?ne=`>=${G}.${q}.${Q}-${X} <${G}.${q}.${+Q+1}-0`:ne=`>=${G}.${q}.${Q}-${X} <${G}.${+q+1}.0-0`:ne=`>=${G}.${q}.${Q}-${X} <${+G+1}.0.0-0`):(s("no pr"),G==="0"?q==="0"?ne=`>=${G}.${q}.${Q}${D} <${G}.${q}.${+Q+1}-0`:ne=`>=${G}.${q}.${Q}${D} <${G}.${+q+1}.0-0`:ne=`>=${G}.${q}.${Q} <${+G+1}.0.0-0`),s("caret return",ne),ne})},T=(C,S)=>(s("replaceXRanges",C,S),C.split(/\s+/).map(v=>U(v,S)).join(" ")),U=(C,S)=>{C=C.trim();const v=S.loose?l[o.XRANGELOOSE]:l[o.XRANGE];return C.replace(v,(D,V,G,q,Q,X)=>{s("xRange",C,D,V,G,q,Q,X);const ne=k(G),oe=ne||k(q),ie=oe||k(Q),re=ie;return V==="="&&re&&(V=""),X=S.includePrerelease?"-0":"",ne?V===">"||V==="<"?D="<0.0.0-0":D="*":V&&re?(oe&&(q=0),Q=0,V===">"?(V=">=",oe?(G=+G+1,q=0,Q=0):(q=+q+1,Q=0)):V==="<="&&(V="<",oe?G=+G+1:q=+q+1),V==="<"&&(X="-0"),D=`${V+G}.${q}.${Q}${X}`):oe?D=`>=${G}.0.0${X} <${+G+1}.0.0-0`:ie&&(D=`>=${G}.${q}.0${X} <${G}.${+q+1}.0-0`),s("xRange return",D),D})},j=(C,S)=>(s("replaceStars",C,S),C.trim().replace(l[o.STAR],"")),se=(C,S)=>(s("replaceGTE0",C,S),C.trim().replace(l[S.includePrerelease?o.GTE0PRE:o.GTE0],"")),ee=C=>(S,v,D,V,G,q,Q,X,ne,oe,ie,re,zt)=>(k(D)?v="":k(V)?v=`>=${D}.0.0${C?"-0":""}`:k(G)?v=`>=${D}.${V}.0${C?"-0":""}`:q?v=`>=${v}`:v=`>=${v}${C?"-0":""}`,k(ne)?X="":k(oe)?X=`<${+ne+1}.0.0-0`:k(ie)?X=`<${ne}.${+oe+1}.0-0`:re?X=`<=${ne}.${oe}.${ie}-${re}`:C?X=`<${ne}.${oe}.${+ie+1}-0`:X=`<=${X}`,`${v} ${X}`.trim()),fe=(C,S,v)=>{for(let D=0;D<C.length;D++)if(!C[D].test(S))return!1;if(S.prerelease.length&&!v.includePrerelease){for(let D=0;D<C.length;D++)if(s(C[D].semver),C[D].semver!==r.ANY&&C[D].semver.prerelease.length>0){const V=C[D].semver;if(V.major===S.major&&V.minor===S.minor&&V.patch===S.patch)return!0}return!1}return!0};return Rt}var At,_n;function Nt(){if(_n)return At;_n=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(u,f){if(f=t(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===i?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const f=this.options.loose?n[r.COMPARATORLOOSE]:n[r.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new l(d[2],this.options.loose):this.semver=i}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===i||u===i)return!0;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");if((!f||typeof f!="object")&&(f={loose:!!f,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new o(u.value,f).test(this.value);if(u.operator==="")return u.value===""?!0:new o(this.value,f).test(u.semver);const d=(this.operator===">="||this.operator===">")&&(u.operator===">="||u.operator===">"),h=(this.operator==="<="||this.operator==="<")&&(u.operator==="<="||u.operator==="<"),y=this.semver.version===u.semver.version,F=(this.operator===">="||this.operator==="<=")&&(u.operator===">="||u.operator==="<="),k=s(this.semver,"<",u.semver,f)&&(this.operator===">="||this.operator===">")&&(u.operator==="<="||u.operator==="<"),A=s(this.semver,">",u.semver,f)&&(this.operator==="<="||this.operator==="<")&&(u.operator===">="||u.operator===">");return d||h||y&&F||k||A}}At=e;const t=vt,{re:n,t:r}=Te,s=ar,a=bt,l=$e,o=Ae();return At}const Ys=Ae(),zs=(i,e,t)=>{try{e=new Ys(e,t)}catch{return!1}return e.test(i)};var yt=zs;const Xs=Ae(),Ws=(i,e)=>new Xs(i,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));var Js=Ws;const Ks=$e,Zs=Ae(),Qs=(i,e,t)=>{let n=null,r=null,s=null;try{s=new Zs(e,t)}catch{return null}return i.forEach(a=>{s.test(a)&&(!n||r.compare(a)===-1)&&(n=a,r=new Ks(n,t))}),n};var ei=Qs;const ti=$e,ni=Ae(),ri=(i,e,t)=>{let n=null,r=null,s=null;try{s=new ni(e,t)}catch{return null}return i.forEach(a=>{s.test(a)&&(!n||r.compare(a)===1)&&(n=a,r=new ti(n,t))}),n};var si=ri;const Ct=$e,ii=Ae(),gn=$t,ai=(i,e)=>{i=new ii(i,e);let t=new Ct("0.0.0");if(i.test(t)||(t=new Ct("0.0.0-0"),i.test(t)))return t;t=null;for(let n=0;n<i.set.length;++n){const r=i.set[n];let s=null;r.forEach(a=>{const l=new Ct(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||gn(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!t||gn(t,s))&&(t=s)}return t&&i.test(t)?t:null};var li=ai;const oi=Ae(),ci=(i,e)=>{try{return new oi(i,e).range||"*"}catch{return null}};var fi=ci;const ui=$e,lr=Nt(),{ANY:hi}=lr,di=Ae(),mi=yt,bn=$t,vn=Gt,pi=Vt,Ei=Ft,_i=(i,e,t,n)=>{i=new ui(i,n),e=new di(e,n);let r,s,a,l,o;switch(t){case">":r=bn,s=pi,a=vn,l=">",o=">=";break;case"<":r=vn,s=Ei,a=bn,l="<",o="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(mi(i,e,n))return!1;for(let c=0;c<e.set.length;++c){const u=e.set[c];let f=null,d=null;if(u.forEach(h=>{h.semver===hi&&(h=new lr(">=0.0.0")),f=f||h,d=d||h,r(h.semver,f.semver,n)?f=h:a(h.semver,d.semver,n)&&(d=h)}),f.operator===l||f.operator===o||(!d.operator||d.operator===l)&&s(i,d.semver))return!1;if(d.operator===o&&a(i,d.semver))return!1}return!0};var Ht=_i;const gi=Ht,bi=(i,e,t)=>gi(i,e,">",t);var vi=bi;const $i=Ht,Ni=(i,e,t)=>$i(i,e,"<",t);var yi=Ni;const $n=Ae(),Si=(i,e,t)=>(i=new $n(i,t),e=new $n(e,t),i.intersects(e));var wi=Si;const Ii=yt,Ri=Re;var Ai=(i,e,t)=>{const n=[];let r=null,s=null;const a=i.sort((u,f)=>Ri(u,f,t));for(const u of a)Ii(u,e,t)?(s=u,r||(r=u)):(s&&n.push([r,s]),s=null,r=null);r&&n.push([r,null]);const l=[];for(const[u,f]of n)u===f?l.push(u):!f&&u===a[0]?l.push("*"):f?u===a[0]?l.push(`<=${f}`):l.push(`${u} - ${f}`):l.push(`>=${u}`);const o=l.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return o.length<c.length?o:e};const Nn=Ae(),ct=Nt(),{ANY:Mt}=ct,Ke=yt,xt=Re,Ci=(i,e,t={})=>{if(i===e)return!0;i=new Nn(i,t),e=new Nn(e,t);let n=!1;e:for(const r of i.set){for(const s of e.set){const a=Mi(r,s,t);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},Mi=(i,e,t)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===Mt){if(e.length===1&&e[0].semver===Mt)return!0;t.includePrerelease?i=[new ct(">=0.0.0-0")]:i=[new ct(">=0.0.0")]}if(e.length===1&&e[0].semver===Mt){if(t.includePrerelease)return!0;e=[new ct(">=0.0.0")]}const n=new Set;let r,s;for(const h of i)h.operator===">"||h.operator===">="?r=yn(r,h,t):h.operator==="<"||h.operator==="<="?s=Sn(s,h,t):n.add(h.semver);if(n.size>1)return null;let a;if(r&&s){if(a=xt(r.semver,s.semver,t),a>0)return null;if(a===0&&(r.operator!==">="||s.operator!=="<="))return null}for(const h of n){if(r&&!Ke(h,String(r),t)||s&&!Ke(h,String(s),t))return null;for(const y of e)if(!Ke(h,String(y),t))return!1;return!0}let l,o,c,u,f=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,d=r&&!t.includePrerelease&&r.semver.prerelease.length?r.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const h of e){if(u=u||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",r){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(l=yn(r,h,t),l===h&&l!==r)return!1}else if(r.operator===">="&&!Ke(r.semver,String(h),t))return!1}if(s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(o=Sn(s,h,t),o===h&&o!==s)return!1}else if(s.operator==="<="&&!Ke(s.semver,String(h),t))return!1}if(!h.operator&&(s||r)&&a!==0)return!1}return!(r&&c&&!s&&a!==0||s&&u&&!r&&a!==0||d||f)},yn=(i,e,t)=>{if(!i)return e;const n=xt(i.semver,e.semver,t);return n>0?i:n<0||e.operator===">"&&i.operator===">="?e:i},Sn=(i,e,t)=>{if(!i)return e;const n=xt(i.semver,e.semver,t);return n<0?i:n>0||e.operator==="<"&&i.operator==="<="?e:i};var Ti=Ci;const Tt=Te,Oi=gt,Li=$e,wn=sr,Di=Je,ki=Gr,Pi=Hr,Bi=jr,Ui=Jr,Gi=Qr,Fi=ns,Vi=is,Hi=os,xi=Re,ji=us,qi=ms,Yi=Ut,zi=gs,Xi=$s,Wi=$t,Ji=Gt,Ki=Bt,Zi=ir,Qi=Ft,ea=Vt,ta=ar,na=Hs,ra=Nt(),sa=Ae(),ia=yt,aa=Js,la=ei,oa=si,ca=li,fa=fi,ua=Ht,ha=vi,da=yi,ma=wi,pa=Ai,Ea=Ti;var De={parse:Di,valid:ki,clean:Pi,inc:Bi,diff:Ui,major:Gi,minor:Fi,patch:Vi,prerelease:Hi,compare:xi,rcompare:ji,compareLoose:qi,compareBuild:Yi,sort:zi,rsort:Xi,gt:Wi,lt:Ji,eq:Ki,neq:Zi,gte:Qi,lte:ea,cmp:ta,coerce:na,Comparator:ra,Range:sa,satisfies:ia,toComparators:aa,maxSatisfying:la,minSatisfying:oa,minVersion:ca,validRange:fa,outside:ua,gtr:ha,ltr:da,intersects:ma,simplifyRange:pa,subset:Ea,SemVer:Li,re:Tt.re,src:Tt.src,tokens:Tt.t,SEMVER_SPEC_VERSION:Oi.SEMVER_SPEC_VERSION,compareIdentifiers:wn.compareIdentifiers,rcompareIdentifiers:wn.rcompareIdentifiers};class Se{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,t,n={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==Se.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const r=new In(e,this,t,n);return this.eventMap[e]||(this.eventMap[e]=[]),n.prepend?this.eventMap[e].unshift(r):this.eventMap[e].push(r),r}addOneTimeListener(e,t,n={}){n.remaining=1,this.addListener(e,t,n)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?this.eventMap[Se.ANY_EVENT]&&this.eventMap[Se.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,n])=>n.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof In?this.eventMap[e].filter(r=>r===t).length>0:typeof t=="function"?this.eventMap[e].filter(r=>r.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let n=[],r=this.eventMap[Se.ANY_EVENT]||[];return this.eventMap[e]&&(r=r.concat(this.eventMap[e])),r.forEach(s=>{if(s.suspended)return;let a=[...t];Array.isArray(s.arguments)&&(a=a.concat(s.arguments)),s.remaining>0&&(n.push(s.callback.apply(s.context,a)),s.count++),--s.remaining<1&&s.remove()}),n}removeListener(e,t,n={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let r=this.eventMap[e].filter(s=>t&&s.callback!==t||n.remaining&&n.remaining!==s.remaining||n.context&&n.context!==s.context);r.length?this.eventMap[e]=r:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((n,r)=>{let s,a=this.addListener(e,()=>{clearTimeout(s),n()},{remaining:1});t.duration!==1/0&&(s=setTimeout(()=>{a.remove(),r("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class In{constructor(e,t,n,r={}){if(typeof e!="string"&&!(e instanceof String)&&e!==Se.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof n!="function")throw new TypeError("The 'callback' must be a function.");r.arguments!==void 0&&!Array.isArray(r.arguments)&&(r.arguments=[r.arguments]),r=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},r),r.duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=n,this.context=r.context,this.count=0,this.event=e,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class E{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),E.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),E.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),E.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),E.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Fe{constructor(e,t={}){this.duration=$.defaults.note.duration,this.attack=$.defaults.note.attack,this.release=$.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=N.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=N.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=N.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=N.getNoteDetails(e);if($.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if($.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if($.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if($.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if($.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if($.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if($.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return N.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=N.from7bitToFloat(e)}get rawRelease(){return N.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=N.from7bitToFloat(e)}get number(){return N.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return $.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+e*12+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class N{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const n=this.getNoteDetails(e);if(!n)throw new TypeError("Invalid note identifier");const r={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let s=(n.octave+1+t)*12;if(s+=r[n.name],n.accidental&&(n.accidental.startsWith("b")?s-=n.accidental.length:s+=n.accidental.length),s<0||s>127)throw new RangeError("Invalid octaveOffset value");return s}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const n=t[1].toUpperCase(),r=parseInt(t[3]);let s=t[2].toLowerCase();return s=s===""?void 0:s,{accidental:s,identifier:n+(s||"")+r,name:n,octave:r}}static sanitizeChannels(e){let t;if($.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return Array.isArray(e)?t=e:t=[e],t.indexOf("all")>-1&&(t=E.MIDI_CHANNEL_NUMBERS),t.map(function(n){return parseInt(n)}).filter(function(n){return n>=1&&n<=16})}static toTimestamp(e){let t=!1;const n=parseFloat(e);return isNaN(n)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?n>=0&&(t=$.time+n):n>=0&&(t=n),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let n=!1;if(Number.isInteger(e)&&e>=0&&e<=127)n=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)n=parseInt(e);else if(typeof e=="string"||e instanceof String)try{n=this.toNoteNumber(e.trim(),t)}catch{return!1}return n}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=Math.floor(e/12-1)+t;return n[e%12]+r.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof Fe)return e;let n=this.guessNoteNumber(e,t.octaveOffset);if(n===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new Fe(n,t)}static buildNoteArray(e,t={}){let n=[];return Array.isArray(e)||(e=[e]),e.forEach(r=>{n.push(this.buildNote(r,t))}),n}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,t=0){$.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const n=((e<<7)+t)/16383;return Math.min(Math.max(n,0),1)}static fromFloatToMsbLsb(e){$.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(e*16383);return{msb:t>>7,lsb:t&127}}static offsetNumber(e,t=0,n=0){if($.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,n=parseInt(n)||0}return Math.min(Math.max(e+t*12+n,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(n=>e[n]===t)}static getCcNameByNumber(e){if(!($.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return E.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let t=E.CONTROL_CHANGE_MESSAGES.find(n=>n.name===e);return t?t.number:E.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in E.CHANNEL_MODE_MESSAGES)if(E.CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===E.CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class _a extends Se{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,n={}){if($.validation){if(n.useRawValue&&(n.rawValue=n.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(n.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}n.rawValue||(t=N.fromFloatTo7Bit(t));const r=$.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),N.buildNoteArray(e).forEach(s=>{this.send([(E.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),s.getOffsetNumber(r),t],{time:N.toTimestamp(n.time)})}),this}sendControlChange(e,t,n={}){if(typeof e=="string"&&(e=N.getCcNumberByName(e)),Array.isArray(t)||(t=[t]),$.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(t=t.map(r=>{const s=Math.min(Math.max(parseInt(r),0),127);if(isNaN(s))throw new TypeError("Values must be integers between 0 and 127");return s}),t.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((r,s)=>{this.send([(E.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+s*32,t[s]],{time:N.toTimestamp(n.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2?this:(this.sendControlChange(38,e[1],t),this)}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=E.REGISTERED_PARAMETERS[e]),$.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(E.REGISTERED_PARAMETERS).forEach(r=>{E.REGISTERED_PARAMETERS[r][0]===e[0]&&E.REGISTERED_PARAMETERS[r][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=E.REGISTERED_PARAMETERS[e]),$.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(E.REGISTERED_PARAMETERS).forEach(r=>{E.REGISTERED_PARAMETERS[r][0]===e[0]&&E.REGISTERED_PARAMETERS[r][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){if(this.sendNoteOn(e,t),parseInt(e.duration)>0){const n={time:(N.toTimestamp(t.time)||$.time)+parseInt(e.duration),release:e.release,rawRelease:e.rawRelease};this.sendNoteOff(e,n)}else if(parseInt(t.duration)>0){const n={time:(N.toTimestamp(t.time)||$.time)+parseInt(t.duration),release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(e,n)}return this}sendNoteOff(e,t={}){if($.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;t.rawRelease!=null?n=t.rawRelease:isNaN(t.release)||(n=Math.round(t.release*127));const r=$.octaveOffset+this.output.octaveOffset+this.octaveOffset;return N.buildNoteArray(e,{rawRelease:parseInt(n)}).forEach(s=>{this.send([(E.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),s.getOffsetNumber(r),s.rawRelease],{time:N.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if($.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;t.rawAttack!=null?n=t.rawAttack:isNaN(t.attack)||(n=Math.round(t.attack*127));const r=$.octaveOffset+this.output.octaveOffset+this.octaveOffset;return N.buildNoteArray(e,{rawAttack:n}).forEach(s=>{this.send([(E.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),s.getOffsetNumber(r),s.rawAttack],{time:N.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,n={}){if(typeof e=="string"&&(e=E.CHANNEL_MODE_MESSAGES[e]),$.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(E.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:N.toTimestamp(n.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if($.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(E.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e*127)],{time:N.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,$.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let n=Math.floor(e)+64,r=e-Math.floor(e);r=Math.round((r+1)/2*16383);let s=r>>7&127,a=r&127;return this.sendRpnValue("channelcoarsetuning",n,t),this.sendRpnValue("channelfinetuning",[s,a],t),this}sendModulationRange(e,t,n={}){if($.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(t!=null&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],n),this}sendNrpnValue(e,t,n={}){if(t=[].concat(t),$.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectNonRegisteredParameter(n),this}sendPitchBend(e,t={}){if($.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let n=0,r=0;if(t.rawValue&&Array.isArray(e))n=e[0],r=e[1];else if(t.rawValue&&!Array.isArray(e))n=e;else{const s=N.fromFloatToMsbLsb((e+1)/2);n=s.msb,r=s.lsb}return this.send([(E.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,n],{time:N.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,n={}){if($.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],n),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,$.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(E.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:N.toTimestamp(t.time)}),this}sendRpnValue(e,t,n={}){if(Array.isArray(e)||(e=E.REGISTERED_PARAMETERS[e]),$.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectRegisteredParameter(n),this}sendTuningBank(e,t={}){if($.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if($.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class kt extends Se{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new _a(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:$.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},n=0){if(e instanceof or&&(e=N.isNode?e.data:e.rawData),e instanceof Uint8Array&&N.isNode&&(e=Array.from(e)),$.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(n)?{time:0}:{time:n}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(r=>{if(r=parseInt(r),!(r>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,N.toTimestamp(t.time)),this}sendSysex(e,t=[],n={}){if(e=[].concat(e),t instanceof Uint8Array){const r=new Uint8Array(1+e.length+t.length+1);r[0]=E.SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(e),1),r.set(t,1+e.length),r[r.length-1]=E.SYSTEM_MESSAGES.sysexend,this.send(r,{time:n.time})}else{const r=e.concat(t,E.SYSTEM_MESSAGES.sysexend);this.send([E.SYSTEM_MESSAGES.sysex].concat(r),{time:n.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():$.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if($.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([E.SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){e=Math.floor(e)||0;var n=e>>7&127,r=e&127;return this.send([E.SYSTEM_MESSAGES.songposition,n,r],{time:t.time}),this}sendSongSelect(e=0,t={}){if($.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([E.SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([E.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([E.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([E.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([E.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([E.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([E.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([E.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return $.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(e,t,n)}),this}sendControlChange(e,t,n={},r={}){if($.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendControlChange(e,t,n)}),this}sendPitchBendRange(e=0,t=0,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendPitchBendRange(e,t,n)}),this}setPitchBendRange(e=0,t=0,n="all",r={}){return $.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,r)}sendRpnValue(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnValue(e,t,n)}),this}setRegisteredParameter(e,t=[],n="all",r={}){return $.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,r)}sendChannelAftertouch(e,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendProgramChange(e,t)}),this}sendModulationRange(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendModulationRange(e,t,n)}),this}setModulationRange(e=0,t=0,n="all",r={}){return $.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,r)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},n={}){return $.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,n)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",n={}){return $.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,n)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",n={}){return $.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,n)}sendChannelMode(e,t=0,n={},r={}){if($.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendChannelMode(e,t,n)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if($.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const n=e;e=t,e.channels=n,e.channels==="all"&&(e.channels=E.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendNrpnValue(e,t,n)}),this}setNonRegisteredParameter(e,t=[],n="all",r={}){return $.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,r)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",n={}){return $.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,n)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",n={}){return $.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,n)}sendNoteOff(e,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},n={}){if($.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].playNote(e,t)}),this}sendNoteOn(e,t={},n={}){if($.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Rn{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(E.SYSTEM_MESSAGES),...Object.keys(E.CHANNEL_MESSAGES)],this.channels=E.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),$.validation&&(e.forEach(n=>{if(!(n instanceof kt))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(n=>{if(!E.SYSTEM_MESSAGES.hasOwnProperty(n)&&!E.CHANNEL_MESSAGES.hasOwnProperty(n))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(n=>{if(!E.MIDI_CHANNEL_NUMBERS.includes(n))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{$.validation&&!(t instanceof kt)||t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class ga extends Se{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const n=e.message.dataBytes[0],r=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&r===0)this.notesState[n]=!1,t.type="noteoff",t.note=new Fe(N.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+$.octaveOffset),{rawAttack:0,rawRelease:r}),t.value=N.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[n]=!0,t.note=new Fe(N.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+$.octaveOffset),{rawAttack:r}),t.value=N.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new Fe(N.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+$.octaveOffset)),t.value=N.from7bitToFloat(r),t.rawValue=r,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=n;else if(t.type==="controlchange"){t.controller={number:n,name:E.CONTROL_CHANGE_MESSAGES[n].name,description:E.CONTROL_CHANGE_MESSAGES[n].description,position:E.CONTROL_CHANGE_MESSAGES[n].position},t.subtype=t.controller.name||"controller"+n,t.value=N.from7bitToFloat(r),t.rawValue=r;const s=Object.assign({},t);s.type=`${t.type}-controller${n}`,delete s.subtype,this.emit(s.type,s);const a=Object.assign({},t);a.type=`${t.type}-`+E.CONTROL_CHANGE_MESSAGES[n].name,delete a.subtype,a.type.indexOf("controller")!==0&&this.emit(a.type,a),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=n,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=N.from7bitToFloat(n),t.rawValue=n):t.type==="pitchbend"?(t.value=((r<<7)+n-8192)/8192,t.rawValue=(r<<7)+n):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],n=e.message.dataBytes[1];t===99||t===101?(this._nrpnBuffer=[],this._rpnBuffer=[],t===99?this._nrpnBuffer=[e.message]:n!==127&&(this._rpnBuffer=[e.message])):t===98||t===100?t===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&n!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(t===6||t===38||t===96||t===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,t,n,r){e=e==="nrpn"?"nrpn":"rpn";const s={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:t,parameterLsb:n,value:N.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};e==="rpn"?s.parameter=Object.keys(E.REGISTERED_PARAMETERS).find(o=>E.REGISTERED_PARAMETERS[o][0]===t&&E.REGISTERED_PARAMETERS[o][1]===n):s.parameter=(t<<7)+n;const a=E.CONTROL_CHANGE_MESSAGES[r.message.dataBytes[0]].name;s.type=`${e}-${a}`,this.emit(s.type,s);const l=Object.assign({},s);l.type==="nrpn-dataincrement"?l.type="nrpn-databuttonincrement":l.type==="nrpn-datadecrement"?l.type="nrpn-databuttondecrement":l.type==="rpn-dataincrement"?l.type="rpn-databuttonincrement":l.type==="rpn-datadecrement"&&(l.type="rpn-databuttondecrement"),this.emit(l.type,l),s.type=e,s.subtype=a,this.emit(s.type,s)}getChannelModeByNumber(e){return $.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),N.getChannelModeByNumber(e)}getCcNameByNumber(e){if($.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return N.getCcNameByNumber(e)}getNoteState(e){e instanceof Fe&&(e=e.identifier);const t=N.guessNoteNumber(e,$.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class or{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=N.getPropertyByValue(E.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=N.getPropertyByValue(E.SYSTEM_MESSAGES,this.command)),this.statusByte===E.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ba extends Se{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new ga(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:$.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new or(e.data),n={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",n),t.isSystemMessage?this._parseEvent(n):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(n),this._forwarders.forEach(r=>r.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){$.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,n={}){if($.validation&&typeof n=="function"){let r=t!=null?[].concat(t):void 0;t=n,n={channels:r}}if(E.CHANNEL_EVENTS.includes(e)){n.channels===void 0&&(n.channels=E.MIDI_CHANNEL_NUMBERS);let r=[];return N.sanitizeChannels(n.channels).forEach(s=>{r.push(this.channels[s].addListener(e,t,n))}),r}else return super.addListener(e,t,n)}addOneTimeListener(e,t,n={}){return n.remaining=1,this.addListener(e,t,n)}on(e,t,n,r){return this.addListener(e,t,n,r)}hasListener(e,t,n={}){if($.validation&&typeof n=="function"){let r=[].concat(t);t=n,n={channels:r}}return E.CHANNEL_EVENTS.includes(e)?(n.channels===void 0&&(n.channels=E.MIDI_CHANNEL_NUMBERS),N.sanitizeChannels(n.channels).every(r=>this.channels[r].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,n={}){if($.validation&&typeof n=="function"){let r=[].concat(t);t=n,n={channels:r}}if(n.channels===void 0&&(n.channels=E.MIDI_CHANNEL_NUMBERS),e==null)return N.sanitizeChannels(n.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();E.CHANNEL_EVENTS.includes(e)?N.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].removeListener(e,t,n)}):super.removeListener(e,t,n)}addForwarder(e,t={}){let n;return e instanceof Rn?n=e:n=new Rn(e,t),this._forwarders.push(n),n}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return $.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class va extends Se{constructor(){super(),this.defaults={note:{attack:N.from7bitToFloat(64),release:N.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},t=!1){if(N.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:t}),t&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const n={timestamp:this.time,target:this,type:"error",error:void 0},r={timestamp:this.time,target:this,type:"midiaccessgranted"},s={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(a){return n.error=a,this.emit("error",n),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}this.emit("midiaccessgranted",r),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(a){return n.error=a,this.emit("error",n),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}return this.emit("enabled",s),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n].id===e.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n].id===e.toString())return this.inputs[n]}getInputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(e))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(e))return this.inputs[n]}getOutputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(e))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(e))return this.outputs[n]}getOutputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n].id===e.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n].id===e.toString())return this.outputs[n]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),N.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?N.getNoteDetails(N.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),N.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),N.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),N.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),N.buildNoteArray(e,t)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),N.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(t=>e.push(t.destroy())),this.outputs.forEach(t=>e.push(t.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let t={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?t.port=this.getOutputById(e.port.id):e.port.type==="input"&&(t.port=this.getInputById(e.port.id)),this.emit(e.port.state,t);const n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?t.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(t.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,t);const n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let t=this._inputs.length-1;t>=0;t--){const n=this._inputs[t];Array.from(this.interface.inputs.values()).find(s=>s===n._midiInput)||(this._disconnectedInputs.push(n),this._inputs.splice(t,1))}let e=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(n=>n._midiInput===t)){let n=this._disconnectedInputs.find(r=>r._midiInput===t);n||(n=new ba(t)),this._inputs.push(n),e.push(n.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let t=this._outputs.length-1;t>=0;t--){const n=this._outputs[t];Array.from(this.interface.outputs.values()).find(s=>s===n._midiOutput)||(this._disconnectedOutputs.push(n),this._outputs.splice(t,1))}let e=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(n=>n._midiOutput===t)){let n=this._disconnectedOutputs.find(r=>r._midiOutput===t);n||(n=new kt(t)),this._outputs.push(n),e.push(n.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),N.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),N.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.4"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),E.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),E.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),E.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),E.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),E.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const $=new va;$.constructor=null;const pt=(...i)=>{},cr=(i,e)=>{let t=i.ledOn==e.ledOn&&i.ledFlash==e.ledFlash&&i.controllerFlip==e.controllerFlip&&i.midiThru==e.midiThru;("i2cLeader"in i||"i2cLeader"in e)&&(t=t&&i.i2cLeader==e.i2cLeader),("fadermax"in i||"fadermax"in e)&&(t=t&&i.faderMax==e.faderMax&&i.faderMin==e.faderMin);let n=!0;const r=!0;return i.usbControls.forEach((s,a)=>{const l=e.usbControls[a];(s.channel!=l.channel||s.cc!=l.cc)&&(n=!1)}),i.trsControls.forEach((s,a)=>{const l=e.trsControls[a];(s.channel!=l.channel||s.cc!=l.cc)&&(n=!1)}),t&&n&&r},tt=i=>{const e=Array.from({length:84},()=>0),t=i.firmwareVersion.trim().split(".").map(f=>parseInt(f));e[0]=i.deviceId,e[1]=t[0],e[2]=t[1],e[3]=t[2],e[4]=i.ledOn?1:0,e[5]=i.ledFlash?1:0,e[6]=i.controllerFlip?1:0,e[7]=i.i2cLeader?1:0;const n=i.faderMin>>7,r=i.faderMin-(n<<7);e[8]=r,e[9]=n;const s=i.faderMax>>7,a=i.faderMax-(s<<7);e[10]=a,e[11]=s,e[12]=i.midiThru?1:0;const l=20,o=36,c=52,u=68;return i.usbControls.forEach((f,d)=>{e[d+l]=f.channel,e[d+c]=f.cc}),i.trsControls.forEach((f,d)=>{e[d+o]=f.channel,e[d+u]=f.cc}),e},$a=i=>tt(i).slice(4,20),Na=i=>{const e=tt(i),t=e.slice(20,36),n=e.slice(52,68);return t.concat(n)},ya=i=>{const e=tt(i),t=e.slice(36,52),n=e.slice(68,84);return t.concat(n)},Sa=i=>{const e={...i},t=Me(i.deviceId).controlCount;return e.usbControls=e.usbControls.splice(0,t),e.usbControls.forEach(n=>delete n.val),e.trsControls=e.trsControls.splice(0,t),JSON.stringify(e,null,2)},wa=(i,e)=>e.deviceId!=i.deviceId?`Cannot update - this data file is for a ${Me(e.deviceId).name}, but you are trying to install it on a ${Me(i.deviceId).name} `:!1,Ia=(i,e)=>(Object.keys(e).forEach(t=>{i[t]=e[t]}),i),Ra=i=>{const t=i[5],n=i[6]+"."+i[7]+"."+i[8],r=i[1+8]==1,s=i[2+8]==1,a=i[3+8]==1,l=i[4+8]==1,o=i[5+8],u=(i[6+8]<<7)+o,f=i[7+8],h=(i[8+8]<<7)+f,y=i[9+8]==1,F=[],k=[];return i.slice(17+8,33+8).forEach((A,B)=>{A!=127&&(F[B]={channel:A})}),i.slice(33+8,49+8).forEach((A,B)=>{A!=127&&(k[B]={channel:A})}),i.slice(49+8,65+8).forEach((A,B)=>{A!=127&&(F[B].cc=A)}),i.slice(65+8,81+8).forEach((A,B)=>{A!=127&&(k[B].cc=A)}),F.forEach(A=>A.val=0),{ledOn:r,ledFlash:s,controllerFlip:a,midiThru:y,usbControls:F,trsControls:k,deviceId:t,firmwareVersion:n,i2cLeader:l,faderMin:u,faderMax:h}},Me=i=>Aa[i],lt=(i,e)=>!!Me(i.deviceId).capabilities[e],Aa=[{name:"unknown",controlCount:0,capabilities:{}},{name:"Oxion development board",controlCount:4,capabilities:{led:!0}},{name:"16n",controlCount:16,capabilities:{i2c:!0,led:!0}},{name:"16n (LC)",controlCount:16,capabilities:{i2c:!0,led:!0},sendShortMessages:!0}],be={sysexMfgId:[125,0,0],requestInfoMsg:31,updateConfigMsg:14,updateDeviceOptionsMsg:13,updateUSBOptionsMessage:12,updateTRSOptionsMessage:11,factoryResetMsg:26},Ca=i=>i[1]==be.sysexMfgId[0]&&i[2]==be.sysexMfgId[1]&&i[3]==be.sysexMfgId[2],Ma=(i,e)=>{Me(i.deviceId).sendShortMessages?Oa(i,e):Ta(i,e)},Ta=(i,e)=>{e.sendSysex(be.sysexMfgId,[be.updateConfigMsg,...tt(i)])},Oa=(i,e)=>{e.sendSysex(be.sysexMfgId,[be.updateDeviceOptionsMsg,...$a(i)]),e.sendSysex(be.sysexMfgId,[be.updateUSBOptionsMessage,...Na(i)]),e.sendSysex(be.sysexMfgId,[be.updateTRSOptionsMessage,...ya(i)])},fr=i=>{i.sendSysex(be.sysexMfgId,[be.requestInfoMsg])},ur=i=>{i.sendSysex(be.sysexMfgId,[be.factoryResetMsg])},ve=Ie(null),Et=Ie(!1),me=Ie(null),Le=Ie(!1),He=Ie([]),Ze=Ie([]),Qe=Ie(null),ke=Ie(null),jt=Ie(!1);let ft=-1;Qe.subscribe(i=>{i&&(ye(He).forEach(e=>{e.removeListener()}),dr(i),mr(i),ve.set(null),qt())});ke.subscribe(i=>{i&&(ve.set(null),qt())});const Ot=()=>$.inputs.sort(hr),Lt=()=>$.outputs.sort(hr),hr=(i,e)=>{const t=`${i.manufacturer} ${i.name}`,n=`${e.manufacturer} ${e.name}`;return t<n?-1:t>n?1:0},La=()=>{jt.set(!0),Da()},Da=()=>{He.set(Ot()),Ze.set(Lt()),ot(),$.addListener("connected",()=>{He.set(Ot()),Ze.set(Lt()),ot()}),$.addListener("disconnected",()=>{He.set(Ot()),Ze.set(Lt()),Qe.set(null),ke.set(null),ve.set(null),ot()}),setInterval(()=>{ot()},5e3)},ot=()=>{const i=ye(Qe),e=ye(ke);if(!i&&ye(He).length>0){const t=ye(He).find(n=>n.name.match(/.*16n.*/));t&&Qe.set(t)}if(!e&&ye(Ze).length>0){const t=ye(Ze).find(n=>n.name.match(/.*16n.*/));t&&ke.set(t)}!ye(ve)&&i&&e&&(dr(i),mr(i),qt())},ka=i=>{const e=ye(ve);e&&(e.usbControls.forEach(t=>{t.channel==i.message.channel&&t.cc==i.controller.number&&(t.val=i.rawValue)}),ve.set(e))},dr=i=>{i.addListener("controlchange",ka)},mr=i=>{i.addListener("sysex",e=>{const t=e.message.data;Ca(t)&&t[4]==15&&(ve.set(Ra(t)),pt("Received config",ye(ve)),ft=-1,Et.set(!1))}),pt("Attached sysex listener to ",i.name)},qt=()=>{ft<0&&(ft=Date.now()),Date.now()-ft>8e3&&(ye(Et)||Et.set(!0));const i=ye(Qe),e=ye(ke);i&&e&&(pt("Requesting config over "+e.name),pt("Hoping to receive on "+i.name),fr(e))};function Pa(i){let e,t;return{c(){e=w("span"),this.h()},l(n){e=I(n,"SPAN",{class:!0}),L(e).forEach(m),this.h()},h(){O(e,"class",t="fas fa-"+i[0]+" "+i[1]+" svelte-pvbvkq")},m(n,r){g(n,e,r)},p(n,[r]){r&3&&t!==(t="fas fa-"+n[0]+" "+n[1]+" svelte-pvbvkq")&&O(e,"class",t)},i:ue,o:ue,d(n){n&&m(e)}}}function Ba(i,e,t){let{i:n}=e,{classList:r=""}=e;return i.$$set=s=>{"i"in s&&t(0,n=s.i),"classList"in s&&t(1,r=s.classList)},[n,r]}class Ua extends Ee{constructor(e){super(),_e(this,e,Ba,Pa,ge,{i:0,classList:1})}}function An(i){let e,t;return e=new Ua({props:{i:i[1]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.i=n[1]),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Ga(i){let e,t,n=i[1]&&i[1].trim()!=="",r,s,a,l,o,c=n&&An(i);return{c(){e=w("div"),t=w("button"),c&&c.c(),r=Y(),s=H(i[0]),this.h()},l(u){e=I(u,"DIV",{class:!0});var f=L(e);t=I(f,"BUTTON",{class:!0});var d=L(t);c&&c.l(d),r=z(d),s=x(d,i[0]),d.forEach(m),f.forEach(m),this.h()},h(){t.disabled=i[2],O(t,"class","svelte-1qu28ag"),O(e,"class","button-wrapper svelte-1qu28ag")},m(u,f){g(u,e,f),_(e,t),c&&c.m(t,null),_(t,r),_(t,s),a=!0,l||(o=Ne(t,"click",function(){vr(i[3])&&i[3].apply(this,arguments)}),l=!0)},p(u,[f]){i=u,f&2&&(n=i[1]&&i[1].trim()!==""),n?c?(c.p(i,f),f&2&&b(c,1)):(c=An(i),c.c(),b(c,1),c.m(t,r)):c&&(he(),R(c,1,1,()=>{c=null}),de()),(!a||f&1)&&we(s,i[0]),(!a||f&4)&&(t.disabled=i[2])},i(u){a||(b(c),a=!0)},o(u){R(c),a=!1},d(u){u&&m(e),c&&c.d(),l=!1,o()}}}function Fa(i,e,t){let{label:n}=e,{icon:r=""}=e,{disabled:s=!1}=e,{click:a}=e;return i.$$set=l=>{"label"in l&&t(0,n=l.label),"icon"in l&&t(1,r=l.icon),"disabled"in l&&t(2,s=l.disabled),"click"in l&&t(3,a=l.click)},[n,r,s,a]}class Be extends Ee{constructor(e){super(),_e(this,e,Fa,Ga,ge,{label:0,icon:1,disabled:2,click:3})}}function Cn(i){let e;function t(s,a){return s[2]?Ha:Va}let n=t(i),r=n(i);return{c(){e=w("div"),r.c(),this.h()},l(s){e=I(s,"DIV",{class:!0});var a=L(e);r.l(a),a.forEach(m),this.h()},h(){O(e,"class","details svelte-ykry5x")},m(s,a){g(s,e,a),r.m(e,null)},p(s,a){n===(n=t(s))&&r?r.p(s,a):(r.d(1),r=n(s),r&&(r.c(),r.m(e,null)))},d(s){s&&m(e),r.d()}}}function Va(i){let e,t;return{c(){e=w("p"),t=H("No device connected."),this.h()},l(n){e=I(n,"P",{class:!0});var r=L(e);t=x(r,"No device connected."),r.forEach(m),this.h()},h(){O(e,"class","device svelte-ykry5x")},m(n,r){g(n,e,r),_(e,t)},p:ue,d(n){n&&m(e)}}}function Ha(i){let e,t,n,r=Me(i[2].deviceId).name+"",s,a,l,o=i[2].firmwareVersion+"",c,u,f=i[0].trim()!="",d=f&&Mn(i);return{c(){e=w("p"),t=H("Connected: "),n=w("strong"),s=H(r),a=H(`
        running firmware
        `),l=w("strong"),c=H(o),u=Y(),d&&d.c(),this.h()},l(h){e=I(h,"P",{class:!0});var y=L(e);t=x(y,"Connected: "),n=I(y,"STRONG",{});var F=L(n);s=x(F,r),F.forEach(m),a=x(y,`
        running firmware
        `),l=I(y,"STRONG",{});var k=L(l);c=x(k,o),k.forEach(m),u=z(y),d&&d.l(y),y.forEach(m),this.h()},h(){O(e,"class","device svelte-ykry5x")},m(h,y){g(h,e,y),_(e,t),_(e,n),_(n,s),_(e,a),_(e,l),_(l,c),_(e,u),d&&d.m(e,null)},p(h,y){y&4&&r!==(r=Me(h[2].deviceId).name+"")&&we(s,r),y&4&&o!==(o=h[2].firmwareVersion+"")&&we(c,o),y&1&&(f=h[0].trim()!=""),f?d?d.p(h,y):(d=Mn(h),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(h){h&&m(e),d&&d.d()}}}function Mn(i){let e,t,n,r,s;return{c(){e=w("span"),t=H(i[0]),n=Y(),r=w("a"),s=H("Download"),this.h()},l(a){e=I(a,"SPAN",{class:!0});var l=L(e);t=x(l,i[0]),n=z(l),r=I(l,"A",{href:!0});var o=L(r);s=x(o,"Download"),o.forEach(m),l.forEach(m),this.h()},h(){O(r,"href","https://github.com/16n-faderbank/16n/releases/latest"),O(e,"class","upgrade svelte-ykry5x")},m(a,l){g(a,e,l),_(e,t),_(e,n),_(e,r),_(r,s)},p(a,l){l&1&&we(t,a[0])},d(a){a&&m(e)}}}function xa(i){let e,t=i[1]&&Cn(i);return{c(){t&&t.c(),e=ae()},l(n){t&&t.l(n),e=ae()},m(n,r){t&&t.m(n,r),g(n,e,r)},p(n,[r]){n[1]?t?t.p(n,r):(t=Cn(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ue,o:ue,d(n){t&&t.d(n),n&&m(e)}}}function ja(i,e,t){let n,r;le(i,jt,c=>t(1,n=c)),le(i,ve,c=>t(2,r=c));let s="",a="2.1.1",l=!1;const o=ve.subscribe(c=>{c&&c.firmwareVersion&&a.trim()!==""&&!l&&(l=!0,De.gt(a,c.firmwareVersion)?t(0,s=`A new version of the 16n firmware (${a}) is available.`):t(0,s=""))});return Dt(()=>{o()}),[s,n,r]}class qa extends Ee{constructor(e){super(),_e(this,e,ja,xa,ge,{})}}function Ya(i){let e,t,n,r,s,a,l;const o=i[2].default,c=Ye(o,i,i[1],null);return{c(){e=w("p"),t=w("label"),n=w("input"),r=Y(),c&&c.c(),this.h()},l(u){e=I(u,"P",{});var f=L(e);t=I(f,"LABEL",{});var d=L(t);n=I(d,"INPUT",{type:!0}),r=z(d),c&&c.l(d),d.forEach(m),f.forEach(m),this.h()},h(){O(n,"type","checkbox")},m(u,f){g(u,e,f),_(e,t),_(t,n),n.checked=i[0],_(t,r),c&&c.m(t,null),s=!0,a||(l=Ne(n,"change",i[3]),a=!0)},p(u,[f]){f&1&&(n.checked=u[0]),c&&c.p&&(!s||f&2)&&ze(c,o,u,u[1],s?We(o,u[1],f,null):Xe(u[1]),null)},i(u){s||(b(c,u),s=!0)},o(u){R(c,u),s=!1},d(u){u&&m(e),c&&c.d(u),a=!1,l()}}}function za(i,e,t){let{$$slots:n={},$$scope:r}=e,{checked:s}=e;function a(){s=this.checked,t(0,s)}return i.$$set=l=>{"checked"in l&&t(0,s=l.checked),"$$scope"in l&&t(1,r=l.$$scope)},[s,r,n,a]}class _t extends Ee{constructor(e){super(),_e(this,e,za,Ya,ge,{checked:0})}}function Tn(i){let e,t,n,r,s,a;function l(f){i[3](f)}let o={$$slots:{default:[Xa]},$$scope:{ctx:i}};i[0].ledOn!==void 0&&(o.checked=i[0].ledOn),e=new _t({props:o}),ut.push(()=>ht(e,"checked",l));function c(f){i[4](f)}let u={$$slots:{default:[Wa]},$$scope:{ctx:i}};return i[0].ledFlash!==void 0&&(u.checked=i[0].ledFlash),r=new _t({props:u}),ut.push(()=>ht(r,"checked",c)),{c(){W(e.$$.fragment),n=Y(),W(r.$$.fragment)},l(f){J(e.$$.fragment,f),n=z(f),J(r.$$.fragment,f)},m(f,d){K(e,f,d),g(f,n,d),K(r,f,d),a=!0},p(f,d){const h={};d&1024&&(h.$$scope={dirty:d,ctx:f}),!t&&d&1&&(t=!0,h.checked=f[0].ledOn,dt(()=>t=!1)),e.$set(h);const y={};d&1024&&(y.$$scope={dirty:d,ctx:f}),!s&&d&1&&(s=!0,y.checked=f[0].ledFlash,dt(()=>s=!1)),r.$set(y)},i(f){a||(b(e.$$.fragment,f),b(r.$$.fragment,f),a=!0)},o(f){R(e.$$.fragment,f),R(r.$$.fragment,f),a=!1},d(f){Z(e,f),f&&m(n),Z(r,f)}}}function Xa(i){let e;return{c(){e=H("LED permanently on when powered")},l(t){e=x(t,"LED permanently on when powered")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Wa(i){let e;return{c(){e=H("LED flash on MIDI activity")},l(t){e=x(t,"LED flash on MIDI activity")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ja(i){let e;return{c(){e=H("Rotate controller 180")},l(t){e=x(t,"Rotate controller 180")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function On(i){let e,t,n;function r(a){i[6](a)}let s={$$slots:{default:[Ka]},$$scope:{ctx:i}};return i[0].midiThru!==void 0&&(s.checked=i[0].midiThru),e=new _t({props:s}),ut.push(()=>ht(e,"checked",r)),{c(){W(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,l){K(e,a,l),n=!0},p(a,l){const o={};l&1024&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.checked=a[0].midiThru,dt(()=>t=!1)),e.$set(o)},i(a){n||(b(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){Z(e,a)}}}function Ka(i){let e;return{c(){e=H("Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)")},l(t){e=x(t,"Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ln(i){let e,t,n,r,s,a,l,o,c,u,f,d,h,y,F,k,A,B,P,p,T,U,j,se,ee,fe,C,S;return{c(){e=w("hr"),t=Y(),n=w("h3"),r=H("I2C Leader/Follower"),s=Y(),a=w("select"),l=w("option"),o=H("Follower"),c=w("option"),u=H("Leader"),f=Y(),d=w("p"),h=w("strong"),y=H("Follower"),F=H(" mode is for use with Teletype."),k=Y(),A=w("p"),B=w("strong"),P=H("Leader"),p=H(` mode is for use with Ansible, TXo, ER-301. 16n will not
    respond to Teletype when in leader mode.`),T=Y(),U=w("p"),j=H("This will not take effect until you restart (disconnect/reconnect) your 16n."),se=Y(),ee=w("p"),fe=H(`("Leader" is sometimes also referred to as 'master' mode)`),this.h()},l(v){e=I(v,"HR",{}),t=z(v),n=I(v,"H3",{});var D=L(n);r=x(D,"I2C Leader/Follower"),D.forEach(m),s=z(v),a=I(v,"SELECT",{});var V=L(a);l=I(V,"OPTION",{});var G=L(l);o=x(G,"Follower"),G.forEach(m),c=I(V,"OPTION",{});var q=L(c);u=x(q,"Leader"),q.forEach(m),V.forEach(m),f=z(v),d=I(v,"P",{class:!0});var Q=L(d);h=I(Q,"STRONG",{});var X=L(h);y=x(X,"Follower"),X.forEach(m),F=x(Q," mode is for use with Teletype."),Q.forEach(m),k=z(v),A=I(v,"P",{class:!0});var ne=L(A);B=I(ne,"STRONG",{});var oe=L(B);P=x(oe,"Leader"),oe.forEach(m),p=x(ne,` mode is for use with Ansible, TXo, ER-301. 16n will not
    respond to Teletype when in leader mode.`),ne.forEach(m),T=z(v),U=I(v,"P",{class:!0});var ie=L(U);j=x(ie,"This will not take effect until you restart (disconnect/reconnect) your 16n."),ie.forEach(m),se=z(v),ee=I(v,"P",{class:!0});var re=L(ee);fe=x(re,`("Leader" is sometimes also referred to as 'master' mode)`),re.forEach(m),this.h()},h(){l.__value=!1,l.value=l.__value,c.__value=!0,c.value=c.__value,i[0].i2cLeader===void 0&&Qn(()=>i[9].call(a)),O(d,"class","note svelte-idpdcv"),O(A,"class","note svelte-idpdcv"),O(U,"class","note svelte-idpdcv"),O(ee,"class","note small svelte-idpdcv")},m(v,D){g(v,e,D),g(v,t,D),g(v,n,D),_(n,r),g(v,s,D),g(v,a,D),_(a,l),_(l,o),_(a,c),_(c,u),mt(a,i[0].i2cLeader),g(v,f,D),g(v,d,D),_(d,h),_(h,y),_(d,F),g(v,k,D),g(v,A,D),_(A,B),_(B,P),_(A,p),g(v,T,D),g(v,U,D),_(U,j),g(v,se,D),g(v,ee,D),_(ee,fe),C||(S=[Ne(a,"change",i[9]),Ne(a,"change",i[2])],C=!0)},p(v,D){D&1&&mt(a,v[0].i2cLeader)},d(v){v&&m(e),v&&m(t),v&&m(n),v&&m(s),v&&m(a),v&&m(f),v&&m(d),v&&m(k),v&&m(A),v&&m(T),v&&m(U),v&&m(se),v&&m(ee),C=!1,Pt(S)}}}function Za(i){let e=lt(i[1],"led"),t,n,r,s,a=De.gte(i[1].firmwareVersion,"2.1.0"),l,o,c,u,f,d,h,y,F,k,A,B,P,p,T,U,j,se,ee,fe,C,S,v,D,V,G,q,Q=lt(i[1],"i2c"),X,ne,oe,ie,re=e&&Tn(i);function zt(M){i[5](M)}let Xt={$$slots:{default:[Ja]},$$scope:{ctx:i}};i[0].controllerFlip!==void 0&&(Xt.checked=i[0].controllerFlip),n=new _t({props:Xt}),ut.push(()=>ht(n,"checked",zt));let ce=a&&On(i),pe=Q&&Ln(i);return{c(){re&&re.c(),t=Y(),W(n.$$.fragment),s=Y(),ce&&ce.c(),l=Y(),o=w("hr"),c=Y(),u=w("h3"),f=H("Fader Minimum/Maximum calibration"),d=Y(),h=w("div"),y=w("label"),F=H("Fader Minimum raw value"),k=Y(),A=w("input"),B=Y(),P=w("div"),p=w("label"),T=H("Fader Maximum raw value"),U=Y(),j=w("input"),se=Y(),ee=w("p"),fe=H(`You shouldn't touch this unless you are having issues with your faders either
  reaching `),C=w("code"),S=H("127"),v=H(`
  before the end of their travel, or not at all.`),D=w("br"),V=w("br"),G=H(`
  "Raw" analog values are read from the faders between 0 and 8192. Bring the fader
  maximum down until all faders smoothly travel from 0 to 127 on the debug view (bearing
  in mind there is a small dead zone at either end of a fader).`),q=Y(),pe&&pe.c(),X=ae(),this.h()},l(M){re&&re.l(M),t=z(M),J(n.$$.fragment,M),s=z(M),ce&&ce.l(M),l=z(M),o=I(M,"HR",{}),c=z(M),u=I(M,"H3",{});var te=L(u);f=x(te,"Fader Minimum/Maximum calibration"),te.forEach(m),d=z(M),h=I(M,"DIV",{});var Oe=L(h);y=I(Oe,"LABEL",{for:!0,class:!0});var Wt=L(y);F=x(Wt,"Fader Minimum raw value"),Wt.forEach(m),k=z(Oe),A=I(Oe,"INPUT",{name:!0,type:!0,min:!0,max:!0}),Oe.forEach(m),B=z(M),P=I(M,"DIV",{});var nt=L(P);p=I(nt,"LABEL",{for:!0,class:!0});var Jt=L(p);T=x(Jt,"Fader Maximum raw value"),Jt.forEach(m),U=z(nt),j=I(nt,"INPUT",{name:!0,type:!0,min:!0,max:!0}),nt.forEach(m),se=z(M),ee=I(M,"P",{class:!0});var Pe=L(ee);fe=x(Pe,`You shouldn't touch this unless you are having issues with your faders either
  reaching `),C=I(Pe,"CODE",{});var Kt=L(C);S=x(Kt,"127"),Kt.forEach(m),v=x(Pe,`
  before the end of their travel, or not at all.`),D=I(Pe,"BR",{}),V=I(Pe,"BR",{}),G=x(Pe,`
  "Raw" analog values are read from the faders between 0 and 8192. Bring the fader
  maximum down until all faders smoothly travel from 0 to 127 on the debug view (bearing
  in mind there is a small dead zone at either end of a fader).`),Pe.forEach(m),q=z(M),pe&&pe.l(M),X=ae(),this.h()},h(){O(y,"for","faderMin"),O(y,"class","svelte-idpdcv"),O(A,"name","faderMin"),O(A,"type","number"),O(A,"min","0"),O(A,"max",(1<<13)-1),O(p,"for","faderMax"),O(p,"class","svelte-idpdcv"),O(j,"name","faderMax"),O(j,"type","number"),O(j,"min","0"),O(j,"max",(1<<13)-1),O(ee,"class","note svelte-idpdcv")},m(M,te){re&&re.m(M,te),g(M,t,te),K(n,M,te),g(M,s,te),ce&&ce.m(M,te),g(M,l,te),g(M,o,te),g(M,c,te),g(M,u,te),_(u,f),g(M,d,te),g(M,h,te),_(h,y),_(y,F),_(h,k),_(h,A),Ge(A,i[0].faderMin),g(M,B,te),g(M,P,te),_(P,p),_(p,T),_(P,U),_(P,j),Ge(j,i[0].faderMax),g(M,se,te),g(M,ee,te),_(ee,fe),_(ee,C),_(C,S),_(ee,v),_(ee,D),_(ee,V),_(ee,G),g(M,q,te),pe&&pe.m(M,te),g(M,X,te),ne=!0,oe||(ie=[Ne(A,"input",i[7]),Ne(A,"blur",i[2]),Ne(j,"input",i[8]),Ne(j,"blur",i[2])],oe=!0)},p(M,[te]){te&2&&(e=lt(M[1],"led")),e?re?(re.p(M,te),te&2&&b(re,1)):(re=Tn(M),re.c(),b(re,1),re.m(t.parentNode,t)):re&&(he(),R(re,1,1,()=>{re=null}),de());const Oe={};te&1024&&(Oe.$$scope={dirty:te,ctx:M}),!r&&te&1&&(r=!0,Oe.checked=M[0].controllerFlip,dt(()=>r=!1)),n.$set(Oe),te&2&&(a=De.gte(M[1].firmwareVersion,"2.1.0")),a?ce?(ce.p(M,te),te&2&&b(ce,1)):(ce=On(M),ce.c(),b(ce,1),ce.m(l.parentNode,l)):ce&&(he(),R(ce,1,1,()=>{ce=null}),de()),te&1&&qe(A.value)!==M[0].faderMin&&Ge(A,M[0].faderMin),te&1&&qe(j.value)!==M[0].faderMax&&Ge(j,M[0].faderMax),te&2&&(Q=lt(M[1],"i2c")),Q?pe?pe.p(M,te):(pe=Ln(M),pe.c(),pe.m(X.parentNode,X)):pe&&(pe.d(1),pe=null)},i(M){ne||(b(re),b(n.$$.fragment,M),b(ce),ne=!0)},o(M){R(re),R(n.$$.fragment,M),R(ce),ne=!1},d(M){re&&re.d(M),M&&m(t),Z(n,M),M&&m(s),ce&&ce.d(M),M&&m(l),M&&m(o),M&&m(c),M&&m(u),M&&m(d),M&&m(h),M&&m(B),M&&m(P),M&&m(se),M&&m(ee),M&&m(q),pe&&pe.d(M),M&&m(X),oe=!1,Pt(ie)}}}function Qa(i,e,t){let n,r;le(i,me,h=>t(0,n=h)),le(i,ve,h=>t(1,r=h));const s=()=>{me.set(n)};function a(h){i.$$.not_equal(n.ledOn,h)&&(n.ledOn=h,me.set(n))}function l(h){i.$$.not_equal(n.ledFlash,h)&&(n.ledFlash=h,me.set(n))}function o(h){i.$$.not_equal(n.controllerFlip,h)&&(n.controllerFlip=h,me.set(n))}function c(h){i.$$.not_equal(n.midiThru,h)&&(n.midiThru=h,me.set(n))}function u(){n.faderMin=qe(this.value),me.set(n)}function f(){n.faderMax=qe(this.value),me.set(n)}function d(){n.i2cLeader=er(this),me.set(n)}return[n,r,s,a,l,o,c,u,f,d]}class el extends Ee{constructor(e){super(),_e(this,e,Qa,Za,ge,{})}}function Dn(i,e,t){const n=i.slice();return n[8]=e[t],n}function kn(i){let e,t=i[8]+"",n,r;return{c(){e=w("option"),n=H(t),this.h()},l(s){e=I(s,"OPTION",{});var a=L(e);n=x(a,t),a.forEach(m),this.h()},h(){e.__value=r=i[8],e.value=e.__value},m(s,a){g(s,e,a),_(e,n)},p(s,a){a&4&&t!==(t=s[8]+"")&&we(n,t),a&4&&r!==(r=s[8])&&(e.__value=r,e.value=e.__value)},d(s){s&&m(e)}}}function tl(i){let e,t,n=i[1]+1+"",r,s,a,l,o,c,u,f,d,h,y,F,k=i[2],A=[];for(let B=0;B<k.length;B+=1)A[B]=kn(Dn(i,k,B));return{c(){e=w("dl"),t=w("dt"),r=H(n),s=w("dt"),a=H("Channel"),l=w("dd"),o=w("select");for(let B=0;B<A.length;B+=1)A[B].c();c=Y(),u=w("dt"),f=H("CC"),d=w("dd"),h=w("input"),this.h()},l(B){e=I(B,"DL",{class:!0});var P=L(e);t=I(P,"DT",{class:!0});var p=L(t);r=x(p,n),p.forEach(m),s=I(P,"DT",{class:!0});var T=L(s);a=x(T,"Channel"),T.forEach(m),l=I(P,"DD",{class:!0});var U=L(l);o=I(U,"SELECT",{});var j=L(o);for(let fe=0;fe<A.length;fe+=1)A[fe].l(j);j.forEach(m),c=z(U),U.forEach(m),u=I(P,"DT",{class:!0});var se=L(u);f=x(se,"CC"),se.forEach(m),d=I(P,"DD",{class:!0});var ee=L(d);h=I(ee,"INPUT",{type:!0,min:!0,max:!0,class:!0}),ee.forEach(m),P.forEach(m),this.h()},h(){O(t,"class","index svelte-gqdu21"),O(s,"class","svelte-gqdu21"),i[0].channel===void 0&&Qn(()=>i[5].call(o)),O(l,"class","svelte-gqdu21"),O(u,"class","svelte-gqdu21"),O(h,"type","number"),O(h,"min","0"),O(h,"max","127"),O(h,"class","svelte-gqdu21"),O(d,"class","svelte-gqdu21"),O(e,"class","config-column svelte-gqdu21")},m(B,P){g(B,e,P),_(e,t),_(t,r),_(e,s),_(s,a),_(e,l),_(l,o);for(let p=0;p<A.length;p+=1)A[p].m(o,null);mt(o,i[0].channel),_(l,c),_(e,u),_(u,f),_(e,d),_(d,h),Ge(h,i[0].cc),y||(F=[Ne(o,"change",i[5]),Ne(o,"change",i[3]),Ne(h,"input",i[6]),Ne(h,"change",i[4]),Ne(h,"blur",i[4])],y=!0)},p(B,[P]){if(P&2&&n!==(n=B[1]+1+"")&&we(r,n),P&4){k=B[2];let p;for(p=0;p<k.length;p+=1){const T=Dn(B,k,p);A[p]?A[p].p(T,P):(A[p]=kn(T),A[p].c(),A[p].m(o,null))}for(;p<A.length;p+=1)A[p].d(1);A.length=k.length}P&5&&mt(o,B[0].channel),P&5&&qe(h.value)!==B[0].cc&&Ge(h,B[0].cc)},i:ue,o:ue,d(B){B&&m(e),et(A,B),y=!1,Pt(F)}}}function nl(i,e,t){let n;le(i,me,f=>t(7,n=f));let{index:r}=e,{editControl:s}=e;const a=Array.from(Array(16).keys());a.forEach((f,d)=>t(2,a[d]=f+1,a));const l=()=>{me.set(n)},o=f=>{const d=f.target;parseInt(d.value)<0&&t(0,s.cc=0,s),parseInt(d.value)>127&&t(0,s.cc=127,s),me.set(n)};function c(){s.channel=er(this),t(0,s),t(2,a)}function u(){s.cc=qe(this.value),t(0,s),t(2,a)}return i.$$set=f=>{"index"in f&&t(1,r=f.index),"editControl"in f&&t(0,s=f.editControl)},[s,r,a,l,o,c,u]}class pr extends Ee{constructor(e){super(),_e(this,e,nl,tl,ge,{index:1,editControl:0})}}function rl(i){let e,t,n,r,s,a,l,o;return l=new Be({props:{label:"Reset controller configuration to defaults",icon:"history",click:i[0]}}),l.$on("message",i[1]),{c(){e=w("p"),t=H(`"Factory Reset" will reset the configuration of your 16n back to 'default'
  values; primarily, MIDI CCs 32-48, Channel 1, for both TRS and USB MIDI.`),n=Y(),r=w("p"),s=H(`Note that this will also reset any calibration data or other options you may
  have adjusted on the "Device Options" tab. You will need to repeat this
  configuration after performing a reset.`),a=Y(),W(l.$$.fragment)},l(c){e=I(c,"P",{});var u=L(e);t=x(u,`"Factory Reset" will reset the configuration of your 16n back to 'default'
  values; primarily, MIDI CCs 32-48, Channel 1, for both TRS and USB MIDI.`),u.forEach(m),n=z(c),r=I(c,"P",{});var f=L(r);s=x(f,`Note that this will also reset any calibration data or other options you may
  have adjusted on the "Device Options" tab. You will need to repeat this
  configuration after performing a reset.`),f.forEach(m),a=z(c),J(l.$$.fragment,c)},m(c,u){g(c,e,u),_(e,t),g(c,n,u),g(c,r,u),_(r,s),g(c,a,u),K(l,c,u),o=!0},p:ue,i(c){o||(b(l.$$.fragment,c),o=!0)},o(c){R(l.$$.fragment,c),o=!1},d(c){c&&m(e),c&&m(n),c&&m(r),c&&m(a),Z(l,c)}}}const sl="Confirm that you wish to reset your controller configuration to the default values. You will lose any configuration stored on the controller.";function il(i,e,t){let n,r;le(i,ke,l=>t(2,n=l)),le(i,Le,l=>t(3,r=l));const s=()=>{confirm(sl)&&(Ve(Le,r=!1,r),ur(n),setTimeout(()=>{fr(n)},50))};function a(l){tr.call(this,i,l)}return[s,a]}class al extends Ee{constructor(e){super(),_e(this,e,il,rl,ge,{})}}function ll(i){let e,t,n,r,s,a;const l=i[2].default,o=Ye(l,i,i[1],null);return{c(){e=w("div"),t=w("h2"),n=H(i[0]),r=Y(),s=w("div"),o&&o.c(),this.h()},l(c){e=I(c,"DIV",{class:!0});var u=L(e);t=I(u,"H2",{class:!0});var f=L(t);n=x(f,i[0]),f.forEach(m),r=z(u),s=I(u,"DIV",{class:!0});var d=L(s);o&&o.l(d),d.forEach(m),u.forEach(m),this.h()},h(){O(t,"class","svelte-1o2kpty"),O(s,"class","details svelte-1o2kpty"),O(e,"class","subhead svelte-1o2kpty")},m(c,u){g(c,e,u),_(e,t),_(t,n),_(e,r),_(e,s),o&&o.m(s,null),a=!0},p(c,[u]){(!a||u&1)&&we(n,c[0]),o&&o.p&&(!a||u&2)&&ze(o,l,c,c[1],a?We(l,c[1],u,null):Xe(c[1]),null)},i(c){a||(b(o,c),a=!0)},o(c){R(o,c),a=!1},d(c){c&&m(e),o&&o.d(c)}}}function ol(i,e,t){let{$$slots:n={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&t(0,s=a.title),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class Er extends Ee{constructor(e){super(),_e(this,e,ol,ll,ge,{title:0})}}function cl(i){let e,t;const n=i[1].default,r=Ye(n,i,i[0],null);return{c(){e=w("div"),r&&r.c(),this.h()},l(s){e=I(s,"DIV",{class:!0});var a=L(e);r&&r.l(a),a.forEach(m),this.h()},h(){O(e,"class","tabs")},m(s,a){g(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&ze(r,n,s,s[0],t?We(n,s[0],a,null):Xe(s[0]),null)},i(s){t||(b(r,s),t=!0)},o(s){R(r,s),t=!1},d(s){s&&m(e),r&&r.d(s)}}}const Yt={};function fl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[],a=[],l=Ie(null),o=Ie(null);return $r(Yt,{registerTab:c=>{s.push(c),l.update(u=>u||c),Dt(()=>{const u=s.indexOf(c);s.splice(u,1),l.update(f=>f===c?s[u]||s[s.length-1]:f)})},registerPanel:c=>{a.push(c),o.update(u=>u||c),Dt(()=>{const u=a.indexOf(c);a.splice(u,1),o.update(f=>f===c?a[u]||a[a.length-1]:f)})},selectTab:c=>{const u=s.indexOf(c);l.set(c),o.set(a[u])},selectedTab:l,selectedPanel:o}),i.$$set=c=>{"$$scope"in c&&t(0,r=c.$$scope)},[r,n]}class _r extends Ee{constructor(e){super(),_e(this,e,fl,cl,ge,{})}}function ul(i){let e,t;const n=i[1].default,r=Ye(n,i,i[0],null);return{c(){e=w("div"),r&&r.c(),this.h()},l(s){e=I(s,"DIV",{class:!0});var a=L(e);r&&r.l(a),a.forEach(m),this.h()},h(){O(e,"class","tab-list svelte-1c799zm")},m(s,a){g(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&ze(r,n,s,s[0],t?We(n,s[0],a,null):Xe(s[0]),null)},i(s){t||(b(r,s),t=!0)},o(s){R(r,s),t=!1},d(s){s&&m(e),r&&r.d(s)}}}function hl(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class gr extends Ee{constructor(e){super(),_e(this,e,hl,ul,ge,{})}}function Pn(i){let e;const t=i[4].default,n=Ye(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&ze(n,t,r,r[3],e?We(t,r[3],s,null):Xe(r[3]),null)},i(r){e||(b(n,r),e=!0)},o(r){R(n,r),e=!1},d(r){n&&n.d(r)}}}function dl(i){let e,t,n=i[0]===i[1]&&Pn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),g(r,e,s),t=!0},p(r,[s]){r[0]===r[1]?n?(n.p(r,s),s&1&&b(n,1)):(n=Pn(r),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(he(),R(n,1,1,()=>{n=null}),de())},i(r){t||(b(n),t=!0)},o(r){R(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function ml(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const a={},{registerPanel:l,selectedPanel:o}=nr(Yt);return le(i,o,c=>t(0,n=c)),l(a),i.$$set=c=>{"$$scope"in c&&t(3,s=c.$$scope)},[n,a,o,s,r]}class xe extends Ee{constructor(e){super(),_e(this,e,ml,dl,ge,{})}}function pl(i){let e,t,n,r;const s=i[5].default,a=Ye(s,i,i[4],null);return{c(){e=w("button"),a&&a.c(),this.h()},l(l){e=I(l,"BUTTON",{class:!0});var o=L(e);a&&a.l(o),o.forEach(m),this.h()},h(){O(e,"class","svelte-1rryekj"),Zt(e,"selected",i[0]===i[1])},m(l,o){g(l,e,o),a&&a.m(e,null),t=!0,n||(r=Ne(e,"click",i[6]),n=!0)},p(l,[o]){a&&a.p&&(!t||o&16)&&ze(a,s,l,l[4],t?We(s,l[4],o,null):Xe(l[4]),null),(!t||o&3)&&Zt(e,"selected",l[0]===l[1])},i(l){t||(b(a,l),t=!0)},o(l){R(a,l),t=!1},d(l){l&&m(e),a&&a.d(l),n=!1,r()}}}function El(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const a={},{registerTab:l,selectTab:o,selectedTab:c}=nr(Yt);le(i,c,f=>t(0,n=f)),l(a);const u=()=>o(a);return i.$$set=f=>{"$$scope"in f&&t(4,s=f.$$scope)},[n,a,o,c,s,r,u]}class je extends Ee{constructor(e){super(),_e(this,e,El,pl,ge,{})}}const _l=(i,e)=>{const t=document.createElement("input");t.type="file",t.id="uploadedConfig",t.addEventListener("change",n=>{const r=n.target.files;if(r&&r.length>0){const s=r[0],a=new FileReader;a.addEventListener("load",()=>{const l=JSON.parse(a.result),o=wa(i,l);if(o){alert(o);return}else me.update(()=>Ia(i,l)),cr(i,e)?alert("Imported configuration is identical to currently loaded configuration; no changes to upload."):alert("New configuration imported. Choose 'update controller' to import, or 'Cancel' to abort")}),a.readAsText(s)}}),t.click(),t.remove()},gl=i=>{const e="data:text/json;charset=utf-8,"+encodeURIComponent(Sa(i)),t=document.createElement("a");t.href=e,t.download=`${Me(i.deviceId).name}_controller_config.json`,document.body.appendChild(t),t.click(),t.remove()};function Bn(i,e,t){const n=i.slice();return n[10]=e[t],n[12]=t,n}function Un(i,e,t){const n=i.slice();return n[10]=e[t],n[12]=t,n}function bl(i){let e,t,n,r,s,a;return e=new Be({props:{label:"Cancel",icon:"times",click:i[4]}}),n=new Be({props:{label:"Import config",icon:"file-import",click:i[5]}}),s=new Be({props:{label:"Update controller",icon:"download",click:i[6],disabled:!i[1]}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment)},l(l){J(e.$$.fragment,l),t=z(l),J(n.$$.fragment,l),r=z(l),J(s.$$.fragment,l)},m(l,o){K(e,l,o),g(l,t,o),K(n,l,o),g(l,r,o),K(s,l,o),a=!0},p(l,o){const c={};o&2&&(c.disabled=!l[1]),s.$set(c)},i(l){a||(b(e.$$.fragment,l),b(n.$$.fragment,l),b(s.$$.fragment,l),a=!0)},o(l){R(e.$$.fragment,l),R(n.$$.fragment,l),R(s.$$.fragment,l),a=!1},d(l){Z(e,l),l&&m(t),Z(n,l),l&&m(r),Z(s,l)}}}function vl(i){let e;return{c(){e=H("USB")},l(t){e=x(t,"USB")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function $l(i){let e;return{c(){e=H("TRS Jack")},l(t){e=x(t,"TRS Jack")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Nl(i){let e;return{c(){e=H("Device Options")},l(t){e=x(t,"Device Options")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Gn(i){let e,t;return e=new je({props:{$$slots:{default:[yl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function yl(i){let e;return{c(){e=H("Factory Reset")},l(t){e=x(t,"Factory Reset")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Sl(i){let e,t,n,r,s,a,l=De.gte(i[0].firmwareVersion,"2.1.0"),o,c;e=new je({props:{$$slots:{default:[vl]},$$scope:{ctx:i}}}),n=new je({props:{$$slots:{default:[$l]},$$scope:{ctx:i}}}),s=new je({props:{$$slots:{default:[Nl]},$$scope:{ctx:i}}});let u=l&&Gn(i);return{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment),a=Y(),u&&u.c(),o=ae()},l(f){J(e.$$.fragment,f),t=z(f),J(n.$$.fragment,f),r=z(f),J(s.$$.fragment,f),a=z(f),u&&u.l(f),o=ae()},m(f,d){K(e,f,d),g(f,t,d),K(n,f,d),g(f,r,d),K(s,f,d),g(f,a,d),u&&u.m(f,d),g(f,o,d),c=!0},p(f,d){const h={};d&16384&&(h.$$scope={dirty:d,ctx:f}),e.$set(h);const y={};d&16384&&(y.$$scope={dirty:d,ctx:f}),n.$set(y);const F={};d&16384&&(F.$$scope={dirty:d,ctx:f}),s.$set(F),d&1&&(l=De.gte(f[0].firmwareVersion,"2.1.0")),l?u?d&1&&b(u,1):(u=Gn(f),u.c(),b(u,1),u.m(o.parentNode,o)):u&&(he(),R(u,1,1,()=>{u=null}),de())},i(f){c||(b(e.$$.fragment,f),b(n.$$.fragment,f),b(s.$$.fragment,f),b(u),c=!0)},o(f){R(e.$$.fragment,f),R(n.$$.fragment,f),R(s.$$.fragment,f),R(u),c=!1},d(f){Z(e,f),f&&m(t),Z(n,f),f&&m(r),Z(s,f),f&&m(a),u&&u.d(f),f&&m(o)}}}function Fn(i){let e,t;return e=new pr({props:{editControl:i[10],index:i[12]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editControl=n[10]),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Vn(i){let e,t,n=i[2]&&i[12]<i[2].controlCount&&Fn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),g(r,e,s),t=!0},p(r,s){r[2]&&r[12]<r[2].controlCount?n?(n.p(r,s),s&4&&b(n,1)):(n=Fn(r),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(he(),R(n,1,1,()=>{n=null}),de())},i(r){t||(b(n),t=!0)},o(r){R(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function wl(i){let e,t,n=i[3].usbControls,r=[];for(let a=0;a<n.length;a+=1)r[a]=Vn(Un(i,n,a));const s=a=>R(r[a],1,1,()=>{r[a]=null});return{c(){e=w("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"DIV",{id:!0,class:!0});var l=L(e);for(let o=0;o<r.length;o+=1)r[o].l(l);l.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(a,l){g(a,e,l);for(let o=0;o<r.length;o+=1)r[o].m(e,null);t=!0},p(a,l){if(l&12){n=a[3].usbControls;let o;for(o=0;o<n.length;o+=1){const c=Un(a,n,o);r[o]?(r[o].p(c,l),b(r[o],1)):(r[o]=Vn(c),r[o].c(),b(r[o],1),r[o].m(e,null))}for(he(),o=n.length;o<r.length;o+=1)s(o);de()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)b(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)R(r[l]);t=!1},d(a){a&&m(e),et(r,a)}}}function Hn(i){let e,t;return e=new pr({props:{editControl:i[10],index:i[12]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editControl=n[10]),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function xn(i){let e,t,n=i[2]&&i[12]<i[2].controlCount&&Hn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),g(r,e,s),t=!0},p(r,s){r[2]&&r[12]<r[2].controlCount?n?(n.p(r,s),s&4&&b(n,1)):(n=Hn(r),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(he(),R(n,1,1,()=>{n=null}),de())},i(r){t||(b(n),t=!0)},o(r){R(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function Il(i){let e,t,n=i[3].trsControls,r=[];for(let a=0;a<n.length;a+=1)r[a]=xn(Bn(i,n,a));const s=a=>R(r[a],1,1,()=>{r[a]=null});return{c(){e=w("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"DIV",{id:!0,class:!0});var l=L(e);for(let o=0;o<r.length;o+=1)r[o].l(l);l.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(a,l){g(a,e,l);for(let o=0;o<r.length;o+=1)r[o].m(e,null);t=!0},p(a,l){if(l&12){n=a[3].trsControls;let o;for(o=0;o<n.length;o+=1){const c=Bn(a,n,o);r[o]?(r[o].p(c,l),b(r[o],1)):(r[o]=xn(c),r[o].c(),b(r[o],1),r[o].m(e,null))}for(he(),o=n.length;o<r.length;o+=1)s(o);de()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)b(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)R(r[l]);t=!1},d(a){a&&m(e),et(r,a)}}}function Rl(i){let e,t;return e=new el({}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function jn(i){let e,t;return e=new xe({props:{$$slots:{default:[Al]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Al(i){let e,t;return e=new al({}),e.$on("message",i[7]),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Cl(i){let e,t,n,r,s,a,l,o,c=De.gte(i[0].firmwareVersion,"2.1.0"),u,f;e=new gr({props:{$$slots:{default:[Sl]},$$scope:{ctx:i}}}),n=new xe({props:{$$slots:{default:[wl]},$$scope:{ctx:i}}}),s=new xe({props:{$$slots:{default:[Il]},$$scope:{ctx:i}}}),l=new xe({props:{$$slots:{default:[Rl]},$$scope:{ctx:i}}});let d=c&&jn(i);return{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment),a=Y(),W(l.$$.fragment),o=Y(),d&&d.c(),u=ae()},l(h){J(e.$$.fragment,h),t=z(h),J(n.$$.fragment,h),r=z(h),J(s.$$.fragment,h),a=z(h),J(l.$$.fragment,h),o=z(h),d&&d.l(h),u=ae()},m(h,y){K(e,h,y),g(h,t,y),K(n,h,y),g(h,r,y),K(s,h,y),g(h,a,y),K(l,h,y),g(h,o,y),d&&d.m(h,y),g(h,u,y),f=!0},p(h,y){const F={};y&16385&&(F.$$scope={dirty:y,ctx:h}),e.$set(F);const k={};y&16396&&(k.$$scope={dirty:y,ctx:h}),n.$set(k);const A={};y&16396&&(A.$$scope={dirty:y,ctx:h}),s.$set(A);const B={};y&16384&&(B.$$scope={dirty:y,ctx:h}),l.$set(B),y&1&&(c=De.gte(h[0].firmwareVersion,"2.1.0")),c?d?y&1&&b(d,1):(d=jn(h),d.c(),b(d,1),d.m(u.parentNode,u)):d&&(he(),R(d,1,1,()=>{d=null}),de())},i(h){f||(b(e.$$.fragment,h),b(n.$$.fragment,h),b(s.$$.fragment,h),b(l.$$.fragment,h),b(d),f=!0)},o(h){R(e.$$.fragment,h),R(n.$$.fragment,h),R(s.$$.fragment,h),R(l.$$.fragment,h),R(d),f=!1},d(h){Z(e,h),h&&m(t),Z(n,h),h&&m(r),Z(s,h),h&&m(a),Z(l,h),h&&m(o),d&&d.d(h),h&&m(u)}}}function Ml(i){let e,t,n,r;return e=new Er({props:{title:"Edit Configuration",$$slots:{default:[bl]},$$scope:{ctx:i}}}),n=new _r({props:{$$slots:{default:[Cl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),g(s,t,a),K(n,s,a),r=!0},p(s,[a]){const l={};a&16386&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&16397&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(b(e.$$.fragment,s),b(n.$$.fragment,s),r=!0)},o(s){R(e.$$.fragment,s),R(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function Tl(i,e,t){let n,r,s,a,l;le(i,ve,h=>t(0,r=h)),le(i,Le,h=>t(8,s=h)),le(i,me,h=>t(3,a=h)),le(i,ke,h=>t(9,l=h));let o=!1;me.subscribe(h=>{h&&r&&t(1,o=!cr(h,r))});const c=()=>{Ve(Le,s=!1,s)},u=()=>{a&&r&&_l(a,r)},f=()=>{tt(a),Ma(a,l),Ve(ve,r=a,r),Ve(Le,s=!1,s)};function d(h){tr.call(this,i,h)}return i.$$.update=()=>{i.$$.dirty&1&&t(2,n=r?Me(r.deviceId):null)},[r,o,n,a,c,u,f,d]}class Ol extends Ee{constructor(e){super(),_e(this,e,Tl,Ml,ge,{})}}function qn(i){let e,t,n,r,s,a,l=i[0].val!==void 0&&Yn(i);return{c(){e=w("dt"),t=H("Value"),n=w("dd"),r=w("div"),l&&l.c(),s=Y(),a=w("div"),this.h()},l(o){e=I(o,"DT",{class:!0});var c=L(e);t=x(c,"Value"),c.forEach(m),n=I(o,"DD",{class:!0});var u=L(n);r=I(u,"DIV",{class:!0});var f=L(r);l&&l.l(f),s=z(f),a=I(f,"DIV",{class:!0,style:!0}),L(a).forEach(m),f.forEach(m),u.forEach(m),this.h()},h(){O(e,"class","svelte-5fijw0"),O(a,"class","bar svelte-5fijw0"),Qt(a,"height",i[0].val+"px"),O(r,"class","inner svelte-5fijw0"),O(n,"class","display svelte-5fijw0")},m(o,c){g(o,e,c),_(e,t),g(o,n,c),_(n,r),l&&l.m(r,null),_(r,s),_(r,a)},p(o,c){o[0].val!==void 0?l?l.p(o,c):(l=Yn(o),l.c(),l.m(r,s)):l&&(l.d(1),l=null),c&1&&Qt(a,"height",o[0].val+"px")},d(o){o&&m(e),o&&m(n),l&&l.d()}}}function Yn(i){let e,t=i[0].val+"",n,r;return{c(){e=w("span"),n=H(t),this.h()},l(s){e=I(s,"SPAN",{class:!0});var a=L(e);n=x(a,t),a.forEach(m),this.h()},h(){O(e,"class",r=en(i[0].val<27?"lowvalue":"")+" svelte-5fijw0")},m(s,a){g(s,e,a),_(e,n)},p(s,a){a&1&&t!==(t=s[0].val+"")&&we(n,t),a&1&&r!==(r=en(s[0].val<27?"lowvalue":"")+" svelte-5fijw0")&&O(e,"class",r)},d(s){s&&m(e)}}}function Ll(i){let e,t,n=i[1]+1+"",r,s,a,l,o=i[0].channel+"",c,u,f,d,h=i[0].cc+"",y,F=!i[2]&&qn(i);return{c(){e=w("dl"),t=w("dt"),r=H(n),s=w("dt"),a=H("Channel"),l=w("dd"),c=H(o),u=w("dt"),f=H("CC"),d=w("dd"),y=H(h),F&&F.c(),this.h()},l(k){e=I(k,"DL",{class:!0});var A=L(e);t=I(A,"DT",{class:!0});var B=L(t);r=x(B,n),B.forEach(m),s=I(A,"DT",{class:!0});var P=L(s);a=x(P,"Channel"),P.forEach(m),l=I(A,"DD",{class:!0});var p=L(l);c=x(p,o),p.forEach(m),u=I(A,"DT",{class:!0});var T=L(u);f=x(T,"CC"),T.forEach(m),d=I(A,"DD",{class:!0});var U=L(d);y=x(U,h),U.forEach(m),F&&F.l(A),A.forEach(m),this.h()},h(){O(t,"class","index svelte-5fijw0"),O(s,"class","svelte-5fijw0"),O(l,"class","svelte-5fijw0"),O(u,"class","svelte-5fijw0"),O(d,"class","svelte-5fijw0"),O(e,"class","config-column svelte-5fijw0")},m(k,A){g(k,e,A),_(e,t),_(t,r),_(e,s),_(s,a),_(e,l),_(l,c),_(e,u),_(u,f),_(e,d),_(d,y),F&&F.m(e,null)},p(k,[A]){A&2&&n!==(n=k[1]+1+"")&&we(r,n),A&1&&o!==(o=k[0].channel+"")&&we(c,o),A&1&&h!==(h=k[0].cc+"")&&we(y,h),k[2]?F&&(F.d(1),F=null):F?F.p(k,A):(F=qn(k),F.c(),F.m(e,null))},i:ue,o:ue,d(k){k&&m(e),F&&F.d()}}}function Dl(i,e,t){let{control:n}=e,{index:r}=e,{disableValue:s=!1}=e;return i.$$set=a=>{"control"in a&&t(0,n=a.control),"index"in a&&t(1,r=a.index),"disableValue"in a&&t(2,s=a.disableValue)},[n,r,s]}class br extends Ee{constructor(e){super(),_e(this,e,Dl,Ll,ge,{control:0,index:1,disableValue:2})}}function zn(i,e,t){const n=i.slice();return n[6]=e[t],n[8]=t,n}function Xn(i,e,t){const n=i.slice();return n[6]=e[t],n[8]=t,n}function kl(i){let e,t,n,r;return e=new Be({props:{label:"Export current config",icon:"file-export",click:i[2]}}),n=new Be({props:{label:"Edit Config",icon:"pencil-alt",click:i[3]}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),g(s,t,a),K(n,s,a),r=!0},p:ue,i(s){r||(b(e.$$.fragment,s),b(n.$$.fragment,s),r=!0)},o(s){R(e.$$.fragment,s),R(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function Pl(i){let e;return{c(){e=H("USB")},l(t){e=x(t,"USB")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Bl(i){let e;return{c(){e=H("TRS Jack")},l(t){e=x(t,"TRS Jack")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ul(i){let e,t,n,r;return e=new je({props:{$$slots:{default:[Pl]},$$scope:{ctx:i}}}),n=new je({props:{$$slots:{default:[Bl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),g(s,t,a),K(n,s,a),r=!0},p(s,a){const l={};a&1024&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&1024&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(b(e.$$.fragment,s),b(n.$$.fragment,s),r=!0)},o(s){R(e.$$.fragment,s),R(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function Wn(i){let e,t;return e=new br({props:{control:i[6],index:i[8]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.control=n[6]),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Jn(i){let e,t,n=i[1]&&i[8]<i[1].controlCount&&Wn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),g(r,e,s),t=!0},p(r,s){r[1]&&r[8]<r[1].controlCount?n?(n.p(r,s),s&2&&b(n,1)):(n=Wn(r),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(he(),R(n,1,1,()=>{n=null}),de())},i(r){t||(b(n),t=!0)},o(r){R(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function Gl(i){let e,t,n=i[0].usbControls,r=[];for(let a=0;a<n.length;a+=1)r[a]=Jn(Xn(i,n,a));const s=a=>R(r[a],1,1,()=>{r[a]=null});return{c(){e=w("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"DIV",{id:!0,class:!0});var l=L(e);for(let o=0;o<r.length;o+=1)r[o].l(l);l.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(a,l){g(a,e,l);for(let o=0;o<r.length;o+=1)r[o].m(e,null);t=!0},p(a,l){if(l&3){n=a[0].usbControls;let o;for(o=0;o<n.length;o+=1){const c=Xn(a,n,o);r[o]?(r[o].p(c,l),b(r[o],1)):(r[o]=Jn(c),r[o].c(),b(r[o],1),r[o].m(e,null))}for(he(),o=n.length;o<r.length;o+=1)s(o);de()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)b(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)R(r[l]);t=!1},d(a){a&&m(e),et(r,a)}}}function Kn(i){let e,t;return e=new br({props:{control:i[6],index:i[8],disableValue:!0}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.control=n[6]),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Zn(i){let e,t,n=i[1]&&i[8]<i[1].controlCount&&Kn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),g(r,e,s),t=!0},p(r,s){r[1]&&r[8]<r[1].controlCount?n?(n.p(r,s),s&2&&b(n,1)):(n=Kn(r),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(he(),R(n,1,1,()=>{n=null}),de())},i(r){t||(b(n),t=!0)},o(r){R(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function Fl(i){let e,t,n,r,s,a=i[0].trsControls,l=[];for(let c=0;c<a.length;c+=1)l[c]=Zn(zn(i,a,c));const o=c=>R(l[c],1,1,()=>{l[c]=null});return{c(){e=w("div");for(let c=0;c<l.length;c+=1)l[c].c();t=Y(),n=w("p"),r=H("There is no realtime preview of the TRS outputs."),this.h()},l(c){e=I(c,"DIV",{id:!0,class:!0});var u=L(e);for(let d=0;d<l.length;d+=1)l[d].l(u);u.forEach(m),t=z(c),n=I(c,"P",{});var f=L(n);r=x(f,"There is no realtime preview of the TRS outputs."),f.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(c,u){g(c,e,u);for(let f=0;f<l.length;f+=1)l[f].m(e,null);g(c,t,u),g(c,n,u),_(n,r),s=!0},p(c,u){if(u&3){a=c[0].trsControls;let f;for(f=0;f<a.length;f+=1){const d=zn(c,a,f);l[f]?(l[f].p(d,u),b(l[f],1)):(l[f]=Zn(d),l[f].c(),b(l[f],1),l[f].m(e,null))}for(he(),f=a.length;f<l.length;f+=1)o(f);de()}},i(c){if(!s){for(let u=0;u<a.length;u+=1)b(l[u]);s=!0}},o(c){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)R(l[u]);s=!1},d(c){c&&m(e),et(l,c),c&&m(t),c&&m(n)}}}function Vl(i){let e,t,n,r,s,a;return e=new gr({props:{$$slots:{default:[Ul]},$$scope:{ctx:i}}}),n=new xe({props:{$$slots:{default:[Gl]},$$scope:{ctx:i}}}),s=new xe({props:{$$slots:{default:[Fl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment)},l(l){J(e.$$.fragment,l),t=z(l),J(n.$$.fragment,l),r=z(l),J(s.$$.fragment,l)},m(l,o){K(e,l,o),g(l,t,o),K(n,l,o),g(l,r,o),K(s,l,o),a=!0},p(l,o){const c={};o&1024&&(c.$$scope={dirty:o,ctx:l}),e.$set(c);const u={};o&1027&&(u.$$scope={dirty:o,ctx:l}),n.$set(u);const f={};o&1027&&(f.$$scope={dirty:o,ctx:l}),s.$set(f)},i(l){a||(b(e.$$.fragment,l),b(n.$$.fragment,l),b(s.$$.fragment,l),a=!0)},o(l){R(e.$$.fragment,l),R(n.$$.fragment,l),R(s.$$.fragment,l),a=!1},d(l){Z(e,l),l&&m(t),Z(n,l),l&&m(r),Z(s,l)}}}function Hl(i){let e,t,n,r;return e=new Er({props:{title:"Current Configuration",$$slots:{default:[kl]},$$scope:{ctx:i}}}),n=new _r({props:{$$slots:{default:[Vl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),g(s,t,a),K(n,s,a),r=!0},p(s,[a]){const l={};a&1024&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&1027&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(b(e.$$.fragment,s),b(n.$$.fragment,s),r=!0)},o(s){R(e.$$.fragment,s),R(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function xl(i,e,t){let n,r,s,a;le(i,ve,c=>t(0,r=c)),le(i,me,c=>t(4,s=c)),le(i,Le,c=>t(5,a=c));const l=()=>{r&&gl(r)},o=()=>{Ve(Le,a=!0,a),r&&Ve(me,s=structuredClone(r),s)};return i.$$.update=()=>{i.$$.dirty&1&&t(1,n=r?Me(r.deviceId):null)},[r,n,l,o]}class jl extends Ee{constructor(e){super(),_e(this,e,xl,Hl,ge,{})}}function ql(i){let e,t;return{c(){e=w("p"),t=H(`WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.`),this.h()},l(n){e=I(n,"P",{class:!0});var r=L(e);t=x(r,`WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.`),r.forEach(m),this.h()},h(){O(e,"class","notice svelte-kpoxps")},m(n,r){g(n,e,r),_(e,t)},p:ue,i:ue,o:ue,d(n){n&&m(e)}}}function Yl(i){let e,t,n,r;const s=[Xl,zl],a=[];function l(o,c){return o[1]?0:1}return e=l(i),t=a[e]=s[e](i),{c(){t.c(),n=ae()},l(o){t.l(o),n=ae()},m(o,c){a[e].m(o,c),g(o,n,c),r=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(he(),R(a[u],1,1,()=>{a[u]=null}),de(),t=a[e],t?t.p(o,c):(t=a[e]=s[e](o),t.c()),b(t,1),t.m(n.parentNode,n))},i(o){r||(b(t),r=!0)},o(o){R(t),r=!1},d(o){a[e].d(o),o&&m(n)}}}function zl(i){let e,t;return{c(){e=w("p"),t=H("Connect a controller via USB."),this.h()},l(n){e=I(n,"P",{class:!0});var r=L(e);t=x(r,"Connect a controller via USB."),r.forEach(m),this.h()},h(){O(e,"class","notice svelte-kpoxps")},m(n,r){g(n,e,r),_(e,t)},p:ue,i:ue,o:ue,d(n){n&&m(e)}}}function Xl(i){let e,t,n,r,s;const a=[Jl,Wl],l=[];function o(c,u){return u&6&&(e=null),e==null&&(e=!!(c[2]&&De.gte(c[1].firmwareVersion,"2.1.0"))),e?0:1}return t=o(i,-1),n=l[t]=a[t](i),{c(){n.c(),r=ae()},l(c){n.l(c),r=ae()},m(c,u){l[t].m(c,u),g(c,r,u),s=!0},p(c,u){let f=t;t=o(c,u),t===f?l[t].p(c,u):(he(),R(l[f],1,1,()=>{l[f]=null}),de(),n=l[t],n?n.p(c,u):(n=l[t]=a[t](c),n.c()),b(n,1),n.m(r.parentNode,r))},i(c){s||(b(n),s=!0)},o(c){R(n),s=!1},d(c){l[t].d(c),c&&m(r)}}}function Wl(i){let e,t,n,r,s;const a=[Zl,Kl],l=[];function o(c,u){return c[3]?0:1}return e=o(i),t=l[e]=a[e](i),{c(){t.c(),n=Y(),r=w("p")},l(c){t.l(c),n=z(c),r=I(c,"P",{}),L(r).forEach(m)},m(c,u){l[e].m(c,u),g(c,n,u),g(c,r,u),s=!0},p(c,u){let f=e;e=o(c),e!==f&&(he(),R(l[f],1,1,()=>{l[f]=null}),de(),t=l[e],t||(t=l[e]=a[e](c),t.c()),b(t,1),t.m(n.parentNode,n))},i(c){s||(b(t),s=!0)},o(c){R(t),s=!1},d(c){l[e].d(c),c&&m(n),c&&m(r)}}}function Jl(i){let e,t,n,r,s,a,l;return a=new Be({props:{label:"Click to reset your 16n's EEPROM to factory defaults",click:i[5]}}),{c(){e=w("div"),t=w("p"),n=H(`It looks like a 16n is trying to connect, but may have a corrupt
              memory.`),r=Y(),s=w("p"),W(a.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var c=L(e);t=I(c,"P",{});var u=L(t);n=x(u,`It looks like a 16n is trying to connect, but may have a corrupt
              memory.`),u.forEach(m),r=z(c),s=I(c,"P",{});var f=L(s);J(a.$$.fragment,f),f.forEach(m),c.forEach(m),this.h()},h(){O(e,"class","notice svelte-kpoxps")},m(o,c){g(o,e,c),_(e,t),_(t,n),_(e,r),_(e,s),K(a,s,null),l=!0},p:ue,i(o){l||(b(a.$$.fragment,o),l=!0)},o(o){R(a.$$.fragment,o),l=!1},d(o){o&&m(e),Z(a)}}}function Kl(i){let e,t;return e=new jl({}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Zl(i){let e,t;return e=new Ol({}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Ql(i){let e,t,n,r,s,a,l,o,c,u,f,d,h,y,F,k;a=new qa({});const A=[Yl,ql],B=[];function P(p,T){return p[0]?0:1}return c=P(i),u=B[c]=A[c](i),{c(){e=w("main"),t=w("div"),n=w("h1"),r=H("16n configuration tool"),s=Y(),W(a.$$.fragment),l=Y(),o=w("div"),u.c(),f=Y(),d=w("div"),h=w("div"),y=H("16n Editor v"),F=H(i[4]),this.h()},l(p){e=I(p,"MAIN",{class:!0});var T=L(e);t=I(T,"DIV",{id:!0,class:!0});var U=L(t);n=I(U,"H1",{class:!0});var j=L(n);r=x(j,"16n configuration tool"),j.forEach(m),s=z(U),J(a.$$.fragment,U),U.forEach(m),l=z(T),o=I(T,"DIV",{id:!0,class:!0});var se=L(o);u.l(se),se.forEach(m),f=z(T),d=I(T,"DIV",{id:!0,class:!0});var ee=L(d);h=I(ee,"DIV",{class:!0});var fe=L(h);y=x(fe,"16n Editor v"),F=x(fe,i[4]),fe.forEach(m),ee.forEach(m),T.forEach(m),this.h()},h(){O(n,"class","svelte-kpoxps"),O(t,"id","head"),O(t,"class","svelte-kpoxps"),O(o,"id","inner"),O(o,"class","svelte-kpoxps"),O(h,"class","foot-left svelte-kpoxps"),O(d,"id","foot"),O(d,"class","svelte-kpoxps"),O(e,"class","svelte-kpoxps")},m(p,T){g(p,e,T),_(e,t),_(t,n),_(n,r),_(t,s),K(a,t,null),_(e,l),_(e,o),B[c].m(o,null),_(e,f),_(e,d),_(d,h),_(h,y),_(h,F),k=!0},p(p,[T]){let U=c;c=P(p),c===U?B[c].p(p,T):(he(),R(B[U],1,1,()=>{B[U]=null}),de(),u=B[c],u?u.p(p,T):(u=B[c]=A[c](p),u.c()),b(u,1),u.m(o,null))},i(p){k||(b(a.$$.fragment,p),b(u),k=!0)},o(p){R(a.$$.fragment,p),R(u),k=!1},d(p){p&&m(e),Z(a),B[c].d()}}}function eo(i,e,t){let n,r,s,a,l;le(i,ke,f=>t(6,n=f)),le(i,jt,f=>t(0,r=f)),le(i,ve,f=>t(1,s=f)),le(i,Et,f=>t(2,a=f)),le(i,Le,f=>t(3,l=f));const o="2.0.2",c=!!navigator.requestMIDIAccess;return Nr(()=>{c&&$.enable({sysex:!0}).then(La).catch(f=>alert(f))}),[r,s,a,l,o,()=>{n&&ur(n)}]}class ro extends Ee{constructor(e){super(),_e(this,e,eo,Ql,ge,{})}}export{ro as default};
