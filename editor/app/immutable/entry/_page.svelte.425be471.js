import{K as ye,S as Ee,i as _e,s as ge,k as S,l as w,m as L,h as m,n as O,b as v,I as ue,a as Y,q as G,c as z,r as F,H as b,L as Ne,g as $,v as he,d as I,f as de,u as we,y as W,z as J,A as K,B as Z,M as vr,e as ae,J as oe,N as Dt,C as Xe,E as We,F as Je,G as Ke,w as ht,O as dt,P as Ve,Q as mt,R as ze,T as Pt,U as Zn,V as pt,W as Qn,X as nt,Y as xe,Z as er,_ as $r,$ as tr,a0 as Kt,p as Zt,a1 as Qt,o as Nr}from"../chunks/index.d5de30d9.js";import{w as Ie}from"../chunks/index.3d1ec051.js";function yr(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var ke={},Sr={get exports(){return ke},set exports(i){ke=i}};const wr="2.0.0",Ir=256,Rr=Number.MAX_SAFE_INTEGER||9007199254740991,Ar=16,Cr=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var bt={MAX_LENGTH:Ir,MAX_SAFE_COMPONENT_LENGTH:Ar,MAX_SAFE_INTEGER:Rr,RELEASE_TYPES:Cr,SEMVER_SPEC_VERSION:wr,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Mr=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};var vt=Mr;(function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:t}=bt,n=vt;e=i.exports={};const r=e.re=[],s=e.src=[],a=e.t={};let l=0;const o=(c,u,f)=>{const d=l++;n(c,d,u),a[c]=d,s[d]=u,r[d]=new RegExp(u,f?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","[0-9]+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),o("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),o("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),o("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),o("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),o("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),o("BUILDIDENTIFIER","[0-9A-Za-z-]+"),o("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),o("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),o("FULL",`^${s[a.FULLPLAIN]}$`),o("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),o("LOOSE",`^${s[a.LOOSEPLAIN]}$`),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),o("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),o("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),o("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),o("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),o("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),o("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),o("COERCERTL",s[a.COERCE],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",o("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),o("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),o("LONECARET","(?:\\^)"),o("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",o("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),o("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),o("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),o("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),o("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),o("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Sr,ke);const Tr=Object.freeze({loose:!0}),Or=Object.freeze({}),Lr=i=>i?typeof i!="object"?Tr:i:Or;var Bt=Lr;const en=/^[0-9]+$/,nr=(i,e)=>{const t=en.test(i),n=en.test(e);return t&&n&&(i=+i,e=+e),i===e?0:t&&!n?-1:n&&!t?1:i<e?-1:1},Dr=(i,e)=>nr(e,i);var rr={compareIdentifiers:nr,rcompareIdentifiers:Dr};const kr={},Pr=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"})),Br=yr(Pr),it=vt,{MAX_LENGTH:tn,MAX_SAFE_INTEGER:at}=bt,{re:nn,t:rn}=ke,Ur=Bt,{compareIdentifiers:Fe}=rr;let Gr=class Ce{constructor(e,t){if(t=Ur(t),e instanceof Ce){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${Br.inspect(e)}`);if(e.length>tn)throw new TypeError(`version is longer than ${tn} characters`);it("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?nn[rn.LOOSE]:nn[rn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>at||this.major<0)throw new TypeError("Invalid major version");if(this.minor>at||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>at||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const s=+r;if(s>=0&&s<at)return s}return r}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(it("SemVer.compare",this.version,this.options,e),!(e instanceof Ce)){if(typeof e=="string"&&e===this.version)return 0;e=new Ce(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Ce||(e=new Ce(e,this.options)),Fe(this.major,e.major)||Fe(this.minor,e.minor)||Fe(this.patch,e.patch)}comparePre(e){if(e instanceof Ce||(e=new Ce(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(it("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Fe(n,r)}while(++t)}compareBuild(e){e instanceof Ce||(e=new Ce(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(it("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Fe(n,r)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let s=[t,r];n===!1&&(s=[t]),Fe(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var $e=Gr;const sn=$e,Fr=(i,e,t=!1)=>{if(i instanceof sn)return i;try{return new sn(i,e)}catch(n){if(!t)return null;throw n}};var Ze=Fr;const Vr=Ze,Hr=(i,e)=>{const t=Vr(i,e);return t?t.version:null};var xr=Hr;const jr=Ze,qr=(i,e)=>{const t=jr(i.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var Yr=qr;const an=$e,zr=(i,e,t,n,r)=>{typeof t=="string"&&(r=n,n=t,t=void 0);try{return new an(i instanceof an?i.version:i,t).inc(e,n,r).version}catch{return null}};var Xr=zr;const ln=Ze,Wr=(i,e)=>{const t=ln(i,null,!0),n=ln(e,null,!0),r=t.compare(n);if(r===0)return null;const s=r>0,a=s?t:n,l=s?n:t,o=!!a.prerelease.length,c=o?"pre":"";return t.major!==n.major?c+"major":t.minor!==n.minor?c+"minor":t.patch!==n.patch?c+"patch":o?"prerelease":l.patch?"patch":l.minor?"minor":"major"};var Jr=Wr;const Kr=$e,Zr=(i,e)=>new Kr(i,e).major;var Qr=Zr;const es=$e,ts=(i,e)=>new es(i,e).minor;var ns=ts;const rs=$e,ss=(i,e)=>new rs(i,e).patch;var is=ss;const as=Ze,ls=(i,e)=>{const t=as(i,e);return t&&t.prerelease.length?t.prerelease:null};var os=ls;const on=$e,cs=(i,e,t)=>new on(i,t).compare(new on(e,t));var Re=cs;const fs=Re,us=(i,e,t)=>fs(e,i,t);var hs=us;const ds=Re,ms=(i,e)=>ds(i,e,!0);var ps=ms;const cn=$e,Es=(i,e,t)=>{const n=new cn(i,t),r=new cn(e,t);return n.compare(r)||n.compareBuild(r)};var Ut=Es;const _s=Ut,gs=(i,e)=>i.sort((t,n)=>_s(t,n,e));var bs=gs;const vs=Ut,$s=(i,e)=>i.sort((t,n)=>vs(n,t,e));var Ns=$s;const ys=Re,Ss=(i,e,t)=>ys(i,e,t)>0;var $t=Ss;const ws=Re,Is=(i,e,t)=>ws(i,e,t)<0;var Gt=Is;const Rs=Re,As=(i,e,t)=>Rs(i,e,t)===0;var sr=As;const Cs=Re,Ms=(i,e,t)=>Cs(i,e,t)!==0;var ir=Ms;const Ts=Re,Os=(i,e,t)=>Ts(i,e,t)>=0;var Ft=Os;const Ls=Re,Ds=(i,e,t)=>Ls(i,e,t)<=0;var Vt=Ds;const ks=sr,Ps=ir,Bs=$t,Us=Ft,Gs=Gt,Fs=Vt,Vs=(i,e,t,n)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i===t;case"!==":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i!==t;case"":case"=":case"==":return ks(i,t,n);case"!=":return Ps(i,t,n);case">":return Bs(i,t,n);case">=":return Us(i,t,n);case"<":return Gs(i,t,n);case"<=":return Fs(i,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var ar=Vs;const Hs=$e,xs=Ze,{re:lt,t:ot}=ke,js=(i,e)=>{if(i instanceof Hs)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let t=null;if(!e.rtl)t=i.match(lt[ot.COERCE]);else{let n;for(;(n=lt[ot.COERCERTL].exec(i))&&(!t||t.index+t[0].length!==i.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),lt[ot.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;lt[ot.COERCERTL].lastIndex=-1}return t===null?null:xs(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};var qs=js,St,fn;function Ys(){return fn||(fn=1,St=function(i){i.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),St}var wt,un;function zs(){if(un)return wt;un=1,wt=i,i.Node=r,i.create=i;function i(s){var a=this;if(a instanceof i||(a=new i),a.tail=null,a.head=null,a.length=0,s&&typeof s.forEach=="function")s.forEach(function(c){a.push(c)});else if(arguments.length>0)for(var l=0,o=arguments.length;l<o;l++)a.push(arguments[l]);return a}i.prototype.removeNode=function(s){if(s.list!==this)throw new Error("removing node which does not belong to this list");var a=s.next,l=s.prev;return a&&(a.prev=l),l&&(l.next=a),s===this.head&&(this.head=a),s===this.tail&&(this.tail=l),s.list.length--,s.next=null,s.prev=null,s.list=null,a},i.prototype.unshiftNode=function(s){if(s!==this.head){s.list&&s.list.removeNode(s);var a=this.head;s.list=this,s.next=a,a&&(a.prev=s),this.head=s,this.tail||(this.tail=s),this.length++}},i.prototype.pushNode=function(s){if(s!==this.tail){s.list&&s.list.removeNode(s);var a=this.tail;s.list=this,s.prev=a,a&&(a.next=s),this.tail=s,this.head||(this.head=s),this.length++}},i.prototype.push=function(){for(var s=0,a=arguments.length;s<a;s++)t(this,arguments[s]);return this.length},i.prototype.unshift=function(){for(var s=0,a=arguments.length;s<a;s++)n(this,arguments[s]);return this.length},i.prototype.pop=function(){if(this.tail){var s=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,s}},i.prototype.shift=function(){if(this.head){var s=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,s}},i.prototype.forEach=function(s,a){a=a||this;for(var l=this.head,o=0;l!==null;o++)s.call(a,l.value,o,this),l=l.next},i.prototype.forEachReverse=function(s,a){a=a||this;for(var l=this.tail,o=this.length-1;l!==null;o--)s.call(a,l.value,o,this),l=l.prev},i.prototype.get=function(s){for(var a=0,l=this.head;l!==null&&a<s;a++)l=l.next;if(a===s&&l!==null)return l.value},i.prototype.getReverse=function(s){for(var a=0,l=this.tail;l!==null&&a<s;a++)l=l.prev;if(a===s&&l!==null)return l.value},i.prototype.map=function(s,a){a=a||this;for(var l=new i,o=this.head;o!==null;)l.push(s.call(a,o.value,this)),o=o.next;return l},i.prototype.mapReverse=function(s,a){a=a||this;for(var l=new i,o=this.tail;o!==null;)l.push(s.call(a,o.value,this)),o=o.prev;return l},i.prototype.reduce=function(s,a){var l,o=this.head;if(arguments.length>1)l=a;else if(this.head)o=this.head.next,l=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=0;o!==null;c++)l=s(l,o.value,c),o=o.next;return l},i.prototype.reduceReverse=function(s,a){var l,o=this.tail;if(arguments.length>1)l=a;else if(this.tail)o=this.tail.prev,l=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=this.length-1;o!==null;c--)l=s(l,o.value,c),o=o.prev;return l},i.prototype.toArray=function(){for(var s=new Array(this.length),a=0,l=this.head;l!==null;a++)s[a]=l.value,l=l.next;return s},i.prototype.toArrayReverse=function(){for(var s=new Array(this.length),a=0,l=this.tail;l!==null;a++)s[a]=l.value,l=l.prev;return s},i.prototype.slice=function(s,a){a=a||this.length,a<0&&(a+=this.length),s=s||0,s<0&&(s+=this.length);var l=new i;if(a<s||a<0)return l;s<0&&(s=0),a>this.length&&(a=this.length);for(var o=0,c=this.head;c!==null&&o<s;o++)c=c.next;for(;c!==null&&o<a;o++,c=c.next)l.push(c.value);return l},i.prototype.sliceReverse=function(s,a){a=a||this.length,a<0&&(a+=this.length),s=s||0,s<0&&(s+=this.length);var l=new i;if(a<s||a<0)return l;s<0&&(s=0),a>this.length&&(a=this.length);for(var o=this.length,c=this.tail;c!==null&&o>a;o--)c=c.prev;for(;c!==null&&o>s;o--,c=c.prev)l.push(c.value);return l},i.prototype.splice=function(s,a,...l){s>this.length&&(s=this.length-1),s<0&&(s=this.length+s);for(var o=0,c=this.head;c!==null&&o<s;o++)c=c.next;for(var u=[],o=0;c&&o<a;o++)u.push(c.value),c=this.removeNode(c);c===null&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev);for(var o=0;o<l.length;o++)c=e(this,c,l[o]);return u},i.prototype.reverse=function(){for(var s=this.head,a=this.tail,l=s;l!==null;l=l.prev){var o=l.prev;l.prev=l.next,l.next=o}return this.head=a,this.tail=s,this};function e(s,a,l){var o=a===s.head?new r(l,null,a,s):new r(l,a,a.next,s);return o.next===null&&(s.tail=o),o.prev===null&&(s.head=o),s.length++,o}function t(s,a){s.tail=new r(a,s.tail,null,s),s.head||(s.head=s.tail),s.length++}function n(s,a){s.head=new r(a,null,s.head,s),s.tail||(s.tail=s.head),s.length++}function r(s,a,l,o){if(!(this instanceof r))return new r(s,a,l,o);this.list=o,this.value=s,a?(a.next=this,this.prev=a):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}try{Ys()(i)}catch{}return wt}var It,hn;function Xs(){if(hn)return It;hn=1;const i=zs(),e=Symbol("max"),t=Symbol("length"),n=Symbol("lengthCalculator"),r=Symbol("allowStale"),s=Symbol("maxAge"),a=Symbol("dispose"),l=Symbol("noDisposeOnSet"),o=Symbol("lruList"),c=Symbol("cache"),u=Symbol("updateAgeOnGet"),f=()=>1;class d{constructor(p){if(typeof p=="number"&&(p={max:p}),p||(p={}),p.max&&(typeof p.max!="number"||p.max<0))throw new TypeError("max must be a non-negative number");this[e]=p.max||1/0;const M=p.length||f;if(this[n]=typeof M!="function"?f:M,this[r]=p.stale||!1,p.maxAge&&typeof p.maxAge!="number")throw new TypeError("maxAge must be a number");this[s]=p.maxAge||0,this[a]=p.dispose,this[l]=p.noDisposeOnSet||!1,this[u]=p.updateAgeOnGet||!1,this.reset()}set max(p){if(typeof p!="number"||p<0)throw new TypeError("max must be a non-negative number");this[e]=p||1/0,V(this)}get max(){return this[e]}set allowStale(p){this[r]=!!p}get allowStale(){return this[r]}set maxAge(p){if(typeof p!="number")throw new TypeError("maxAge must be a non-negative number");this[s]=p,V(this)}get maxAge(){return this[s]}set lengthCalculator(p){typeof p!="function"&&(p=f),p!==this[n]&&(this[n]=p,this[t]=0,this[o].forEach(M=>{M.length=this[n](M.value,M.key),this[t]+=M.length})),V(this)}get lengthCalculator(){return this[n]}get length(){return this[t]}get itemCount(){return this[o].length}rforEach(p,M){M=M||this;for(let k=this[o].tail;k!==null;){const q=k.prev;T(this,p,k,M),k=q}}forEach(p,M){M=M||this;for(let k=this[o].head;k!==null;){const q=k.next;T(this,p,k,M),k=q}}keys(){return this[o].toArray().map(p=>p.key)}values(){return this[o].toArray().map(p=>p.value)}reset(){this[a]&&this[o]&&this[o].length&&this[o].forEach(p=>this[a](p.key,p.value)),this[c]=new Map,this[o]=new i,this[t]=0}dump(){return this[o].map(p=>R(this,p)?!1:{k:p.key,v:p.value,e:p.now+(p.maxAge||0)}).toArray().filter(p=>p)}dumpLru(){return this[o]}set(p,M,k){if(k=k||this[s],k&&typeof k!="number")throw new TypeError("maxAge must be a number");const q=k?Date.now():0,se=this[n](M,p);if(this[c].has(p)){if(se>this[e])return H(this,this[c].get(p)),!1;const fe=this[c].get(p).value;return this[a]&&(this[l]||this[a](p,fe.value)),fe.now=q,fe.maxAge=k,fe.value=M,this[t]+=se-fe.length,fe.length=se,this.get(p),V(this),!0}const te=new A(p,M,se,q,k);return te.length>this[e]?(this[a]&&this[a](p,M),!1):(this[t]+=te.length,this[o].unshift(te),this[c].set(p,this[o].head),V(this),!0)}has(p){if(!this[c].has(p))return!1;const M=this[c].get(p).value;return!R(this,M)}get(p){return h(this,p,!0)}peek(p){return h(this,p,!1)}pop(){const p=this[o].tail;return p?(H(this,p),p.value):null}del(p){H(this,this[c].get(p))}load(p){this.reset();const M=Date.now();for(let k=p.length-1;k>=0;k--){const q=p[k],se=q.e||0;if(se===0)this.set(q.k,q.v);else{const te=se-M;te>0&&this.set(q.k,q.v,te)}}}prune(){this[c].forEach((p,M)=>h(this,M,!1))}}const h=(D,p,M)=>{const k=D[c].get(p);if(k){const q=k.value;if(R(D,q)){if(H(D,k),!D[r])return}else M&&(D[u]&&(k.value.now=Date.now()),D[o].unshiftNode(k));return q.value}},R=(D,p)=>{if(!p||!p.maxAge&&!D[s])return!1;const M=Date.now()-p.now;return p.maxAge?M>p.maxAge:D[s]&&M>D[s]},V=D=>{if(D[t]>D[e])for(let p=D[o].tail;D[t]>D[e]&&p!==null;){const M=p.prev;H(D,p),p=M}},H=(D,p)=>{if(p){const M=p.value;D[a]&&D[a](M.key,M.value),D[t]-=M.length,D[c].delete(M.key),D[o].removeNode(p)}};class A{constructor(p,M,k,q,se){this.key=p,this.value=M,this.length=k,this.now=q,this.maxAge=se||0}}const T=(D,p,M,k)=>{let q=M.value;R(D,q)&&(H(D,M),D[r]||(q=void 0)),q&&p.call(k,q.value,q.key,D)};return It=d,It}var Rt,dn;function Ae(){if(dn)return Rt;dn=1;class i{constructor(g,x){if(x=n(x),g instanceof i)return g.loose===!!x.loose&&g.includePrerelease===!!x.includePrerelease?g:new i(g.raw,x);if(g instanceof r)return this.raw=g.value,this.set=[[g]],this.format(),this;if(this.options=x,this.loose=!!x.loose,this.includePrerelease=!!x.includePrerelease,this.raw=g,this.set=g.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${g}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(U=>!R(U[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&V(U[0])){this.set=[U];break}}}this.format()}format(){return this.range=this.set.map(g=>g.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(g){g=g.trim();const B=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+g,U=t.get(B);if(U)return U;const P=this.options.loose,j=P?l[o.HYPHENRANGELOOSE]:l[o.HYPHENRANGE];g=g.replace(j,fe(this.options.includePrerelease)),s("hyphen replace",g),g=g.replace(l[o.COMPARATORTRIM],c),s("comparator trim",g),g=g.replace(l[o.TILDETRIM],u),g=g.replace(l[o.CARETTRIM],f),g=g.split(/\s+/).join(" ");let Q=g.split(" ").map(ie=>A(ie,this.options)).join(" ").split(/\s+/).map(ie=>ce(ie,this.options));P&&(Q=Q.filter(ie=>(s("loose invalid filter",ie,this.options),!!ie.match(l[o.COMPARATORLOOSE])))),s("range list",Q);const X=new Map,re=Q.map(ie=>new r(ie,this.options));for(const ie of re){if(R(ie))return[ie];X.set(ie.value,ie)}X.size>1&&X.has("")&&X.delete("");const ee=[...X.values()];return t.set(B,ee),ee}intersects(g,x){if(!(g instanceof i))throw new TypeError("a Range is required");return this.set.some(B=>H(B,x)&&g.set.some(U=>H(U,x)&&B.every(P=>U.every(j=>P.intersects(j,x)))))}test(g){if(!g)return!1;if(typeof g=="string")try{g=new a(g,this.options)}catch{return!1}for(let x=0;x<this.set.length;x++)if(Te(this.set[x],g,this.options))return!0;return!1}}Rt=i;const e=Xs(),t=new e({max:1e3}),n=Bt,r=Nt(),s=vt,a=$e,{re:l,t:o,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:f}=ke,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=bt,R=_=>_.value==="<0.0.0-0",V=_=>_.value==="",H=(_,g)=>{let x=!0;const B=_.slice();let U=B.pop();for(;x&&B.length;)x=B.every(P=>U.intersects(P,g)),U=B.pop();return x},A=(_,g)=>(s("comp",_,g),_=M(_,g),s("caret",_),_=D(_,g),s("tildes",_),_=q(_,g),s("xrange",_),_=te(_,g),s("stars",_),_),T=_=>!_||_.toLowerCase()==="x"||_==="*",D=(_,g)=>_.trim().split(/\s+/).map(x=>p(x,g)).join(" "),p=(_,g)=>{const x=g.loose?l[o.TILDELOOSE]:l[o.TILDE];return _.replace(x,(B,U,P,j,Q)=>{s("tilde",_,B,U,P,j,Q);let X;return T(U)?X="":T(P)?X=`>=${U}.0.0 <${+U+1}.0.0-0`:T(j)?X=`>=${U}.${P}.0 <${U}.${+P+1}.0-0`:Q?(s("replaceTilde pr",Q),X=`>=${U}.${P}.${j}-${Q} <${U}.${+P+1}.0-0`):X=`>=${U}.${P}.${j} <${U}.${+P+1}.0-0`,s("tilde return",X),X})},M=(_,g)=>_.trim().split(/\s+/).map(x=>k(x,g)).join(" "),k=(_,g)=>{s("caret",_,g);const x=g.loose?l[o.CARETLOOSE]:l[o.CARET],B=g.includePrerelease?"-0":"";return _.replace(x,(U,P,j,Q,X)=>{s("caret",_,U,P,j,Q,X);let re;return T(P)?re="":T(j)?re=`>=${P}.0.0${B} <${+P+1}.0.0-0`:T(Q)?P==="0"?re=`>=${P}.${j}.0${B} <${P}.${+j+1}.0-0`:re=`>=${P}.${j}.0${B} <${+P+1}.0.0-0`:X?(s("replaceCaret pr",X),P==="0"?j==="0"?re=`>=${P}.${j}.${Q}-${X} <${P}.${j}.${+Q+1}-0`:re=`>=${P}.${j}.${Q}-${X} <${P}.${+j+1}.0-0`:re=`>=${P}.${j}.${Q}-${X} <${+P+1}.0.0-0`):(s("no pr"),P==="0"?j==="0"?re=`>=${P}.${j}.${Q}${B} <${P}.${j}.${+Q+1}-0`:re=`>=${P}.${j}.${Q}${B} <${P}.${+j+1}.0-0`:re=`>=${P}.${j}.${Q} <${+P+1}.0.0-0`),s("caret return",re),re})},q=(_,g)=>(s("replaceXRanges",_,g),_.split(/\s+/).map(x=>se(x,g)).join(" ")),se=(_,g)=>{_=_.trim();const x=g.loose?l[o.XRANGELOOSE]:l[o.XRANGE];return _.replace(x,(B,U,P,j,Q,X)=>{s("xRange",_,B,U,P,j,Q,X);const re=T(P),ee=re||T(j),ie=ee||T(Q),Oe=ie;return U==="="&&Oe&&(U=""),X=g.includePrerelease?"-0":"",re?U===">"||U==="<"?B="<0.0.0-0":B="*":U&&Oe?(ee&&(j=0),Q=0,U===">"?(U=">=",ee?(P=+P+1,j=0,Q=0):(j=+j+1,Q=0)):U==="<="&&(U="<",ee?P=+P+1:j=+j+1),U==="<"&&(X="-0"),B=`${U+P}.${j}.${Q}${X}`):ee?B=`>=${P}.0.0${X} <${+P+1}.0.0-0`:ie&&(B=`>=${P}.${j}.0${X} <${P}.${+j+1}.0-0`),s("xRange return",B),B})},te=(_,g)=>(s("replaceStars",_,g),_.trim().replace(l[o.STAR],"")),ce=(_,g)=>(s("replaceGTE0",_,g),_.trim().replace(l[g.includePrerelease?o.GTE0PRE:o.GTE0],"")),fe=_=>(g,x,B,U,P,j,Q,X,re,ee,ie,Oe,le)=>(T(B)?x="":T(U)?x=`>=${B}.0.0${_?"-0":""}`:T(P)?x=`>=${B}.${U}.0${_?"-0":""}`:j?x=`>=${x}`:x=`>=${x}${_?"-0":""}`,T(re)?X="":T(ee)?X=`<${+re+1}.0.0-0`:T(ie)?X=`<${re}.${+ee+1}.0-0`:Oe?X=`<=${re}.${ee}.${ie}-${Oe}`:_?X=`<${re}.${ee}.${+ie+1}-0`:X=`<=${X}`,`${x} ${X}`.trim()),Te=(_,g,x)=>{for(let B=0;B<_.length;B++)if(!_[B].test(g))return!1;if(g.prerelease.length&&!x.includePrerelease){for(let B=0;B<_.length;B++)if(s(_[B].semver),_[B].semver!==r.ANY&&_[B].semver.prerelease.length>0){const U=_[B].semver;if(U.major===g.major&&U.minor===g.minor&&U.patch===g.patch)return!0}return!1}return!0};return Rt}var At,mn;function Nt(){if(mn)return At;mn=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(u,f){if(f=t(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===i?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const f=this.options.loose?n[r.COMPARATORLOOSE]:n[r.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new l(d[2],this.options.loose):this.semver=i}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===i||u===i)return!0;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new o(this.value,f).test(u.semver):(f=t(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}At=e;const t=Bt,{re:n,t:r}=ke,s=ar,a=vt,l=$e,o=Ae();return At}const Ws=Ae(),Js=(i,e,t)=>{try{e=new Ws(e,t)}catch{return!1}return e.test(i)};var yt=Js;const Ks=Ae(),Zs=(i,e)=>new Ks(i,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));var Qs=Zs;const ei=$e,ti=Ae(),ni=(i,e,t)=>{let n=null,r=null,s=null;try{s=new ti(e,t)}catch{return null}return i.forEach(a=>{s.test(a)&&(!n||r.compare(a)===-1)&&(n=a,r=new ei(n,t))}),n};var ri=ni;const si=$e,ii=Ae(),ai=(i,e,t)=>{let n=null,r=null,s=null;try{s=new ii(e,t)}catch{return null}return i.forEach(a=>{s.test(a)&&(!n||r.compare(a)===1)&&(n=a,r=new si(n,t))}),n};var li=ai;const Ct=$e,oi=Ae(),pn=$t,ci=(i,e)=>{i=new oi(i,e);let t=new Ct("0.0.0");if(i.test(t)||(t=new Ct("0.0.0-0"),i.test(t)))return t;t=null;for(let n=0;n<i.set.length;++n){const r=i.set[n];let s=null;r.forEach(a=>{const l=new Ct(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||pn(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!t||pn(t,s))&&(t=s)}return t&&i.test(t)?t:null};var fi=ci;const ui=Ae(),hi=(i,e)=>{try{return new ui(i,e).range||"*"}catch{return null}};var di=hi;const mi=$e,lr=Nt(),{ANY:pi}=lr,Ei=Ae(),_i=yt,En=$t,_n=Gt,gi=Vt,bi=Ft,vi=(i,e,t,n)=>{i=new mi(i,n),e=new Ei(e,n);let r,s,a,l,o;switch(t){case">":r=En,s=gi,a=_n,l=">",o=">=";break;case"<":r=_n,s=bi,a=En,l="<",o="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_i(i,e,n))return!1;for(let c=0;c<e.set.length;++c){const u=e.set[c];let f=null,d=null;if(u.forEach(h=>{h.semver===pi&&(h=new lr(">=0.0.0")),f=f||h,d=d||h,r(h.semver,f.semver,n)?f=h:a(h.semver,d.semver,n)&&(d=h)}),f.operator===l||f.operator===o||(!d.operator||d.operator===l)&&s(i,d.semver))return!1;if(d.operator===o&&a(i,d.semver))return!1}return!0};var Ht=vi;const $i=Ht,Ni=(i,e,t)=>$i(i,e,">",t);var yi=Ni;const Si=Ht,wi=(i,e,t)=>Si(i,e,"<",t);var Ii=wi;const gn=Ae(),Ri=(i,e,t)=>(i=new gn(i,t),e=new gn(e,t),i.intersects(e,t));var Ai=Ri;const Ci=yt,Mi=Re;var Ti=(i,e,t)=>{const n=[];let r=null,s=null;const a=i.sort((u,f)=>Mi(u,f,t));for(const u of a)Ci(u,e,t)?(s=u,r||(r=u)):(s&&n.push([r,s]),s=null,r=null);r&&n.push([r,null]);const l=[];for(const[u,f]of n)u===f?l.push(u):!f&&u===a[0]?l.push("*"):f?u===a[0]?l.push(`<=${f}`):l.push(`${u} - ${f}`):l.push(`>=${u}`);const o=l.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return o.length<c.length?o:e};const bn=Ae(),xt=Nt(),{ANY:Mt}=xt,Qe=yt,jt=Re,Oi=(i,e,t={})=>{if(i===e)return!0;i=new bn(i,t),e=new bn(e,t);let n=!1;e:for(const r of i.set){for(const s of e.set){const a=Di(r,s,t);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},Li=[new xt(">=0.0.0-0")],vn=[new xt(">=0.0.0")],Di=(i,e,t)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===Mt){if(e.length===1&&e[0].semver===Mt)return!0;t.includePrerelease?i=Li:i=vn}if(e.length===1&&e[0].semver===Mt){if(t.includePrerelease)return!0;e=vn}const n=new Set;let r,s;for(const h of i)h.operator===">"||h.operator===">="?r=$n(r,h,t):h.operator==="<"||h.operator==="<="?s=Nn(s,h,t):n.add(h.semver);if(n.size>1)return null;let a;if(r&&s){if(a=jt(r.semver,s.semver,t),a>0)return null;if(a===0&&(r.operator!==">="||s.operator!=="<="))return null}for(const h of n){if(r&&!Qe(h,String(r),t)||s&&!Qe(h,String(s),t))return null;for(const R of e)if(!Qe(h,String(R),t))return!1;return!0}let l,o,c,u,f=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,d=r&&!t.includePrerelease&&r.semver.prerelease.length?r.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const h of e){if(u=u||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",r){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(l=$n(r,h,t),l===h&&l!==r)return!1}else if(r.operator===">="&&!Qe(r.semver,String(h),t))return!1}if(s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(o=Nn(s,h,t),o===h&&o!==s)return!1}else if(s.operator==="<="&&!Qe(s.semver,String(h),t))return!1}if(!h.operator&&(s||r)&&a!==0)return!1}return!(r&&c&&!s&&a!==0||s&&u&&!r&&a!==0||d||f)},$n=(i,e,t)=>{if(!i)return e;const n=jt(i.semver,e.semver,t);return n>0?i:n<0||e.operator===">"&&i.operator===">="?e:i},Nn=(i,e,t)=>{if(!i)return e;const n=jt(i.semver,e.semver,t);return n<0?i:n>0||e.operator==="<"&&i.operator==="<="?e:i};var ki=Oi;const Tt=ke,yn=bt,Pi=$e,Sn=rr,Bi=Ze,Ui=xr,Gi=Yr,Fi=Xr,Vi=Jr,Hi=Qr,xi=ns,ji=is,qi=os,Yi=Re,zi=hs,Xi=ps,Wi=Ut,Ji=bs,Ki=Ns,Zi=$t,Qi=Gt,ea=sr,ta=ir,na=Ft,ra=Vt,sa=ar,ia=qs,aa=Nt(),la=Ae(),oa=yt,ca=Qs,fa=ri,ua=li,ha=fi,da=di,ma=Ht,pa=yi,Ea=Ii,_a=Ai,ga=Ti,ba=ki;var Pe={parse:Bi,valid:Ui,clean:Gi,inc:Fi,diff:Vi,major:Hi,minor:xi,patch:ji,prerelease:qi,compare:Yi,rcompare:zi,compareLoose:Xi,compareBuild:Wi,sort:Ji,rsort:Ki,gt:Zi,lt:Qi,eq:ea,neq:ta,gte:na,lte:ra,cmp:sa,coerce:ia,Comparator:aa,Range:la,satisfies:oa,toComparators:ca,maxSatisfying:fa,minSatisfying:ua,minVersion:ha,validRange:da,outside:ma,gtr:pa,ltr:Ea,intersects:_a,simplifyRange:ga,subset:ba,SemVer:Pi,re:Tt.re,src:Tt.src,tokens:Tt.t,SEMVER_SPEC_VERSION:yn.SEMVER_SPEC_VERSION,RELEASE_TYPES:yn.RELEASE_TYPES,compareIdentifiers:Sn.compareIdentifiers,rcompareIdentifiers:Sn.rcompareIdentifiers};class Se{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,t,n={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==Se.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const r=new wn(e,this,t,n);return this.eventMap[e]||(this.eventMap[e]=[]),n.prepend?this.eventMap[e].unshift(r):this.eventMap[e].push(r),r}addOneTimeListener(e,t,n={}){n.remaining=1,this.addListener(e,t,n)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?this.eventMap[Se.ANY_EVENT]&&this.eventMap[Se.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,n])=>n.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof wn?this.eventMap[e].filter(r=>r===t).length>0:typeof t=="function"?this.eventMap[e].filter(r=>r.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let n=[],r=this.eventMap[Se.ANY_EVENT]||[];return this.eventMap[e]&&(r=r.concat(this.eventMap[e])),r.forEach(s=>{if(s.suspended)return;let a=[...t];Array.isArray(s.arguments)&&(a=a.concat(s.arguments)),s.remaining>0&&(n.push(s.callback.apply(s.context,a)),s.count++),--s.remaining<1&&s.remove()}),n}removeListener(e,t,n={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let r=this.eventMap[e].filter(s=>t&&s.callback!==t||n.remaining&&n.remaining!==s.remaining||n.context&&n.context!==s.context);r.length?this.eventMap[e]=r:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((n,r)=>{let s,a=this.addListener(e,()=>{clearTimeout(s),n()},{remaining:1});t.duration!==1/0&&(s=setTimeout(()=>{a.remove(),r("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class wn{constructor(e,t,n,r={}){if(typeof e!="string"&&!(e instanceof String)&&e!==Se.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof n!="function")throw new TypeError("The 'callback' must be a function.");r.arguments!==void 0&&!Array.isArray(r.arguments)&&(r.arguments=[r.arguments]),r=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},r),r.duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=n,this.context=r.context,this.count=0,this.event=e,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class E{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),E.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),E.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),E.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),E.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class He{constructor(e,t={}){this.duration=N.defaults.note.duration,this.attack=N.defaults.note.attack,this.release=N.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=y.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=y.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=y.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=y.getNoteDetails(e);if(N.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(N.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(N.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(N.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(N.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(N.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(N.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return y.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=y.from7bitToFloat(e)}get rawRelease(){return y.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=y.from7bitToFloat(e)}get number(){return y.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return N.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+e*12+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class y{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const n=this.getNoteDetails(e);if(!n)throw new TypeError("Invalid note identifier");const r={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let s=(n.octave+1+t)*12;if(s+=r[n.name],n.accidental&&(n.accidental.startsWith("b")?s-=n.accidental.length:s+=n.accidental.length),s<0||s>127)throw new RangeError("Invalid octaveOffset value");return s}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const n=t[1].toUpperCase(),r=parseInt(t[3]);let s=t[2].toLowerCase();return s=s===""?void 0:s,{accidental:s,identifier:n+(s||"")+r,name:n,octave:r}}static sanitizeChannels(e){let t;if(N.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return Array.isArray(e)?t=e:t=[e],t.indexOf("all")>-1&&(t=E.MIDI_CHANNEL_NUMBERS),t.map(function(n){return parseInt(n)}).filter(function(n){return n>=1&&n<=16})}static toTimestamp(e){let t=!1;const n=parseFloat(e);return isNaN(n)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?n>=0&&(t=N.time+n):n>=0&&(t=n),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let n=!1;if(Number.isInteger(e)&&e>=0&&e<=127)n=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)n=parseInt(e);else if(typeof e=="string"||e instanceof String)try{n=this.toNoteNumber(e.trim(),t)}catch{return!1}return n}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=Math.floor(e/12-1)+t;return n[e%12]+r.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof He)return e;let n=this.guessNoteNumber(e,t.octaveOffset);if(n===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new He(n,t)}static buildNoteArray(e,t={}){let n=[];return Array.isArray(e)||(e=[e]),e.forEach(r=>{n.push(this.buildNote(r,t))}),n}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,t=0){N.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const n=((e<<7)+t)/16383;return Math.min(Math.max(n,0),1)}static fromFloatToMsbLsb(e){N.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(e*16383);return{msb:t>>7,lsb:t&127}}static offsetNumber(e,t=0,n=0){if(N.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,n=parseInt(n)||0}return Math.min(Math.max(e+t*12+n,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(n=>e[n]===t)}static getCcNameByNumber(e){if(!(N.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return E.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let t=E.CONTROL_CHANGE_MESSAGES.find(n=>n.name===e);return t?t.number:E.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in E.CHANNEL_MODE_MESSAGES)if(E.CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===E.CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class va extends Se{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,n={}){if(N.validation){if(n.useRawValue&&(n.rawValue=n.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(n.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}n.rawValue||(t=y.fromFloatTo7Bit(t));const r=N.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),y.buildNoteArray(e).forEach(s=>{this.send([(E.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),s.getOffsetNumber(r),t],{time:y.toTimestamp(n.time)})}),this}sendControlChange(e,t,n={}){if(typeof e=="string"&&(e=y.getCcNumberByName(e)),Array.isArray(t)||(t=[t]),N.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(t=t.map(r=>{const s=Math.min(Math.max(parseInt(r),0),127);if(isNaN(s))throw new TypeError("Values must be integers between 0 and 127");return s}),t.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((r,s)=>{this.send([(E.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+s*32,t[s]],{time:y.toTimestamp(n.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2?this:(this.sendControlChange(38,e[1],t),this)}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=E.REGISTERED_PARAMETERS[e]),N.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(E.REGISTERED_PARAMETERS).forEach(r=>{E.REGISTERED_PARAMETERS[r][0]===e[0]&&E.REGISTERED_PARAMETERS[r][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=E.REGISTERED_PARAMETERS[e]),N.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(E.REGISTERED_PARAMETERS).forEach(r=>{E.REGISTERED_PARAMETERS[r][0]===e[0]&&E.REGISTERED_PARAMETERS[r][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){this.sendNoteOn(e,t);const n=Array.isArray(e)?e:[e];for(let r of n)if(parseInt(r.duration)>0){const s={time:(y.toTimestamp(t.time)||N.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(r,s)}else if(parseInt(t.duration)>0){const s={time:(y.toTimestamp(t.time)||N.time)+parseInt(t.duration),release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(r,s)}return this}sendNoteOff(e,t={}){if(N.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;t.rawRelease!=null?n=t.rawRelease:isNaN(t.release)||(n=Math.round(t.release*127));const r=N.octaveOffset+this.output.octaveOffset+this.octaveOffset;return y.buildNoteArray(e,{rawRelease:parseInt(n)}).forEach(s=>{this.send([(E.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),s.getOffsetNumber(r),s.rawRelease],{time:y.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(N.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;t.rawAttack!=null?n=t.rawAttack:isNaN(t.attack)||(n=Math.round(t.attack*127));const r=N.octaveOffset+this.output.octaveOffset+this.octaveOffset;return y.buildNoteArray(e,{rawAttack:n}).forEach(s=>{this.send([(E.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),s.getOffsetNumber(r),s.rawAttack],{time:y.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,n={}){if(typeof e=="string"&&(e=E.CHANNEL_MODE_MESSAGES[e]),N.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(E.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:y.toTimestamp(n.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(N.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(E.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e*127)],{time:y.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,N.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let n=Math.floor(e)+64,r=e-Math.floor(e);r=Math.round((r+1)/2*16383);let s=r>>7&127,a=r&127;return this.sendRpnValue("channelcoarsetuning",n,t),this.sendRpnValue("channelfinetuning",[s,a],t),this}sendModulationRange(e,t,n={}){if(N.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(t!=null&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],n),this}sendNrpnValue(e,t,n={}){if(t=[].concat(t),N.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectNonRegisteredParameter(n),this}sendPitchBend(e,t={}){if(N.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let n=0,r=0;if(t.rawValue&&Array.isArray(e))n=e[0],r=e[1];else if(t.rawValue&&!Array.isArray(e))n=e;else{const s=y.fromFloatToMsbLsb((e+1)/2);n=s.msb,r=s.lsb}return this.send([(E.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,n],{time:y.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,n={}){if(N.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],n),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,N.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(E.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:y.toTimestamp(t.time)}),this}sendRpnValue(e,t,n={}){if(Array.isArray(e)||(e=E.REGISTERED_PARAMETERS[e]),N.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectRegisteredParameter(n),this}sendTuningBank(e,t={}){if(N.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(N.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class kt extends Se{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new va(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:N.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},n=0){if(e instanceof or&&(e=y.isNode?e.data:e.rawData),e instanceof Uint8Array&&y.isNode&&(e=Array.from(e)),N.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(n)?{time:0}:{time:n}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(r=>{if(r=parseInt(r),!(r>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,y.toTimestamp(t.time)),this}sendSysex(e,t=[],n={}){if(e=[].concat(e),t instanceof Uint8Array){const r=new Uint8Array(1+e.length+t.length+1);r[0]=E.SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(e),1),r.set(t,1+e.length),r[r.length-1]=E.SYSTEM_MESSAGES.sysexend,this.send(r,{time:n.time})}else{const r=e.concat(t,E.SYSTEM_MESSAGES.sysexend);this.send([E.SYSTEM_MESSAGES.sysex].concat(r),{time:n.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():N.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(N.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([E.SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){e=Math.floor(e)||0;var n=e>>7&127,r=e&127;return this.send([E.SYSTEM_MESSAGES.songposition,n,r],{time:t.time}),this}sendSongSelect(e=0,t={}){if(N.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([E.SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([E.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([E.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([E.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([E.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([E.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([E.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([E.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return N.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(e,t,n)}),this}sendControlChange(e,t,n={},r={}){if(N.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendControlChange(e,t,n)}),this}sendPitchBendRange(e=0,t=0,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendPitchBendRange(e,t,n)}),this}setPitchBendRange(e=0,t=0,n="all",r={}){return N.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,r)}sendRpnValue(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnValue(e,t,n)}),this}setRegisteredParameter(e,t=[],n="all",r={}){return N.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,r)}sendChannelAftertouch(e,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendProgramChange(e,t)}),this}sendModulationRange(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendModulationRange(e,t,n)}),this}setModulationRange(e=0,t=0,n="all",r={}){return N.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,r)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},n={}){return N.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,n)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",n={}){return N.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,n)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",n={}){return N.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,n)}sendChannelMode(e,t=0,n={},r={}){if(N.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendChannelMode(e,t,n)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(N.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const n=e;e=t,e.channels=n,e.channels==="all"&&(e.channels=E.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,n={}){return n.channels==null&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendNrpnValue(e,t,n)}),this}setNonRegisteredParameter(e,t=[],n="all",r={}){return N.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=n,r.channels==="all"&&(r.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,r)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",n={}){return N.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,n)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",n={}){return N.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),n.channels=t,n.channels==="all"&&(n.channels=E.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,n)}sendNoteOff(e,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},n={}){if(N.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].playNote(e,t)}),this}sendNoteOn(e,t={},n={}){if(N.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=E.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class In{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(E.SYSTEM_MESSAGES),...Object.keys(E.CHANNEL_MESSAGES)],this.channels=E.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),N.validation&&(e.forEach(n=>{if(!(n instanceof kt))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(n=>{if(!E.SYSTEM_MESSAGES.hasOwnProperty(n)&&!E.CHANNEL_MESSAGES.hasOwnProperty(n))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(n=>{if(!E.MIDI_CHANNEL_NUMBERS.includes(n))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{N.validation&&!(t instanceof kt)||t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class $a extends Se{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const n=e.message.dataBytes[0],r=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&r===0)this.notesState[n]=!1,t.type="noteoff",t.note=new He(y.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+N.octaveOffset),{rawAttack:0,rawRelease:r}),t.value=y.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[n]=!0,t.note=new He(y.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+N.octaveOffset),{rawAttack:r}),t.value=y.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new He(y.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+N.octaveOffset)),t.value=y.from7bitToFloat(r),t.rawValue=r,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=n;else if(t.type==="controlchange"){t.controller={number:n,name:E.CONTROL_CHANGE_MESSAGES[n].name,description:E.CONTROL_CHANGE_MESSAGES[n].description,position:E.CONTROL_CHANGE_MESSAGES[n].position},t.subtype=t.controller.name||"controller"+n,t.value=y.from7bitToFloat(r),t.rawValue=r;const s=Object.assign({},t);s.type=`${t.type}-controller${n}`,delete s.subtype,this.emit(s.type,s);const a=Object.assign({},t);a.type=`${t.type}-`+E.CONTROL_CHANGE_MESSAGES[n].name,delete a.subtype,a.type.indexOf("controller")!==0&&this.emit(a.type,a),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=n,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=y.from7bitToFloat(n),t.rawValue=n):t.type==="pitchbend"?(t.value=((r<<7)+n-8192)/8192,t.rawValue=(r<<7)+n):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],n=e.message.dataBytes[1];t===99||t===101?(this._nrpnBuffer=[],this._rpnBuffer=[],t===99?this._nrpnBuffer=[e.message]:n!==127&&(this._rpnBuffer=[e.message])):t===98||t===100?t===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&n!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(t===6||t===38||t===96||t===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,t,n,r){e=e==="nrpn"?"nrpn":"rpn";const s={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:t,parameterLsb:n,value:y.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};e==="rpn"?s.parameter=Object.keys(E.REGISTERED_PARAMETERS).find(o=>E.REGISTERED_PARAMETERS[o][0]===t&&E.REGISTERED_PARAMETERS[o][1]===n):s.parameter=(t<<7)+n;const a=E.CONTROL_CHANGE_MESSAGES[r.message.dataBytes[0]].name;s.type=`${e}-${a}`,this.emit(s.type,s);const l=Object.assign({},s);l.type==="nrpn-dataincrement"?l.type="nrpn-databuttonincrement":l.type==="nrpn-datadecrement"?l.type="nrpn-databuttondecrement":l.type==="rpn-dataincrement"?l.type="rpn-databuttonincrement":l.type==="rpn-datadecrement"&&(l.type="rpn-databuttondecrement"),this.emit(l.type,l),s.type=e,s.subtype=a,this.emit(s.type,s)}getChannelModeByNumber(e){return N.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),y.getChannelModeByNumber(e)}getCcNameByNumber(e){if(N.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return y.getCcNameByNumber(e)}getNoteState(e){e instanceof He&&(e=e.identifier);const t=y.guessNoteNumber(e,N.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class or{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=y.getPropertyByValue(E.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=y.getPropertyByValue(E.SYSTEM_MESSAGES,this.command)),this.statusByte===E.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Na extends Se{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new $a(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:N.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new or(e.data),n={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",n),t.isSystemMessage?this._parseEvent(n):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(n),this._forwarders.forEach(r=>r.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){N.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,n={}){if(N.validation&&typeof n=="function"){let r=t!=null?[].concat(t):void 0;t=n,n={channels:r}}if(E.CHANNEL_EVENTS.includes(e)){n.channels===void 0&&(n.channels=E.MIDI_CHANNEL_NUMBERS);let r=[];return y.sanitizeChannels(n.channels).forEach(s=>{r.push(this.channels[s].addListener(e,t,n))}),r}else return super.addListener(e,t,n)}addOneTimeListener(e,t,n={}){return n.remaining=1,this.addListener(e,t,n)}on(e,t,n,r){return this.addListener(e,t,n,r)}hasListener(e,t,n={}){if(N.validation&&typeof n=="function"){let r=[].concat(t);t=n,n={channels:r}}return E.CHANNEL_EVENTS.includes(e)?(n.channels===void 0&&(n.channels=E.MIDI_CHANNEL_NUMBERS),y.sanitizeChannels(n.channels).every(r=>this.channels[r].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,n={}){if(N.validation&&typeof n=="function"){let r=[].concat(t);t=n,n={channels:r}}if(n.channels===void 0&&(n.channels=E.MIDI_CHANNEL_NUMBERS),e==null)return y.sanitizeChannels(n.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();E.CHANNEL_EVENTS.includes(e)?y.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].removeListener(e,t,n)}):super.removeListener(e,t,n)}addForwarder(e,t={}){let n;return e instanceof In?n=e:n=new In(e,t),this._forwarders.push(n),n}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return N.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ya extends Se{constructor(){super(),this.defaults={note:{attack:y.from7bitToFloat(64),release:y.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},t=!1){if(y.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:t}),t&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const n={timestamp:this.time,target:this,type:"error",error:void 0},r={timestamp:this.time,target:this,type:"midiaccessgranted"},s={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(a){return n.error=a,this.emit("error",n),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}this.emit("midiaccessgranted",r),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(a){return n.error=a,this.emit("error",n),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}return this.emit("enabled",s),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n].id===e.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n].id===e.toString())return this.inputs[n]}getInputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(e))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(e))return this.inputs[n]}getOutputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(e))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(e))return this.outputs[n]}getOutputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n].id===e.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n].id===e.toString())return this.outputs[n]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),y.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?y.getNoteDetails(y.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),y.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),y.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),y.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),y.buildNoteArray(e,t)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),y.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(t=>e.push(t.destroy())),this.outputs.forEach(t=>e.push(t.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let t={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?t.port=this.getOutputById(e.port.id):e.port.type==="input"&&(t.port=this.getInputById(e.port.id)),this.emit(e.port.state,t);const n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?t.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(t.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,t);const n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let t=this._inputs.length-1;t>=0;t--){const n=this._inputs[t];Array.from(this.interface.inputs.values()).find(s=>s===n._midiInput)||(this._disconnectedInputs.push(n),this._inputs.splice(t,1))}let e=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(n=>n._midiInput===t)){let n=this._disconnectedInputs.find(r=>r._midiInput===t);n||(n=new Na(t)),this._inputs.push(n),e.push(n.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let t=this._outputs.length-1;t>=0;t--){const n=this._outputs[t];Array.from(this.interface.outputs.values()).find(s=>s===n._midiOutput)||(this._disconnectedOutputs.push(n),this._outputs.splice(t,1))}let e=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(n=>n._midiOutput===t)){let n=this._disconnectedOutputs.find(r=>r._midiOutput===t);n||(n=new kt(t)),this._outputs.push(n),e.push(n.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),y.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),y.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.5"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),E.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),E.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),E.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),E.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),E.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const N=new ya;N.constructor=null;const Et=(...i)=>{},cr=(i,e)=>{let t=i.ledOn==e.ledOn&&i.ledFlash==e.ledFlash&&i.controllerFlip==e.controllerFlip&&i.midiThru==e.midiThru;("i2cLeader"in i||"i2cLeader"in e)&&(t=t&&i.i2cLeader==e.i2cLeader),("fadermax"in i||"fadermax"in e)&&(t=t&&i.faderMax==e.faderMax&&i.faderMin==e.faderMin);let n=!0,r=!0;return i.usbControls.forEach((s,a)=>{const l=e.usbControls[a];(s.channel!=l.channel||s.cc!=l.cc)&&(n=!1)}),i.trsControls.forEach((s,a)=>{const l=e.trsControls[a];(s.channel!=l.channel||s.cc!=l.cc)&&(r=!1)}),t&&n&&r},rt=i=>{const e=Array.from({length:84},()=>0),t=i.firmwareVersion.trim().split(".").map(f=>parseInt(f));e[0]=i.deviceId,e[1]=t[0],e[2]=t[1],e[3]=t[2],e[4]=i.ledOn?1:0,e[5]=i.ledFlash?1:0,e[6]=i.controllerFlip?1:0,e[7]=i.i2cLeader?1:0;const n=i.faderMin>>7,r=i.faderMin-(n<<7);e[8]=r,e[9]=n;const s=i.faderMax>>7,a=i.faderMax-(s<<7);e[10]=a,e[11]=s,e[12]=i.midiThru?1:0;const l=20,o=36,c=52,u=68;return i.usbControls.forEach((f,d)=>{e[d+l]=f.channel,e[d+c]=f.cc}),i.trsControls.forEach((f,d)=>{e[d+o]=f.channel,e[d+u]=f.cc}),e},Sa=i=>rt(i).slice(4,20),wa=i=>{const e=rt(i),t=e.slice(20,36),n=e.slice(52,68);return t.concat(n)},Ia=i=>{const e=rt(i),t=e.slice(36,52),n=e.slice(68,84);return t.concat(n)},Ra=i=>{const e={...i},t=Me(i.deviceId).controlCount;return e.usbControls=e.usbControls.splice(0,t),e.usbControls.forEach(n=>delete n.val),e.trsControls=e.trsControls.splice(0,t),JSON.stringify(e,null,2)},Aa=(i,e)=>e.deviceId!=i.deviceId?`Cannot update - this data file is for a ${Me(e.deviceId).name}, but you are trying to install it on a ${Me(i.deviceId).name} `:!1,Ca=(i,e)=>(Object.keys(e).forEach(t=>{i[t]=e[t]}),i),Ma=i=>{const t=i[5],n=i[6]+"."+i[7]+"."+i[8],r=i[1+8]==1,s=i[2+8]==1,a=i[3+8]==1,l=i[4+8]==1,o=i[5+8],u=(i[6+8]<<7)+o,f=i[7+8],h=(i[8+8]<<7)+f,R=i[9+8]==1,V=[],H=[];return i.slice(17+8,33+8).forEach((A,T)=>{A!=127&&(V[T]={channel:A})}),i.slice(33+8,49+8).forEach((A,T)=>{A!=127&&(H[T]={channel:A})}),i.slice(49+8,65+8).forEach((A,T)=>{A!=127&&(V[T].cc=A)}),i.slice(65+8,81+8).forEach((A,T)=>{A!=127&&(H[T].cc=A)}),V.forEach(A=>A.val=0),{ledOn:r,ledFlash:s,controllerFlip:a,midiThru:R,usbControls:V,trsControls:H,deviceId:t,firmwareVersion:n,i2cLeader:l,faderMin:u,faderMax:h}},Me=i=>Ta[i],ct=(i,e)=>!!Me(i.deviceId).capabilities[e],Ta=[{name:"unknown",controlCount:0,capabilities:{}},{name:"Oxion development board",controlCount:4,capabilities:{led:!0}},{name:"16n",controlCount:16,capabilities:{i2c:!0,led:!0}},{name:"16n (LC)",controlCount:16,capabilities:{i2c:!0,led:!0},sendShortMessages:!0}],be={sysexMfgId:[125,0,0],requestInfoMsg:31,updateConfigMsg:14,updateDeviceOptionsMsg:13,updateUSBOptionsMessage:12,updateTRSOptionsMessage:11,factoryResetMsg:26},Oa=i=>i[1]==be.sysexMfgId[0]&&i[2]==be.sysexMfgId[1]&&i[3]==be.sysexMfgId[2],La=(i,e)=>{Me(i.deviceId).sendShortMessages?ka(i,e):Da(i,e)},Da=(i,e)=>{e.sendSysex(be.sysexMfgId,[be.updateConfigMsg,...rt(i)])},ka=(i,e)=>{e.sendSysex(be.sysexMfgId,[be.updateDeviceOptionsMsg,...Sa(i)]),e.sendSysex(be.sysexMfgId,[be.updateUSBOptionsMessage,...wa(i)]),e.sendSysex(be.sysexMfgId,[be.updateTRSOptionsMessage,...Ia(i)])},fr=i=>{i.sendSysex(be.sysexMfgId,[be.requestInfoMsg])},ur=i=>{i.sendSysex(be.sysexMfgId,[be.factoryResetMsg])},ve=Ie(null),_t=Ie(!1),me=Ie(null),De=Ie(!1),je=Ie([]),et=Ie([]),tt=Ie(null),Be=Ie(null),qt=Ie(!1);let ut=-1;tt.subscribe(i=>{i&&(ye(je).forEach(e=>{e.removeListener()}),dr(i),mr(i),ve.set(null),Yt())});Be.subscribe(i=>{i&&(ve.set(null),Yt())});const Ot=()=>N.inputs.sort(hr),Lt=()=>N.outputs.sort(hr),hr=(i,e)=>{const t=`${i.manufacturer} ${i.name}`,n=`${e.manufacturer} ${e.name}`;return t<n?-1:t>n?1:0},Pa=()=>{qt.set(!0),Ba()},Ba=()=>{je.set(Ot()),et.set(Lt()),ft(),N.addListener("connected",()=>{je.set(Ot()),et.set(Lt()),ft()}),N.addListener("disconnected",()=>{je.set(Ot()),et.set(Lt()),tt.set(null),Be.set(null),ve.set(null),ft()}),setInterval(()=>{ft()},5e3)},ft=()=>{const i=ye(tt),e=ye(Be);if(!i&&ye(je).length>0){const t=ye(je).find(n=>n.name.match(/.*16n.*/));t&&tt.set(t)}if(!e&&ye(et).length>0){const t=ye(et).find(n=>n.name.match(/.*16n.*/));t&&Be.set(t)}!ye(ve)&&i&&e&&(dr(i),mr(i),Yt())},Ua=i=>{const e=ye(ve);e&&(e.usbControls.forEach(t=>{t.channel==i.message.channel&&t.cc==i.controller.number&&(t.val=i.rawValue)}),ve.set(e))},dr=i=>{i.addListener("controlchange",Ua)},mr=i=>{i.addListener("sysex",e=>{const t=e.message.data;Oa(t)&&t[4]==15&&(ve.set(Ma(t)),Et("Received config",ye(ve)),ut=-1,_t.set(!1))}),Et("Attached sysex listener to ",i.name)},Yt=()=>{ut<0&&(ut=Date.now()),Date.now()-ut>8e3&&(ye(_t)||_t.set(!0));const i=ye(tt),e=ye(Be);i&&e&&(Et("Requesting config over "+e.name),Et("Hoping to receive on "+i.name),fr(e))};function Ga(i){let e,t;return{c(){e=S("span"),this.h()},l(n){e=w(n,"SPAN",{class:!0}),L(e).forEach(m),this.h()},h(){O(e,"class",t="fas fa-"+i[0]+" "+i[1]+" svelte-pvbvkq")},m(n,r){v(n,e,r)},p(n,[r]){r&3&&t!==(t="fas fa-"+n[0]+" "+n[1]+" svelte-pvbvkq")&&O(e,"class",t)},i:ue,o:ue,d(n){n&&m(e)}}}function Fa(i,e,t){let{i:n}=e,{classList:r=""}=e;return i.$$set=s=>{"i"in s&&t(0,n=s.i),"classList"in s&&t(1,r=s.classList)},[n,r]}class Va extends Ee{constructor(e){super(),_e(this,e,Fa,Ga,ge,{i:0,classList:1})}}function Rn(i){let e,t;return e=new Va({props:{i:i[1]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.i=n[1]),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Ha(i){let e,t,n=i[1]&&i[1].trim()!=="",r,s,a,l,o,c=n&&Rn(i);return{c(){e=S("div"),t=S("button"),c&&c.c(),r=Y(),s=G(i[0]),this.h()},l(u){e=w(u,"DIV",{class:!0});var f=L(e);t=w(f,"BUTTON",{class:!0});var d=L(t);c&&c.l(d),r=z(d),s=F(d,i[0]),d.forEach(m),f.forEach(m),this.h()},h(){t.disabled=i[2],O(t,"class","svelte-1qu28ag"),O(e,"class","button-wrapper svelte-1qu28ag")},m(u,f){v(u,e,f),b(e,t),c&&c.m(t,null),b(t,r),b(t,s),a=!0,l||(o=Ne(t,"click",function(){vr(i[3])&&i[3].apply(this,arguments)}),l=!0)},p(u,[f]){i=u,f&2&&(n=i[1]&&i[1].trim()!==""),n?c?(c.p(i,f),f&2&&$(c,1)):(c=Rn(i),c.c(),$(c,1),c.m(t,r)):c&&(he(),I(c,1,1,()=>{c=null}),de()),(!a||f&1)&&we(s,i[0]),(!a||f&4)&&(t.disabled=i[2])},i(u){a||($(c),a=!0)},o(u){I(c),a=!1},d(u){u&&m(e),c&&c.d(),l=!1,o()}}}function xa(i,e,t){let{label:n}=e,{icon:r=""}=e,{disabled:s=!1}=e,{click:a}=e;return i.$$set=l=>{"label"in l&&t(0,n=l.label),"icon"in l&&t(1,r=l.icon),"disabled"in l&&t(2,s=l.disabled),"click"in l&&t(3,a=l.click)},[n,r,s,a]}class Ge extends Ee{constructor(e){super(),_e(this,e,xa,Ha,ge,{label:0,icon:1,disabled:2,click:3})}}function An(i){let e;function t(s,a){return s[2]?qa:ja}let n=t(i),r=n(i);return{c(){e=S("div"),r.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var a=L(e);r.l(a),a.forEach(m),this.h()},h(){O(e,"class","details svelte-ykry5x")},m(s,a){v(s,e,a),r.m(e,null)},p(s,a){n===(n=t(s))&&r?r.p(s,a):(r.d(1),r=n(s),r&&(r.c(),r.m(e,null)))},d(s){s&&m(e),r.d()}}}function ja(i){let e,t;return{c(){e=S("p"),t=G("No device connected."),this.h()},l(n){e=w(n,"P",{class:!0});var r=L(e);t=F(r,"No device connected."),r.forEach(m),this.h()},h(){O(e,"class","device svelte-ykry5x")},m(n,r){v(n,e,r),b(e,t)},p:ue,d(n){n&&m(e)}}}function qa(i){let e,t,n,r=Me(i[2].deviceId).name+"",s,a,l,o=i[2].firmwareVersion+"",c,u,f=i[0].trim()!="",d=f&&Cn(i);return{c(){e=S("p"),t=G("Connected: "),n=S("strong"),s=G(r),a=G(`
        running firmware
        `),l=S("strong"),c=G(o),u=Y(),d&&d.c(),this.h()},l(h){e=w(h,"P",{class:!0});var R=L(e);t=F(R,"Connected: "),n=w(R,"STRONG",{});var V=L(n);s=F(V,r),V.forEach(m),a=F(R,`
        running firmware
        `),l=w(R,"STRONG",{});var H=L(l);c=F(H,o),H.forEach(m),u=z(R),d&&d.l(R),R.forEach(m),this.h()},h(){O(e,"class","device svelte-ykry5x")},m(h,R){v(h,e,R),b(e,t),b(e,n),b(n,s),b(e,a),b(e,l),b(l,c),b(e,u),d&&d.m(e,null)},p(h,R){R&4&&r!==(r=Me(h[2].deviceId).name+"")&&we(s,r),R&4&&o!==(o=h[2].firmwareVersion+"")&&we(c,o),R&1&&(f=h[0].trim()!=""),f?d?d.p(h,R):(d=Cn(h),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(h){h&&m(e),d&&d.d()}}}function Cn(i){let e,t,n,r,s;return{c(){e=S("span"),t=G(i[0]),n=Y(),r=S("a"),s=G("Download"),this.h()},l(a){e=w(a,"SPAN",{class:!0});var l=L(e);t=F(l,i[0]),n=z(l),r=w(l,"A",{href:!0});var o=L(r);s=F(o,"Download"),o.forEach(m),l.forEach(m),this.h()},h(){O(r,"href","https://github.com/16n-faderbank/16n/releases/latest"),O(e,"class","upgrade svelte-ykry5x")},m(a,l){v(a,e,l),b(e,t),b(e,n),b(e,r),b(r,s)},p(a,l){l&1&&we(t,a[0])},d(a){a&&m(e)}}}function Ya(i){let e,t=i[1]&&An(i);return{c(){t&&t.c(),e=ae()},l(n){t&&t.l(n),e=ae()},m(n,r){t&&t.m(n,r),v(n,e,r)},p(n,[r]){n[1]?t?t.p(n,r):(t=An(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ue,o:ue,d(n){t&&t.d(n),n&&m(e)}}}function za(i,e,t){let n,r;oe(i,qt,c=>t(1,n=c)),oe(i,ve,c=>t(2,r=c));let s="",a="2.1.1",l=!1;const o=ve.subscribe(c=>{c&&c.firmwareVersion&&a.trim()!==""&&!l&&(l=!0,Pe.gt(a,c.firmwareVersion)?t(0,s=`A new version of the 16n firmware (${a}) is available.`):t(0,s=""))});return Dt(()=>{o()}),[s,n,r]}class Xa extends Ee{constructor(e){super(),_e(this,e,za,Ya,ge,{})}}function Wa(i){let e,t,n,r,s,a,l;const o=i[2].default,c=Xe(o,i,i[1],null);return{c(){e=S("p"),t=S("label"),n=S("input"),r=Y(),c&&c.c(),this.h()},l(u){e=w(u,"P",{});var f=L(e);t=w(f,"LABEL",{});var d=L(t);n=w(d,"INPUT",{type:!0}),r=z(d),c&&c.l(d),d.forEach(m),f.forEach(m),this.h()},h(){O(n,"type","checkbox")},m(u,f){v(u,e,f),b(e,t),b(t,n),n.checked=i[0],b(t,r),c&&c.m(t,null),s=!0,a||(l=Ne(n,"change",i[3]),a=!0)},p(u,[f]){f&1&&(n.checked=u[0]),c&&c.p&&(!s||f&2)&&We(c,o,u,u[1],s?Ke(o,u[1],f,null):Je(u[1]),null)},i(u){s||($(c,u),s=!0)},o(u){I(c,u),s=!1},d(u){u&&m(e),c&&c.d(u),a=!1,l()}}}function Ja(i,e,t){let{$$slots:n={},$$scope:r}=e,{checked:s}=e;function a(){s=this.checked,t(0,s)}return i.$$set=l=>{"checked"in l&&t(0,s=l.checked),"$$scope"in l&&t(1,r=l.$$scope)},[s,r,n,a]}class gt extends Ee{constructor(e){super(),_e(this,e,Ja,Wa,ge,{checked:0})}}function Mn(i){let e,t,n,r,s,a;function l(f){i[3](f)}let o={$$slots:{default:[Ka]},$$scope:{ctx:i}};i[0].ledOn!==void 0&&(o.checked=i[0].ledOn),e=new gt({props:o}),ht.push(()=>dt(e,"checked",l));function c(f){i[4](f)}let u={$$slots:{default:[Za]},$$scope:{ctx:i}};return i[0].ledFlash!==void 0&&(u.checked=i[0].ledFlash),r=new gt({props:u}),ht.push(()=>dt(r,"checked",c)),{c(){W(e.$$.fragment),n=Y(),W(r.$$.fragment)},l(f){J(e.$$.fragment,f),n=z(f),J(r.$$.fragment,f)},m(f,d){K(e,f,d),v(f,n,d),K(r,f,d),a=!0},p(f,d){const h={};d&1024&&(h.$$scope={dirty:d,ctx:f}),!t&&d&1&&(t=!0,h.checked=f[0].ledOn,mt(()=>t=!1)),e.$set(h);const R={};d&1024&&(R.$$scope={dirty:d,ctx:f}),!s&&d&1&&(s=!0,R.checked=f[0].ledFlash,mt(()=>s=!1)),r.$set(R)},i(f){a||($(e.$$.fragment,f),$(r.$$.fragment,f),a=!0)},o(f){I(e.$$.fragment,f),I(r.$$.fragment,f),a=!1},d(f){Z(e,f),f&&m(n),Z(r,f)}}}function Ka(i){let e;return{c(){e=G("LED permanently on when powered")},l(t){e=F(t,"LED permanently on when powered")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Za(i){let e;return{c(){e=G("LED flash on MIDI activity")},l(t){e=F(t,"LED flash on MIDI activity")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Qa(i){let e;return{c(){e=G("Rotate controller 180")},l(t){e=F(t,"Rotate controller 180")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Tn(i){let e,t,n;function r(a){i[6](a)}let s={$$slots:{default:[el]},$$scope:{ctx:i}};return i[0].midiThru!==void 0&&(s.checked=i[0].midiThru),e=new gt({props:s}),ht.push(()=>dt(e,"checked",r)),{c(){W(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,l){K(e,a,l),n=!0},p(a,l){const o={};l&1024&&(o.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,o.checked=a[0].midiThru,mt(()=>t=!1)),e.$set(o)},i(a){n||($(e.$$.fragment,a),n=!0)},o(a){I(e.$$.fragment,a),n=!1},d(a){Z(e,a)}}}function el(i){let e;return{c(){e=G("Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)")},l(t){e=F(t,"Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function On(i){let e,t,n,r,s,a,l,o,c,u,f,d,h,R,V,H,A,T,D,p,M,k,q,se,te,ce,fe,Te;return{c(){e=S("hr"),t=Y(),n=S("h3"),r=G("I2C Leader/Follower"),s=Y(),a=S("select"),l=S("option"),o=G("Follower"),c=S("option"),u=G("Leader"),f=Y(),d=S("p"),h=S("strong"),R=G("Follower"),V=G(" mode is for use with Teletype."),H=Y(),A=S("p"),T=S("strong"),D=G("Leader"),p=G(` mode is for use with Ansible, TXo, ER-301. 16n will not
    respond to Teletype when in leader mode.`),M=Y(),k=S("p"),q=G("This will not take effect until you restart (disconnect/reconnect) your 16n."),se=Y(),te=S("p"),ce=G(`("Leader" is sometimes also referred to as 'master' mode)`),this.h()},l(_){e=w(_,"HR",{}),t=z(_),n=w(_,"H3",{});var g=L(n);r=F(g,"I2C Leader/Follower"),g.forEach(m),s=z(_),a=w(_,"SELECT",{});var x=L(a);l=w(x,"OPTION",{});var B=L(l);o=F(B,"Follower"),B.forEach(m),c=w(x,"OPTION",{});var U=L(c);u=F(U,"Leader"),U.forEach(m),x.forEach(m),f=z(_),d=w(_,"P",{class:!0});var P=L(d);h=w(P,"STRONG",{});var j=L(h);R=F(j,"Follower"),j.forEach(m),V=F(P," mode is for use with Teletype."),P.forEach(m),H=z(_),A=w(_,"P",{class:!0});var Q=L(A);T=w(Q,"STRONG",{});var X=L(T);D=F(X,"Leader"),X.forEach(m),p=F(Q,` mode is for use with Ansible, TXo, ER-301. 16n will not
    respond to Teletype when in leader mode.`),Q.forEach(m),M=z(_),k=w(_,"P",{class:!0});var re=L(k);q=F(re,"This will not take effect until you restart (disconnect/reconnect) your 16n."),re.forEach(m),se=z(_),te=w(_,"P",{class:!0});var ee=L(te);ce=F(ee,`("Leader" is sometimes also referred to as 'master' mode)`),ee.forEach(m),this.h()},h(){l.__value=!1,l.value=l.__value,c.__value=!0,c.value=c.__value,i[0].i2cLeader===void 0&&Zn(()=>i[9].call(a)),O(d,"class","note svelte-idpdcv"),O(A,"class","note svelte-idpdcv"),O(k,"class","note svelte-idpdcv"),O(te,"class","note small svelte-idpdcv")},m(_,g){v(_,e,g),v(_,t,g),v(_,n,g),b(n,r),v(_,s,g),v(_,a,g),b(a,l),b(l,o),b(a,c),b(c,u),pt(a,i[0].i2cLeader,!0),v(_,f,g),v(_,d,g),b(d,h),b(h,R),b(d,V),v(_,H,g),v(_,A,g),b(A,T),b(T,D),b(A,p),v(_,M,g),v(_,k,g),b(k,q),v(_,se,g),v(_,te,g),b(te,ce),fe||(Te=[Ne(a,"change",i[9]),Ne(a,"change",i[2])],fe=!0)},p(_,g){g&1&&pt(a,_[0].i2cLeader)},d(_){_&&m(e),_&&m(t),_&&m(n),_&&m(s),_&&m(a),_&&m(f),_&&m(d),_&&m(H),_&&m(A),_&&m(M),_&&m(k),_&&m(se),_&&m(te),fe=!1,Pt(Te)}}}function tl(i){let e=ct(i[1],"led"),t,n,r,s,a=Pe.gte(i[1].firmwareVersion,"2.1.0"),l,o,c,u,f,d,h,R,V,H,A,T,D,p,M,k,q,se,te,ce,fe,Te,_,g,x,B,U,P=ct(i[1],"i2c"),j,Q,X,re,ee=e&&Mn(i);function ie(C){i[5](C)}let Oe={$$slots:{default:[Qa]},$$scope:{ctx:i}};i[0].controllerFlip!==void 0&&(Oe.checked=i[0].controllerFlip),n=new gt({props:Oe}),ht.push(()=>dt(n,"checked",ie));let le=a&&Tn(i),pe=P&&On(i);return{c(){ee&&ee.c(),t=Y(),W(n.$$.fragment),s=Y(),le&&le.c(),l=Y(),o=S("hr"),c=Y(),u=S("h3"),f=G("Fader Minimum/Maximum calibration"),d=Y(),h=S("div"),R=S("label"),V=G("Fader Minimum raw value"),H=Y(),A=S("input"),T=Y(),D=S("div"),p=S("label"),M=G("Fader Maximum raw value"),k=Y(),q=S("input"),se=Y(),te=S("p"),ce=G(`You shouldn't touch this unless you are having issues with your faders either
  reaching `),fe=S("code"),Te=G("127"),_=G(`
  before the end of their travel, or not at all.`),g=S("br"),x=S("br"),B=G(`
  "Raw" analog values are read from the faders between 0 and 8192. Bring the fader
  maximum down until all faders smoothly travel from 0 to 127 on the debug view (bearing
  in mind there is a small dead zone at either end of a fader).`),U=Y(),pe&&pe.c(),j=ae(),this.h()},l(C){ee&&ee.l(C),t=z(C),J(n.$$.fragment,C),s=z(C),le&&le.l(C),l=z(C),o=w(C,"HR",{}),c=z(C),u=w(C,"H3",{});var ne=L(u);f=F(ne,"Fader Minimum/Maximum calibration"),ne.forEach(m),d=z(C),h=w(C,"DIV",{});var Le=L(h);R=w(Le,"LABEL",{for:!0,class:!0});var Xt=L(R);V=F(Xt,"Fader Minimum raw value"),Xt.forEach(m),H=z(Le),A=w(Le,"INPUT",{name:!0,type:!0,min:!0,max:!0}),Le.forEach(m),T=z(C),D=w(C,"DIV",{});var st=L(D);p=w(st,"LABEL",{for:!0,class:!0});var Wt=L(p);M=F(Wt,"Fader Maximum raw value"),Wt.forEach(m),k=z(st),q=w(st,"INPUT",{name:!0,type:!0,min:!0,max:!0}),st.forEach(m),se=z(C),te=w(C,"P",{class:!0});var Ue=L(te);ce=F(Ue,`You shouldn't touch this unless you are having issues with your faders either
  reaching `),fe=w(Ue,"CODE",{});var Jt=L(fe);Te=F(Jt,"127"),Jt.forEach(m),_=F(Ue,`
  before the end of their travel, or not at all.`),g=w(Ue,"BR",{}),x=w(Ue,"BR",{}),B=F(Ue,`
  "Raw" analog values are read from the faders between 0 and 8192. Bring the fader
  maximum down until all faders smoothly travel from 0 to 127 on the debug view (bearing
  in mind there is a small dead zone at either end of a fader).`),Ue.forEach(m),U=z(C),pe&&pe.l(C),j=ae(),this.h()},h(){O(R,"for","faderMin"),O(R,"class","svelte-idpdcv"),O(A,"name","faderMin"),O(A,"type","number"),O(A,"min","0"),O(A,"max",(1<<13)-1),O(p,"for","faderMax"),O(p,"class","svelte-idpdcv"),O(q,"name","faderMax"),O(q,"type","number"),O(q,"min","0"),O(q,"max",(1<<13)-1),O(te,"class","note svelte-idpdcv")},m(C,ne){ee&&ee.m(C,ne),v(C,t,ne),K(n,C,ne),v(C,s,ne),le&&le.m(C,ne),v(C,l,ne),v(C,o,ne),v(C,c,ne),v(C,u,ne),b(u,f),v(C,d,ne),v(C,h,ne),b(h,R),b(R,V),b(h,H),b(h,A),Ve(A,i[0].faderMin),v(C,T,ne),v(C,D,ne),b(D,p),b(p,M),b(D,k),b(D,q),Ve(q,i[0].faderMax),v(C,se,ne),v(C,te,ne),b(te,ce),b(te,fe),b(fe,Te),b(te,_),b(te,g),b(te,x),b(te,B),v(C,U,ne),pe&&pe.m(C,ne),v(C,j,ne),Q=!0,X||(re=[Ne(A,"input",i[7]),Ne(A,"blur",i[2]),Ne(q,"input",i[8]),Ne(q,"blur",i[2])],X=!0)},p(C,[ne]){ne&2&&(e=ct(C[1],"led")),e?ee?(ee.p(C,ne),ne&2&&$(ee,1)):(ee=Mn(C),ee.c(),$(ee,1),ee.m(t.parentNode,t)):ee&&(he(),I(ee,1,1,()=>{ee=null}),de());const Le={};ne&1024&&(Le.$$scope={dirty:ne,ctx:C}),!r&&ne&1&&(r=!0,Le.checked=C[0].controllerFlip,mt(()=>r=!1)),n.$set(Le),ne&2&&(a=Pe.gte(C[1].firmwareVersion,"2.1.0")),a?le?(le.p(C,ne),ne&2&&$(le,1)):(le=Tn(C),le.c(),$(le,1),le.m(l.parentNode,l)):le&&(he(),I(le,1,1,()=>{le=null}),de()),ne&1&&ze(A.value)!==C[0].faderMin&&Ve(A,C[0].faderMin),ne&1&&ze(q.value)!==C[0].faderMax&&Ve(q,C[0].faderMax),ne&2&&(P=ct(C[1],"i2c")),P?pe?pe.p(C,ne):(pe=On(C),pe.c(),pe.m(j.parentNode,j)):pe&&(pe.d(1),pe=null)},i(C){Q||($(ee),$(n.$$.fragment,C),$(le),Q=!0)},o(C){I(ee),I(n.$$.fragment,C),I(le),Q=!1},d(C){ee&&ee.d(C),C&&m(t),Z(n,C),C&&m(s),le&&le.d(C),C&&m(l),C&&m(o),C&&m(c),C&&m(u),C&&m(d),C&&m(h),C&&m(T),C&&m(D),C&&m(se),C&&m(te),C&&m(U),pe&&pe.d(C),C&&m(j),X=!1,Pt(re)}}}function nl(i,e,t){let n,r;oe(i,me,h=>t(0,n=h)),oe(i,ve,h=>t(1,r=h));const s=()=>{me.set(n)};function a(h){i.$$.not_equal(n.ledOn,h)&&(n.ledOn=h,me.set(n))}function l(h){i.$$.not_equal(n.ledFlash,h)&&(n.ledFlash=h,me.set(n))}function o(h){i.$$.not_equal(n.controllerFlip,h)&&(n.controllerFlip=h,me.set(n))}function c(h){i.$$.not_equal(n.midiThru,h)&&(n.midiThru=h,me.set(n))}function u(){n.faderMin=ze(this.value),me.set(n)}function f(){n.faderMax=ze(this.value),me.set(n)}function d(){n.i2cLeader=Qn(this),me.set(n)}return[n,r,s,a,l,o,c,u,f,d]}class rl extends Ee{constructor(e){super(),_e(this,e,nl,tl,ge,{})}}function Ln(i,e,t){const n=i.slice();return n[8]=e[t],n}function Dn(i){let e,t=i[8]+"",n,r;return{c(){e=S("option"),n=G(t),this.h()},l(s){e=w(s,"OPTION",{});var a=L(e);n=F(a,t),a.forEach(m),this.h()},h(){e.__value=r=i[8],e.value=e.__value},m(s,a){v(s,e,a),b(e,n)},p(s,a){a&4&&t!==(t=s[8]+"")&&we(n,t),a&4&&r!==(r=s[8])&&(e.__value=r,e.value=e.__value)},d(s){s&&m(e)}}}function sl(i){let e,t,n=i[1]+1+"",r,s,a,l,o,c,u,f,d,h,R,V,H=i[2],A=[];for(let T=0;T<H.length;T+=1)A[T]=Dn(Ln(i,H,T));return{c(){e=S("dl"),t=S("dt"),r=G(n),s=S("dt"),a=G("Channel"),l=S("dd"),o=S("select");for(let T=0;T<A.length;T+=1)A[T].c();c=Y(),u=S("dt"),f=G("CC"),d=S("dd"),h=S("input"),this.h()},l(T){e=w(T,"DL",{class:!0});var D=L(e);t=w(D,"DT",{class:!0});var p=L(t);r=F(p,n),p.forEach(m),s=w(D,"DT",{class:!0});var M=L(s);a=F(M,"Channel"),M.forEach(m),l=w(D,"DD",{class:!0});var k=L(l);o=w(k,"SELECT",{});var q=L(o);for(let ce=0;ce<A.length;ce+=1)A[ce].l(q);q.forEach(m),c=z(k),k.forEach(m),u=w(D,"DT",{class:!0});var se=L(u);f=F(se,"CC"),se.forEach(m),d=w(D,"DD",{class:!0});var te=L(d);h=w(te,"INPUT",{type:!0,min:!0,max:!0,class:!0}),te.forEach(m),D.forEach(m),this.h()},h(){O(t,"class","index svelte-gqdu21"),O(s,"class","svelte-gqdu21"),i[0].channel===void 0&&Zn(()=>i[5].call(o)),O(l,"class","svelte-gqdu21"),O(u,"class","svelte-gqdu21"),O(h,"type","number"),O(h,"min","0"),O(h,"max","127"),O(h,"class","svelte-gqdu21"),O(d,"class","svelte-gqdu21"),O(e,"class","config-column svelte-gqdu21")},m(T,D){v(T,e,D),b(e,t),b(t,r),b(e,s),b(s,a),b(e,l),b(l,o);for(let p=0;p<A.length;p+=1)A[p]&&A[p].m(o,null);pt(o,i[0].channel,!0),b(l,c),b(e,u),b(u,f),b(e,d),b(d,h),Ve(h,i[0].cc),R||(V=[Ne(o,"change",i[5]),Ne(o,"change",i[3]),Ne(h,"input",i[6]),Ne(h,"change",i[4]),Ne(h,"blur",i[4])],R=!0)},p(T,[D]){if(D&2&&n!==(n=T[1]+1+"")&&we(r,n),D&4){H=T[2];let p;for(p=0;p<H.length;p+=1){const M=Ln(T,H,p);A[p]?A[p].p(M,D):(A[p]=Dn(M),A[p].c(),A[p].m(o,null))}for(;p<A.length;p+=1)A[p].d(1);A.length=H.length}D&5&&pt(o,T[0].channel),D&5&&ze(h.value)!==T[0].cc&&Ve(h,T[0].cc)},i:ue,o:ue,d(T){T&&m(e),nt(A,T),R=!1,Pt(V)}}}function il(i,e,t){let n;oe(i,me,f=>t(7,n=f));let{index:r}=e,{editControl:s}=e;const a=Array.from(Array(16).keys());a.forEach((f,d)=>t(2,a[d]=f+1,a));const l=()=>{me.set(n)},o=f=>{const d=f.target;parseInt(d.value)<0&&t(0,s.cc=0,s),parseInt(d.value)>127&&t(0,s.cc=127,s),me.set(n)};function c(){s.channel=Qn(this),t(0,s),t(2,a)}function u(){s.cc=ze(this.value),t(0,s),t(2,a)}return i.$$set=f=>{"index"in f&&t(1,r=f.index),"editControl"in f&&t(0,s=f.editControl)},[s,r,a,l,o,c,u]}class pr extends Ee{constructor(e){super(),_e(this,e,il,sl,ge,{index:1,editControl:0})}}function al(i){let e,t,n,r,s,a,l,o;return l=new Ge({props:{label:"Reset controller configuration to defaults",icon:"history",click:i[0]}}),l.$on("message",i[1]),{c(){e=S("p"),t=G(`"Factory Reset" will reset the configuration of your 16n back to 'default'
  values; primarily, MIDI CCs 32-48, Channel 1, for both TRS and USB MIDI.`),n=Y(),r=S("p"),s=G(`Note that this will also reset any calibration data or other options you may
  have adjusted on the "Device Options" tab. You will need to repeat this
  configuration after performing a reset.`),a=Y(),W(l.$$.fragment)},l(c){e=w(c,"P",{});var u=L(e);t=F(u,`"Factory Reset" will reset the configuration of your 16n back to 'default'
  values; primarily, MIDI CCs 32-48, Channel 1, for both TRS and USB MIDI.`),u.forEach(m),n=z(c),r=w(c,"P",{});var f=L(r);s=F(f,`Note that this will also reset any calibration data or other options you may
  have adjusted on the "Device Options" tab. You will need to repeat this
  configuration after performing a reset.`),f.forEach(m),a=z(c),J(l.$$.fragment,c)},m(c,u){v(c,e,u),b(e,t),v(c,n,u),v(c,r,u),b(r,s),v(c,a,u),K(l,c,u),o=!0},p:ue,i(c){o||($(l.$$.fragment,c),o=!0)},o(c){I(l.$$.fragment,c),o=!1},d(c){c&&m(e),c&&m(n),c&&m(r),c&&m(a),Z(l,c)}}}const ll="Confirm that you wish to reset your controller configuration to the default values. You will lose any configuration stored on the controller.";function ol(i,e,t){let n,r;oe(i,Be,l=>t(2,n=l)),oe(i,De,l=>t(3,r=l));const s=()=>{confirm(ll)&&(xe(De,r=!1,r),ur(n),setTimeout(()=>{fr(n)},50))};function a(l){er.call(this,i,l)}return[s,a]}class cl extends Ee{constructor(e){super(),_e(this,e,ol,al,ge,{})}}function fl(i){let e,t,n,r,s,a;const l=i[2].default,o=Xe(l,i,i[1],null);return{c(){e=S("div"),t=S("h2"),n=G(i[0]),r=Y(),s=S("div"),o&&o.c(),this.h()},l(c){e=w(c,"DIV",{class:!0});var u=L(e);t=w(u,"H2",{class:!0});var f=L(t);n=F(f,i[0]),f.forEach(m),r=z(u),s=w(u,"DIV",{class:!0});var d=L(s);o&&o.l(d),d.forEach(m),u.forEach(m),this.h()},h(){O(t,"class","svelte-1o2kpty"),O(s,"class","details svelte-1o2kpty"),O(e,"class","subhead svelte-1o2kpty")},m(c,u){v(c,e,u),b(e,t),b(t,n),b(e,r),b(e,s),o&&o.m(s,null),a=!0},p(c,[u]){(!a||u&1)&&we(n,c[0]),o&&o.p&&(!a||u&2)&&We(o,l,c,c[1],a?Ke(l,c[1],u,null):Je(c[1]),null)},i(c){a||($(o,c),a=!0)},o(c){I(o,c),a=!1},d(c){c&&m(e),o&&o.d(c)}}}function ul(i,e,t){let{$$slots:n={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&t(0,s=a.title),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class Er extends Ee{constructor(e){super(),_e(this,e,ul,fl,ge,{title:0})}}function hl(i){let e,t;const n=i[1].default,r=Xe(n,i,i[0],null);return{c(){e=S("div"),r&&r.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var a=L(e);r&&r.l(a),a.forEach(m),this.h()},h(){O(e,"class","tabs")},m(s,a){v(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&We(r,n,s,s[0],t?Ke(n,s[0],a,null):Je(s[0]),null)},i(s){t||($(r,s),t=!0)},o(s){I(r,s),t=!1},d(s){s&&m(e),r&&r.d(s)}}}const zt={};function dl(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[],a=[],l=Ie(null),o=Ie(null);return $r(zt,{registerTab:c=>{s.push(c),l.update(u=>u||c),Dt(()=>{const u=s.indexOf(c);s.splice(u,1),l.update(f=>f===c?s[u]||s[s.length-1]:f)})},registerPanel:c=>{a.push(c),o.update(u=>u||c),Dt(()=>{const u=a.indexOf(c);a.splice(u,1),o.update(f=>f===c?a[u]||a[a.length-1]:f)})},selectTab:c=>{const u=s.indexOf(c);l.set(c),o.set(a[u])},selectedTab:l,selectedPanel:o}),i.$$set=c=>{"$$scope"in c&&t(0,r=c.$$scope)},[r,n]}class _r extends Ee{constructor(e){super(),_e(this,e,dl,hl,ge,{})}}function ml(i){let e,t;const n=i[1].default,r=Xe(n,i,i[0],null);return{c(){e=S("div"),r&&r.c(),this.h()},l(s){e=w(s,"DIV",{class:!0});var a=L(e);r&&r.l(a),a.forEach(m),this.h()},h(){O(e,"class","tab-list svelte-1c799zm")},m(s,a){v(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&We(r,n,s,s[0],t?Ke(n,s[0],a,null):Je(s[0]),null)},i(s){t||($(r,s),t=!0)},o(s){I(r,s),t=!1},d(s){s&&m(e),r&&r.d(s)}}}function pl(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class gr extends Ee{constructor(e){super(),_e(this,e,pl,ml,ge,{})}}function kn(i){let e;const t=i[4].default,n=Xe(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&We(n,t,r,r[3],e?Ke(t,r[3],s,null):Je(r[3]),null)},i(r){e||($(n,r),e=!0)},o(r){I(n,r),e=!1},d(r){n&&n.d(r)}}}function El(i){let e,t,n=i[0]===i[1]&&kn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),v(r,e,s),t=!0},p(r,[s]){r[0]===r[1]?n?(n.p(r,s),s&1&&$(n,1)):(n=kn(r),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(he(),I(n,1,1,()=>{n=null}),de())},i(r){t||($(n),t=!0)},o(r){I(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function _l(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const a={},{registerPanel:l,selectedPanel:o}=tr(zt);return oe(i,o,c=>t(0,n=c)),l(a),i.$$set=c=>{"$$scope"in c&&t(3,s=c.$$scope)},[n,a,o,s,r]}class qe extends Ee{constructor(e){super(),_e(this,e,_l,El,ge,{})}}function gl(i){let e,t,n,r;const s=i[5].default,a=Xe(s,i,i[4],null);return{c(){e=S("button"),a&&a.c(),this.h()},l(l){e=w(l,"BUTTON",{class:!0});var o=L(e);a&&a.l(o),o.forEach(m),this.h()},h(){O(e,"class","svelte-1rryekj"),Kt(e,"selected",i[0]===i[1])},m(l,o){v(l,e,o),a&&a.m(e,null),t=!0,n||(r=Ne(e,"click",i[6]),n=!0)},p(l,[o]){a&&a.p&&(!t||o&16)&&We(a,s,l,l[4],t?Ke(s,l[4],o,null):Je(l[4]),null),(!t||o&3)&&Kt(e,"selected",l[0]===l[1])},i(l){t||($(a,l),t=!0)},o(l){I(a,l),t=!1},d(l){l&&m(e),a&&a.d(l),n=!1,r()}}}function bl(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const a={},{registerTab:l,selectTab:o,selectedTab:c}=tr(zt);oe(i,c,f=>t(0,n=f)),l(a);const u=()=>o(a);return i.$$set=f=>{"$$scope"in f&&t(4,s=f.$$scope)},[n,a,o,c,s,r,u]}class Ye extends Ee{constructor(e){super(),_e(this,e,bl,gl,ge,{})}}const vl=(i,e)=>{const t=document.createElement("input");t.type="file",t.id="uploadedConfig",t.addEventListener("change",n=>{const r=n.target.files;if(r&&r.length>0){const s=r[0],a=new FileReader;a.addEventListener("load",()=>{const l=JSON.parse(a.result),o=Aa(i,l);if(o){alert(o);return}else me.update(()=>Ca(i,l)),cr(i,e)?alert("Imported configuration is identical to currently loaded configuration; no changes to upload."):alert("New configuration imported. Choose 'update controller' to import, or 'Cancel' to abort")}),a.readAsText(s)}}),t.click(),t.remove()},$l=i=>{const e="data:text/json;charset=utf-8,"+encodeURIComponent(Ra(i)),t=document.createElement("a");t.href=e,t.download=`${Me(i.deviceId).name}_controller_config.json`,document.body.appendChild(t),t.click(),t.remove()};function Pn(i,e,t){const n=i.slice();return n[10]=e[t],n[12]=t,n}function Bn(i,e,t){const n=i.slice();return n[10]=e[t],n[12]=t,n}function Nl(i){let e,t,n,r,s,a;return e=new Ge({props:{label:"Cancel",icon:"times",click:i[4]}}),n=new Ge({props:{label:"Import config",icon:"file-import",click:i[5]}}),s=new Ge({props:{label:"Update controller",icon:"download",click:i[6],disabled:!i[1]}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment)},l(l){J(e.$$.fragment,l),t=z(l),J(n.$$.fragment,l),r=z(l),J(s.$$.fragment,l)},m(l,o){K(e,l,o),v(l,t,o),K(n,l,o),v(l,r,o),K(s,l,o),a=!0},p(l,o){const c={};o&2&&(c.disabled=!l[1]),s.$set(c)},i(l){a||($(e.$$.fragment,l),$(n.$$.fragment,l),$(s.$$.fragment,l),a=!0)},o(l){I(e.$$.fragment,l),I(n.$$.fragment,l),I(s.$$.fragment,l),a=!1},d(l){Z(e,l),l&&m(t),Z(n,l),l&&m(r),Z(s,l)}}}function yl(i){let e;return{c(){e=G("USB")},l(t){e=F(t,"USB")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Sl(i){let e;return{c(){e=G("TRS Jack")},l(t){e=F(t,"TRS Jack")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function wl(i){let e;return{c(){e=G("Device Options")},l(t){e=F(t,"Device Options")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Un(i){let e,t;return e=new Ye({props:{$$slots:{default:[Il]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Il(i){let e;return{c(){e=G("Factory Reset")},l(t){e=F(t,"Factory Reset")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Rl(i){let e,t,n,r,s,a,l=Pe.gte(i[0].firmwareVersion,"2.1.0"),o,c;e=new Ye({props:{$$slots:{default:[yl]},$$scope:{ctx:i}}}),n=new Ye({props:{$$slots:{default:[Sl]},$$scope:{ctx:i}}}),s=new Ye({props:{$$slots:{default:[wl]},$$scope:{ctx:i}}});let u=l&&Un(i);return{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment),a=Y(),u&&u.c(),o=ae()},l(f){J(e.$$.fragment,f),t=z(f),J(n.$$.fragment,f),r=z(f),J(s.$$.fragment,f),a=z(f),u&&u.l(f),o=ae()},m(f,d){K(e,f,d),v(f,t,d),K(n,f,d),v(f,r,d),K(s,f,d),v(f,a,d),u&&u.m(f,d),v(f,o,d),c=!0},p(f,d){const h={};d&16384&&(h.$$scope={dirty:d,ctx:f}),e.$set(h);const R={};d&16384&&(R.$$scope={dirty:d,ctx:f}),n.$set(R);const V={};d&16384&&(V.$$scope={dirty:d,ctx:f}),s.$set(V),d&1&&(l=Pe.gte(f[0].firmwareVersion,"2.1.0")),l?u?d&1&&$(u,1):(u=Un(f),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(he(),I(u,1,1,()=>{u=null}),de())},i(f){c||($(e.$$.fragment,f),$(n.$$.fragment,f),$(s.$$.fragment,f),$(u),c=!0)},o(f){I(e.$$.fragment,f),I(n.$$.fragment,f),I(s.$$.fragment,f),I(u),c=!1},d(f){Z(e,f),f&&m(t),Z(n,f),f&&m(r),Z(s,f),f&&m(a),u&&u.d(f),f&&m(o)}}}function Gn(i){let e,t;return e=new pr({props:{editControl:i[10],index:i[12]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editControl=n[10]),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Fn(i){let e,t,n=i[2]&&i[12]<i[2].controlCount&&Gn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),v(r,e,s),t=!0},p(r,s){r[2]&&r[12]<r[2].controlCount?n?(n.p(r,s),s&4&&$(n,1)):(n=Gn(r),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(he(),I(n,1,1,()=>{n=null}),de())},i(r){t||($(n),t=!0)},o(r){I(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function Al(i){let e,t,n=i[3].usbControls,r=[];for(let a=0;a<n.length;a+=1)r[a]=Fn(Bn(i,n,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){e=S("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=w(a,"DIV",{id:!0,class:!0});var l=L(e);for(let o=0;o<r.length;o+=1)r[o].l(l);l.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(a,l){v(a,e,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(a,l){if(l&12){n=a[3].usbControls;let o;for(o=0;o<n.length;o+=1){const c=Bn(a,n,o);r[o]?(r[o].p(c,l),$(r[o],1)):(r[o]=Fn(c),r[o].c(),$(r[o],1),r[o].m(e,null))}for(he(),o=n.length;o<r.length;o+=1)s(o);de()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)$(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)I(r[l]);t=!1},d(a){a&&m(e),nt(r,a)}}}function Vn(i){let e,t;return e=new pr({props:{editControl:i[10],index:i[12]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editControl=n[10]),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Hn(i){let e,t,n=i[2]&&i[12]<i[2].controlCount&&Vn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),v(r,e,s),t=!0},p(r,s){r[2]&&r[12]<r[2].controlCount?n?(n.p(r,s),s&4&&$(n,1)):(n=Vn(r),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(he(),I(n,1,1,()=>{n=null}),de())},i(r){t||($(n),t=!0)},o(r){I(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function Cl(i){let e,t,n=i[3].trsControls,r=[];for(let a=0;a<n.length;a+=1)r[a]=Hn(Pn(i,n,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){e=S("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=w(a,"DIV",{id:!0,class:!0});var l=L(e);for(let o=0;o<r.length;o+=1)r[o].l(l);l.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(a,l){v(a,e,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(a,l){if(l&12){n=a[3].trsControls;let o;for(o=0;o<n.length;o+=1){const c=Pn(a,n,o);r[o]?(r[o].p(c,l),$(r[o],1)):(r[o]=Hn(c),r[o].c(),$(r[o],1),r[o].m(e,null))}for(he(),o=n.length;o<r.length;o+=1)s(o);de()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)$(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)I(r[l]);t=!1},d(a){a&&m(e),nt(r,a)}}}function Ml(i){let e,t;return e=new rl({}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function xn(i){let e,t;return e=new qe({props:{$$slots:{default:[Tl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Tl(i){let e,t;return e=new cl({}),e.$on("message",i[7]),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Ol(i){let e,t,n,r,s,a,l,o,c=Pe.gte(i[0].firmwareVersion,"2.1.0"),u,f;e=new gr({props:{$$slots:{default:[Rl]},$$scope:{ctx:i}}}),n=new qe({props:{$$slots:{default:[Al]},$$scope:{ctx:i}}}),s=new qe({props:{$$slots:{default:[Cl]},$$scope:{ctx:i}}}),l=new qe({props:{$$slots:{default:[Ml]},$$scope:{ctx:i}}});let d=c&&xn(i);return{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment),a=Y(),W(l.$$.fragment),o=Y(),d&&d.c(),u=ae()},l(h){J(e.$$.fragment,h),t=z(h),J(n.$$.fragment,h),r=z(h),J(s.$$.fragment,h),a=z(h),J(l.$$.fragment,h),o=z(h),d&&d.l(h),u=ae()},m(h,R){K(e,h,R),v(h,t,R),K(n,h,R),v(h,r,R),K(s,h,R),v(h,a,R),K(l,h,R),v(h,o,R),d&&d.m(h,R),v(h,u,R),f=!0},p(h,R){const V={};R&16385&&(V.$$scope={dirty:R,ctx:h}),e.$set(V);const H={};R&16396&&(H.$$scope={dirty:R,ctx:h}),n.$set(H);const A={};R&16396&&(A.$$scope={dirty:R,ctx:h}),s.$set(A);const T={};R&16384&&(T.$$scope={dirty:R,ctx:h}),l.$set(T),R&1&&(c=Pe.gte(h[0].firmwareVersion,"2.1.0")),c?d?R&1&&$(d,1):(d=xn(h),d.c(),$(d,1),d.m(u.parentNode,u)):d&&(he(),I(d,1,1,()=>{d=null}),de())},i(h){f||($(e.$$.fragment,h),$(n.$$.fragment,h),$(s.$$.fragment,h),$(l.$$.fragment,h),$(d),f=!0)},o(h){I(e.$$.fragment,h),I(n.$$.fragment,h),I(s.$$.fragment,h),I(l.$$.fragment,h),I(d),f=!1},d(h){Z(e,h),h&&m(t),Z(n,h),h&&m(r),Z(s,h),h&&m(a),Z(l,h),h&&m(o),d&&d.d(h),h&&m(u)}}}function Ll(i){let e,t,n,r;return e=new Er({props:{title:"Edit Configuration",$$slots:{default:[Nl]},$$scope:{ctx:i}}}),n=new _r({props:{$$slots:{default:[Ol]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),v(s,t,a),K(n,s,a),r=!0},p(s,[a]){const l={};a&16386&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&16397&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||($(e.$$.fragment,s),$(n.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function Dl(i,e,t){let n,r,s,a,l;oe(i,ve,h=>t(0,r=h)),oe(i,De,h=>t(8,s=h)),oe(i,me,h=>t(3,a=h)),oe(i,Be,h=>t(9,l=h));let o=!1;me.subscribe(h=>{h&&r&&t(1,o=!cr(h,r))});const c=()=>{xe(De,s=!1,s)},u=()=>{a&&r&&vl(a,r)},f=()=>{rt(a),La(a,l),xe(ve,r=a,r),xe(De,s=!1,s)};function d(h){er.call(this,i,h)}return i.$$.update=()=>{i.$$.dirty&1&&t(2,n=r?Me(r.deviceId):null)},[r,o,n,a,c,u,f,d]}class kl extends Ee{constructor(e){super(),_e(this,e,Dl,Ll,ge,{})}}function jn(i){let e,t,n,r,s,a,l=i[0].val!==void 0&&qn(i);return{c(){e=S("dt"),t=G("Value"),n=S("dd"),r=S("div"),l&&l.c(),s=Y(),a=S("div"),this.h()},l(o){e=w(o,"DT",{class:!0});var c=L(e);t=F(c,"Value"),c.forEach(m),n=w(o,"DD",{class:!0});var u=L(n);r=w(u,"DIV",{class:!0});var f=L(r);l&&l.l(f),s=z(f),a=w(f,"DIV",{class:!0,style:!0}),L(a).forEach(m),f.forEach(m),u.forEach(m),this.h()},h(){O(e,"class","svelte-5fijw0"),O(a,"class","bar svelte-5fijw0"),Zt(a,"height",i[0].val+"px"),O(r,"class","inner svelte-5fijw0"),O(n,"class","display svelte-5fijw0")},m(o,c){v(o,e,c),b(e,t),v(o,n,c),b(n,r),l&&l.m(r,null),b(r,s),b(r,a)},p(o,c){o[0].val!==void 0?l?l.p(o,c):(l=qn(o),l.c(),l.m(r,s)):l&&(l.d(1),l=null),c&1&&Zt(a,"height",o[0].val+"px")},d(o){o&&m(e),o&&m(n),l&&l.d()}}}function qn(i){let e,t=i[0].val+"",n,r;return{c(){e=S("span"),n=G(t),this.h()},l(s){e=w(s,"SPAN",{class:!0});var a=L(e);n=F(a,t),a.forEach(m),this.h()},h(){O(e,"class",r=Qt(i[0].val<27?"lowvalue":"")+" svelte-5fijw0")},m(s,a){v(s,e,a),b(e,n)},p(s,a){a&1&&t!==(t=s[0].val+"")&&we(n,t),a&1&&r!==(r=Qt(s[0].val<27?"lowvalue":"")+" svelte-5fijw0")&&O(e,"class",r)},d(s){s&&m(e)}}}function Pl(i){let e,t,n=i[1]+1+"",r,s,a,l,o=i[0].channel+"",c,u,f,d,h=i[0].cc+"",R,V=!i[2]&&jn(i);return{c(){e=S("dl"),t=S("dt"),r=G(n),s=S("dt"),a=G("Channel"),l=S("dd"),c=G(o),u=S("dt"),f=G("CC"),d=S("dd"),R=G(h),V&&V.c(),this.h()},l(H){e=w(H,"DL",{class:!0});var A=L(e);t=w(A,"DT",{class:!0});var T=L(t);r=F(T,n),T.forEach(m),s=w(A,"DT",{class:!0});var D=L(s);a=F(D,"Channel"),D.forEach(m),l=w(A,"DD",{class:!0});var p=L(l);c=F(p,o),p.forEach(m),u=w(A,"DT",{class:!0});var M=L(u);f=F(M,"CC"),M.forEach(m),d=w(A,"DD",{class:!0});var k=L(d);R=F(k,h),k.forEach(m),V&&V.l(A),A.forEach(m),this.h()},h(){O(t,"class","index svelte-5fijw0"),O(s,"class","svelte-5fijw0"),O(l,"class","svelte-5fijw0"),O(u,"class","svelte-5fijw0"),O(d,"class","svelte-5fijw0"),O(e,"class","config-column svelte-5fijw0")},m(H,A){v(H,e,A),b(e,t),b(t,r),b(e,s),b(s,a),b(e,l),b(l,c),b(e,u),b(u,f),b(e,d),b(d,R),V&&V.m(e,null)},p(H,[A]){A&2&&n!==(n=H[1]+1+"")&&we(r,n),A&1&&o!==(o=H[0].channel+"")&&we(c,o),A&1&&h!==(h=H[0].cc+"")&&we(R,h),H[2]?V&&(V.d(1),V=null):V?V.p(H,A):(V=jn(H),V.c(),V.m(e,null))},i:ue,o:ue,d(H){H&&m(e),V&&V.d()}}}function Bl(i,e,t){let{control:n}=e,{index:r}=e,{disableValue:s=!1}=e;return i.$$set=a=>{"control"in a&&t(0,n=a.control),"index"in a&&t(1,r=a.index),"disableValue"in a&&t(2,s=a.disableValue)},[n,r,s]}class br extends Ee{constructor(e){super(),_e(this,e,Bl,Pl,ge,{control:0,index:1,disableValue:2})}}function Yn(i,e,t){const n=i.slice();return n[6]=e[t],n[8]=t,n}function zn(i,e,t){const n=i.slice();return n[6]=e[t],n[8]=t,n}function Ul(i){let e,t,n,r;return e=new Ge({props:{label:"Export current config",icon:"file-export",click:i[2]}}),n=new Ge({props:{label:"Edit Config",icon:"pencil-alt",click:i[3]}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),v(s,t,a),K(n,s,a),r=!0},p:ue,i(s){r||($(e.$$.fragment,s),$(n.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function Gl(i){let e;return{c(){e=G("USB")},l(t){e=F(t,"USB")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Fl(i){let e;return{c(){e=G("TRS Jack")},l(t){e=F(t,"TRS Jack")},m(t,n){v(t,e,n)},d(t){t&&m(e)}}}function Vl(i){let e,t,n,r;return e=new Ye({props:{$$slots:{default:[Gl]},$$scope:{ctx:i}}}),n=new Ye({props:{$$slots:{default:[Fl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),v(s,t,a),K(n,s,a),r=!0},p(s,a){const l={};a&1024&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&1024&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||($(e.$$.fragment,s),$(n.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function Xn(i){let e,t;return e=new br({props:{control:i[6],index:i[8]}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.control=n[6]),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Wn(i){let e,t,n=i[1]&&i[8]<i[1].controlCount&&Xn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),v(r,e,s),t=!0},p(r,s){r[1]&&r[8]<r[1].controlCount?n?(n.p(r,s),s&2&&$(n,1)):(n=Xn(r),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(he(),I(n,1,1,()=>{n=null}),de())},i(r){t||($(n),t=!0)},o(r){I(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function Hl(i){let e,t,n=i[0].usbControls,r=[];for(let a=0;a<n.length;a+=1)r[a]=Wn(zn(i,n,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){e=S("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=w(a,"DIV",{id:!0,class:!0});var l=L(e);for(let o=0;o<r.length;o+=1)r[o].l(l);l.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(a,l){v(a,e,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(a,l){if(l&3){n=a[0].usbControls;let o;for(o=0;o<n.length;o+=1){const c=zn(a,n,o);r[o]?(r[o].p(c,l),$(r[o],1)):(r[o]=Wn(c),r[o].c(),$(r[o],1),r[o].m(e,null))}for(he(),o=n.length;o<r.length;o+=1)s(o);de()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)$(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)I(r[l]);t=!1},d(a){a&&m(e),nt(r,a)}}}function Jn(i){let e,t;return e=new br({props:{control:i[6],index:i[8],disableValue:!0}}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.control=n[6]),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function Kn(i){let e,t,n=i[1]&&i[8]<i[1].controlCount&&Jn(i);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,s){n&&n.m(r,s),v(r,e,s),t=!0},p(r,s){r[1]&&r[8]<r[1].controlCount?n?(n.p(r,s),s&2&&$(n,1)):(n=Jn(r),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(he(),I(n,1,1,()=>{n=null}),de())},i(r){t||($(n),t=!0)},o(r){I(n),t=!1},d(r){n&&n.d(r),r&&m(e)}}}function xl(i){let e,t,n,r,s,a=i[0].trsControls,l=[];for(let c=0;c<a.length;c+=1)l[c]=Kn(Yn(i,a,c));const o=c=>I(l[c],1,1,()=>{l[c]=null});return{c(){e=S("div");for(let c=0;c<l.length;c+=1)l[c].c();t=Y(),n=S("p"),r=G("There is no realtime preview of the TRS outputs."),this.h()},l(c){e=w(c,"DIV",{id:!0,class:!0});var u=L(e);for(let d=0;d<l.length;d+=1)l[d].l(u);u.forEach(m),t=z(c),n=w(c,"P",{});var f=L(n);r=F(f,"There is no realtime preview of the TRS outputs."),f.forEach(m),this.h()},h(){O(e,"id","controls"),O(e,"class","svelte-13ul1lp")},m(c,u){v(c,e,u);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);v(c,t,u),v(c,n,u),b(n,r),s=!0},p(c,u){if(u&3){a=c[0].trsControls;let f;for(f=0;f<a.length;f+=1){const d=Yn(c,a,f);l[f]?(l[f].p(d,u),$(l[f],1)):(l[f]=Kn(d),l[f].c(),$(l[f],1),l[f].m(e,null))}for(he(),f=a.length;f<l.length;f+=1)o(f);de()}},i(c){if(!s){for(let u=0;u<a.length;u+=1)$(l[u]);s=!0}},o(c){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)I(l[u]);s=!1},d(c){c&&m(e),nt(l,c),c&&m(t),c&&m(n)}}}function jl(i){let e,t,n,r,s,a;return e=new gr({props:{$$slots:{default:[Vl]},$$scope:{ctx:i}}}),n=new qe({props:{$$slots:{default:[Hl]},$$scope:{ctx:i}}}),s=new qe({props:{$$slots:{default:[xl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment),r=Y(),W(s.$$.fragment)},l(l){J(e.$$.fragment,l),t=z(l),J(n.$$.fragment,l),r=z(l),J(s.$$.fragment,l)},m(l,o){K(e,l,o),v(l,t,o),K(n,l,o),v(l,r,o),K(s,l,o),a=!0},p(l,o){const c={};o&1024&&(c.$$scope={dirty:o,ctx:l}),e.$set(c);const u={};o&1027&&(u.$$scope={dirty:o,ctx:l}),n.$set(u);const f={};o&1027&&(f.$$scope={dirty:o,ctx:l}),s.$set(f)},i(l){a||($(e.$$.fragment,l),$(n.$$.fragment,l),$(s.$$.fragment,l),a=!0)},o(l){I(e.$$.fragment,l),I(n.$$.fragment,l),I(s.$$.fragment,l),a=!1},d(l){Z(e,l),l&&m(t),Z(n,l),l&&m(r),Z(s,l)}}}function ql(i){let e,t,n,r;return e=new Er({props:{title:"Current Configuration",$$slots:{default:[Ul]},$$scope:{ctx:i}}}),n=new _r({props:{$$slots:{default:[jl]},$$scope:{ctx:i}}}),{c(){W(e.$$.fragment),t=Y(),W(n.$$.fragment)},l(s){J(e.$$.fragment,s),t=z(s),J(n.$$.fragment,s)},m(s,a){K(e,s,a),v(s,t,a),K(n,s,a),r=!0},p(s,[a]){const l={};a&1024&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&1027&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||($(e.$$.fragment,s),$(n.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(n.$$.fragment,s),r=!1},d(s){Z(e,s),s&&m(t),Z(n,s)}}}function Yl(i,e,t){let n,r,s,a;oe(i,ve,c=>t(0,r=c)),oe(i,me,c=>t(4,s=c)),oe(i,De,c=>t(5,a=c));const l=()=>{r&&$l(r)},o=()=>{xe(De,a=!0,a),r&&xe(me,s=structuredClone(r),s)};return i.$$.update=()=>{i.$$.dirty&1&&t(1,n=r?Me(r.deviceId):null)},[r,n,l,o]}class zl extends Ee{constructor(e){super(),_e(this,e,Yl,ql,ge,{})}}function Xl(i){let e,t;return{c(){e=S("p"),t=G(`WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.`),this.h()},l(n){e=w(n,"P",{class:!0});var r=L(e);t=F(r,`WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.`),r.forEach(m),this.h()},h(){O(e,"class","notice svelte-kpoxps")},m(n,r){v(n,e,r),b(e,t)},p:ue,i:ue,o:ue,d(n){n&&m(e)}}}function Wl(i){let e,t,n,r;const s=[Kl,Jl],a=[];function l(o,c){return o[1]?0:1}return e=l(i),t=a[e]=s[e](i),{c(){t.c(),n=ae()},l(o){t.l(o),n=ae()},m(o,c){a[e].m(o,c),v(o,n,c),r=!0},p(o,c){let u=e;e=l(o),e===u?a[e].p(o,c):(he(),I(a[u],1,1,()=>{a[u]=null}),de(),t=a[e],t?t.p(o,c):(t=a[e]=s[e](o),t.c()),$(t,1),t.m(n.parentNode,n))},i(o){r||($(t),r=!0)},o(o){I(t),r=!1},d(o){a[e].d(o),o&&m(n)}}}function Jl(i){let e,t;return{c(){e=S("p"),t=G("Connect a controller via USB."),this.h()},l(n){e=w(n,"P",{class:!0});var r=L(e);t=F(r,"Connect a controller via USB."),r.forEach(m),this.h()},h(){O(e,"class","notice svelte-kpoxps")},m(n,r){v(n,e,r),b(e,t)},p:ue,i:ue,o:ue,d(n){n&&m(e)}}}function Kl(i){let e,t,n,r,s;const a=[Ql,Zl],l=[];function o(c,u){return u&6&&(e=null),e==null&&(e=!!(c[2]&&Pe.gte(c[1].firmwareVersion,"2.1.0"))),e?0:1}return t=o(i,-1),n=l[t]=a[t](i),{c(){n.c(),r=ae()},l(c){n.l(c),r=ae()},m(c,u){l[t].m(c,u),v(c,r,u),s=!0},p(c,u){let f=t;t=o(c,u),t===f?l[t].p(c,u):(he(),I(l[f],1,1,()=>{l[f]=null}),de(),n=l[t],n?n.p(c,u):(n=l[t]=a[t](c),n.c()),$(n,1),n.m(r.parentNode,r))},i(c){s||($(n),s=!0)},o(c){I(n),s=!1},d(c){l[t].d(c),c&&m(r)}}}function Zl(i){let e,t,n,r,s;const a=[to,eo],l=[];function o(c,u){return c[3]?0:1}return e=o(i),t=l[e]=a[e](i),{c(){t.c(),n=Y(),r=S("p")},l(c){t.l(c),n=z(c),r=w(c,"P",{}),L(r).forEach(m)},m(c,u){l[e].m(c,u),v(c,n,u),v(c,r,u),s=!0},p(c,u){let f=e;e=o(c),e!==f&&(he(),I(l[f],1,1,()=>{l[f]=null}),de(),t=l[e],t||(t=l[e]=a[e](c),t.c()),$(t,1),t.m(n.parentNode,n))},i(c){s||($(t),s=!0)},o(c){I(t),s=!1},d(c){l[e].d(c),c&&m(n),c&&m(r)}}}function Ql(i){let e,t,n,r,s,a,l;return a=new Ge({props:{label:"Click to reset your 16n's EEPROM to factory defaults",click:i[5]}}),{c(){e=S("div"),t=S("p"),n=G(`It looks like a 16n is trying to connect, but may have a corrupt
              memory.`),r=Y(),s=S("p"),W(a.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0});var c=L(e);t=w(c,"P",{});var u=L(t);n=F(u,`It looks like a 16n is trying to connect, but may have a corrupt
              memory.`),u.forEach(m),r=z(c),s=w(c,"P",{});var f=L(s);J(a.$$.fragment,f),f.forEach(m),c.forEach(m),this.h()},h(){O(e,"class","notice svelte-kpoxps")},m(o,c){v(o,e,c),b(e,t),b(t,n),b(e,r),b(e,s),K(a,s,null),l=!0},p:ue,i(o){l||($(a.$$.fragment,o),l=!0)},o(o){I(a.$$.fragment,o),l=!1},d(o){o&&m(e),Z(a)}}}function eo(i){let e,t;return e=new zl({}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function to(i){let e,t;return e=new kl({}),{c(){W(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Z(e,n)}}}function no(i){let e,t,n,r,s,a,l,o,c,u,f,d,h,R,V,H;a=new Xa({});const A=[Wl,Xl],T=[];function D(p,M){return p[0]?0:1}return c=D(i),u=T[c]=A[c](i),{c(){e=S("main"),t=S("div"),n=S("h1"),r=G("16n configuration tool"),s=Y(),W(a.$$.fragment),l=Y(),o=S("div"),u.c(),f=Y(),d=S("div"),h=S("div"),R=G("16n Editor v"),V=G(i[4]),this.h()},l(p){e=w(p,"MAIN",{class:!0});var M=L(e);t=w(M,"DIV",{id:!0,class:!0});var k=L(t);n=w(k,"H1",{class:!0});var q=L(n);r=F(q,"16n configuration tool"),q.forEach(m),s=z(k),J(a.$$.fragment,k),k.forEach(m),l=z(M),o=w(M,"DIV",{id:!0,class:!0});var se=L(o);u.l(se),se.forEach(m),f=z(M),d=w(M,"DIV",{id:!0,class:!0});var te=L(d);h=w(te,"DIV",{class:!0});var ce=L(h);R=F(ce,"16n Editor v"),V=F(ce,i[4]),ce.forEach(m),te.forEach(m),M.forEach(m),this.h()},h(){O(n,"class","svelte-kpoxps"),O(t,"id","head"),O(t,"class","svelte-kpoxps"),O(o,"id","inner"),O(o,"class","svelte-kpoxps"),O(h,"class","foot-left svelte-kpoxps"),O(d,"id","foot"),O(d,"class","svelte-kpoxps"),O(e,"class","svelte-kpoxps")},m(p,M){v(p,e,M),b(e,t),b(t,n),b(n,r),b(t,s),K(a,t,null),b(e,l),b(e,o),T[c].m(o,null),b(e,f),b(e,d),b(d,h),b(h,R),b(h,V),H=!0},p(p,[M]){let k=c;c=D(p),c===k?T[c].p(p,M):(he(),I(T[k],1,1,()=>{T[k]=null}),de(),u=T[c],u?u.p(p,M):(u=T[c]=A[c](p),u.c()),$(u,1),u.m(o,null))},i(p){H||($(a.$$.fragment,p),$(u),H=!0)},o(p){I(a.$$.fragment,p),I(u),H=!1},d(p){p&&m(e),Z(a),T[c].d()}}}function ro(i,e,t){let n,r,s,a,l;oe(i,Be,f=>t(6,n=f)),oe(i,qt,f=>t(0,r=f)),oe(i,ve,f=>t(1,s=f)),oe(i,_t,f=>t(2,a=f)),oe(i,De,f=>t(3,l=f));const o="2.0.4",c=!!navigator.requestMIDIAccess;return Nr(()=>{c&&N.enable({sysex:!0}).then(Pa).catch(f=>alert(f))}),[r,s,a,l,o,()=>{n&&ur(n)}]}class ao extends Ee{constructor(e){super(),_e(this,e,ro,no,ge,{})}}export{ao as default};
